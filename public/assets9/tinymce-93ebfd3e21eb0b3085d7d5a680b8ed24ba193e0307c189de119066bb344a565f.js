window.tinyMCEPreInit=window.tinyMCEPreInit||{base:"/assets/tinymce",query:"3.5.8.3",suffix:""},function(u){var s,t=/^\s*|\s*$/g,n="$1"==="B".replace(/A(.)|B/,"$1"),i={majorVersion:"3",minorVersion:"5.8",releaseDate:"2012-11-20",_init:function(){function e(e){return e.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(e.src)?(/_(src|dev)\.js/g.test(e.src)&&(s.suffix="_src"),-1!=(i=e.src.indexOf("?"))&&(s.query=e.src.substring(i+1)),s.baseURL=e.src.substring(0,e.src.lastIndexOf("/")),r&&-1==s.baseURL.indexOf("://")&&0!==s.baseURL.indexOf("/")&&(s.baseURL=r+s.baseURL),s.baseURL):null}var t,n,o,r,i,a,s=this,c=document,l=navigator,d=l.userAgent;if(s.isOpera=u.opera&&opera.buildNumber,s.isWebKit=/WebKit/.test(d),s.isIE=!s.isWebKit&&!s.isOpera&&/MSIE/gi.test(d)&&/Explorer/gi.test(l.appName),s.isIE6=s.isIE&&/MSIE [56]/.test(d),s.isIE7=s.isIE&&/MSIE [7]/.test(d),s.isIE8=s.isIE&&/MSIE [8]/.test(d),s.isIE9=s.isIE&&/MSIE [9]/.test(d),s.isGecko=!s.isWebKit&&/Gecko/.test(d),s.isMac=-1!=d.indexOf("Mac"),s.isAir=/adobeair/i.test(d),s.isIDevice=/(iPad|iPhone)/.test(d),s.isIOS5=s.isIDevice&&534<=d.match(/AppleWebKit\/(\d*)/)[1],u.tinyMCEPreInit)return s.suffix=tinyMCEPreInit.suffix,s.baseURL=tinyMCEPreInit.base,void(s.query=tinyMCEPreInit.query);for(s.suffix="",n=c.getElementsByTagName("base"),t=0;t<n.length;t++)(a=n[t].href)&&(/^https?:\/\/[^\/]+$/.test(a)&&(a+="/"),r=a?a.match(/.*\//)[0]:"");for(n=c.getElementsByTagName("script"),t=0;t<n.length;t++)if(e(n[t]))return;if(o=c.getElementsByTagName("head")[0])for(n=o.getElementsByTagName("script"),t=0;t<n.length;t++)if(e(n[t]))return},is:function(e,t){return t?!("array"!=t||!i.isArray(e))||typeof e==t:e!==s},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},makeMap:function(e,t,n){var o;for(t=t||",","string"==typeof(e=e||[])&&(e=e.split(t)),n=n||{},o=e.length;o--;)n[e[o]]={};return n},each:function(e,t,n){var o,r;if(!e)return 0;if(n=n||e,e.length!==s){for(o=0,r=e.length;o<r;o++)if(!1===t.call(n,e[o],o,e))return 0}else for(o in e)if(e.hasOwnProperty(o)&&!1===t.call(n,e[o],o,e))return 0;return 1},map:function(e,t){var n=[];return i.each(e,function(e){n.push(t(e))}),n},grep:function(e,t){var n=[];return i.each(e,function(e){t&&!t(e)||n.push(e)}),n},inArray:function(e,t){var n,o;if(e)for(n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},extend:function(e,t){var n,o,r,i,a=arguments;for(n=1,o=a.length;n<o;n++)for(r in t=a[n])t.hasOwnProperty(r)&&(i=t[r])!==s&&(e[r]=i);return e},trim:function(e){return(e?""+e:"").replace(t,"")},create:function(e,t,n){var o,r,i,a,s,c=this,l=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),i=e[3].match(/(^|\.)(\w+)$/i)[2],!(r=c.createNS(e[3].replace(/\.\w+$/,""),n))[i]){if("static"==e[2])return r[i]=t,void(this.onCreate&&this.onCreate(e[2],e[3],r[i]));t[i]||(t[i]=function(){},l=1),r[i]=t[i],c.extend(r[i].prototype,t),e[5]&&(o=c.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=r[i],r[i]=l?function(){return o[a].apply(this,arguments)}:function(){return this.parent=o[a],s.apply(this,arguments)},r[i].prototype[i]=r[i],c.each(o,function(e,t){r[i].prototype[t]=o[t]}),c.each(t,function(e,t){o[t]?r[i].prototype[t]=function(){return this.parent=o[t],e.apply(this,arguments)}:t!=i&&(r[i].prototype[t]=e)})),c.each(t["static"],function(e,t){r[i][t]=e}),this.onCreate&&this.onCreate(e[2],e[3],r[i].prototype)}},walk:function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),i.each(e,function(e,t){if(!1===n.call(r,e,t,o))return!1;i.walk(e,n,o,r)}))},createNS:function(e,t){var n,o;for(t=t||u,e=e.split("."),n=0;n<e.length;n++)t[o=e[n]]||(t[o]={}),t=t[o];return t},resolve:function(e,t){var n,o;for(t=t||u,n=0,o=(e=e.split(".")).length;n<o&&(t=t[e[n]]);n++);return t},addUnload:function(e,t){function o(){function e(){t.detachEvent("onstop",e),r&&r(),t=0}var t=document;"interactive"==t.readyState&&(t&&t.attachEvent("onstop",e),u.setTimeout(function(){t&&t.detachEvent("onstop",e)},0))}var r,i=this;return r=function(){var e,t,n=i.unloads;if(n){for(t in n)(e=n[t])&&e.func&&e.func.call(e.scope,1);u.detachEvent?(u.detachEvent("onbeforeunload",o),u.detachEvent("onunload",r)):u.removeEventListener&&u.removeEventListener("unload",r,!1),i.unloads=e=n=w=r=0,u.CollectGarbage&&CollectGarbage()}},e={func:e,scope:t||this},i.unloads?i.unloads.push(e):(u.attachEvent?(u.attachEvent("onunload",r),u.attachEvent("onbeforeunload",o)):u.addEventListener&&u.addEventListener("unload",r,!1),i.unloads=[e]),e},removeUnload:function(n){var o=this.unloads,r=null;return i.each(o,function(e,t){if(e&&e.func==n)return o.splice(t,1),r=n,!1}),r},explode:function(e,t){return!e||i.is(e,"array")?e:i.map(e.split(t||","),i.trim)},_addVer:function(e){var t;return this.query?(t=(-1==e.indexOf("?")?"?":"&")+this.query,-1==e.indexOf("#")?e+t:e.replace("#",t+"#")):e},_replace:function(e,o,t){return n?t.replace(e,function(){var e,t=o,n=arguments;for(e=0;e<n.length-2;e++)t=n[e]===s?t.replace(new RegExp("\\$"+e,"g"),""):t.replace(new RegExp("\\$"+e,"g"),n[e]);return t}):t.replace(e,o)}};i._init(),u.tinymce=u.tinyMCE=i}(window),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,inDispatch:!1,Dispatcher:function(e){this.scope=e||this,this.listeners=[]},add:function(e,t){return this.listeners.push({cb:e,scope:t||this.scope}),e},addToTop:function(e,t){var n=this,o={cb:e,scope:t||n.scope};return n.inDispatch?n.listeners=[o].concat(n.listeners):n.listeners.unshift(o),e},remove:function(n){var o=this.listeners,r=null;return tinymce.each(o,function(e,t){if(n==e.cb)return r=e,o.splice(t,1),!1}),r},dispatch:function(){var e,t,n,o=this,r=arguments,i=o.listeners;for(o.inDispatch=!0,t=0;t<i.length&&!1!==(e=(n=i[t]).cb.apply(n.scope,0<r.length?r:[n.scope]));t++);return o.inDispatch=!1,e}}),function(){var s=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(o,e){var t,n,r=this;o=tinymce.trim(o),e=r.settings=e||{},/^([\w\-]+):([^\/]{2})/i.test(o)||/^\s*#/.test(o)?r.source=o:(0===o.indexOf("/")&&0!==o.indexOf("//")&&(o=(e.base_uri&&e.base_uri.protocol||"http")+"://mce_host"+o),/^[\w\-]*:?\/\//.test(o)||(n=e.base_uri?e.base_uri.path:new tinymce.util.URI(location.href).directory,o=(e.base_uri&&e.base_uri.protocol||"http")+"://mce_host"+r.toAbsPath(n,o)),o=o.replace(/@@/g,"(mce_at)"),o=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(o),s(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(e,t){var n=o[t];n&&(n=n.replace(/\(mce_at\)/g,"@@")),r[e]=n}),(t=e.base_uri)&&(r.protocol||(r.protocol=t.protocol),r.userInfo||(r.userInfo=t.userInfo),r.port||"mce_host"!==r.host||(r.port=t.port),r.host&&"mce_host"!==r.host||(r.host=t.host),r.source=""))},setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t,n=this;if("./"===e)return e;if("mce_host"!=(e=new tinymce.util.URI(e,{base_uri:n})).host&&n.host!=e.host&&e.host||n.port!=e.port||n.protocol!=e.protocol)return e.getURI();var o=n.getURI(),r=e.getURI();return o==r||"/"==o.charAt(o.length-1)&&o.substr(0,o.length-1)==r?o:(t=n.toRelPath(n.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return(e=new tinymce.util.URI(e,{base_uri:this})).getURI(this.host==e.host&&this.protocol==e.protocol?t:0)},toRelPath:function(e,t){var n,o,r,i=0,a="";if(e=(e=e.substring(0,e.lastIndexOf("/"))).split("/"),n=t.split("/"),e.length>=n.length)for(o=0,r=e.length;o<r;o++)if(o>=n.length||e[o]!=n[o]){i=o+1;break}if(e.length<n.length)for(o=0,r=n.length;o<r;o++)if(o>=e.length||e[o]!=n[o]){i=o+1;break}if(1===i)return t;for(o=0,r=e.length-(i-1);o<r;o++)a+="../";for(o=i-1,r=n.length;o<r;o++)a+=o!=i-1?"/"+n[o]:n[o];return a},toAbsPath:function(e,t){var n,o,r,i=0,a=[];for(o=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),s(e,function(e){e&&a.push(e)}),e=a,n=t.length-1,a=[];0<=n;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?0<i?i--:a.push(t[n]):i++);return 0!==(r=(n=e.length-i)<=0?a.reverse().join("/"):e.slice(0,n).join("/")+"/"+a.reverse().join("/")).indexOf("/")&&(r="/"+r),o&&r.lastIndexOf("/")!==r.length-1&&(r+=o),r},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(n.protocol&&(t+=n.protocol+"://"),n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}})}(),function(){var s=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(e){var t,n=this.get(e);return n&&s(n.split("&"),function(e){e=e.split("="),(t=t||{})[unescape(e[0])]=unescape(e[1])}),t},setHash:function(e,t,n,o,r,i){var a="";s(t,function(e,t){a+=(a?"&":"")+escape(t)+"="+escape(e)}),this.set(e,a,n,o,r,i)},get:function(e){var t,n,o=document.cookie,r=e+"=";if(o){if(-1==(n=o.indexOf("; "+r))){if(0!==(n=o.indexOf(r)))return null}else n+=2;return-1==(t=o.indexOf(";",n))&&(t=o.length),unescape(o.substring(n+r.length,t))}},set:function(e,t,n,o,r,i){document.cookie=e+"="+escape(t)+(n?"; expires="+n.toGMTString():"")+(o?"; path="+escape(o):"")+(r?"; domain="+r:"")+(i?"; secure":"")},remove:function(e,t,n){var o=new Date;o.setTime(o.getTime()-1e3),this.set(e,"",o,t,n)}})}(),function(){function serialize(e,n){var o,r,t,i;if(n=n||'"',null==e)return"null";if("string"==(t=typeof e))return r="\bb\tt\nn\ff\rr\"\"''\\\\",n+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(o=r.indexOf(t))+1?"\\"+r.charAt(o+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+n;if("object"!=t)return""+e;if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(o=0,r="[";o<e.length;o++)r+=(0<o?",":"")+serialize(e[o],n);return r+"]"}for(i in r="{",e)e.hasOwnProperty(i)&&(r+="function"!=typeof e[i]?(1<r.length?","+n:n)+i+n+":"+serialize(e[i],n):"");return r+"}"}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(e){function t(){!e.async||4==o.readyState||1e4<i++?(e.success&&i<1e4&&200==o.status?e.success.call(e.success_scope,""+o.responseText,o,e):e.error&&e.error.call(e.error_scope,1e4<i?"TIMED_OUT":"GENERAL",o,e),o=null):r.setTimeout(t,10)}function n(e){o=0;try{o=new ActiveXObject(e)}catch(t){}return o}var o,r=window,i=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",o=r.XMLHttpRequest?new XMLHttpRequest:n("Microsoft.XMLHTTP")||n("Msxml2.XMLHTTP")){if(o.overrideMimeType&&o.overrideMimeType(e.content_type),o.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&o.setRequestHeader("Content-Type",e.content_type),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send(e.data),!e.async)return t();r.setTimeout(t,10)}}}),function(){var t=tinymce.extend,i=tinymce.util.JSON,e=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(e){this.settings=t({},e),this.count=0},send:function(n){var o=n.error,r=n.success;(n=t(this.settings,n)).success=function(e,t){void 0===(e=i.parse(e))&&(e={error:"JSON Parse error."}),e.error?o.call(n.error_scope||n.scope,e.error,t):r.call(n.success_scope||n.scope,e.result)},n.error=function(e,t){o&&o.call(n.error_scope||n.scope,e,t)},n.data=i.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",e.send(n)},"static":{sendRPC:function(e){return(new tinymce.util.JSONRequest).send(e)}}})}(),function(t){t.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(e){return t.isMac?e.metaKey:e.ctrlKey&&!e.altKey}}}(tinymce),tinymce.util.Quirks=function(_){function o(e,t){try{_.getDoc().execCommand(e,!1,t)}catch(n){}}function e(){var e=_.getDoc().documentMode;return e||6}function l(e){return e.isDefaultPrevented()}function t(){function o(e){var t,n,o,r;if(t=M.getRng(),n=B.getParent(t.startContainer,B.isBlock),e&&(n=B.getNext(n,B.isBlock)),n){for(o=n.firstChild;o&&3==o.nodeType&&0===o.nodeValue.length;)o=o.nextSibling;o&&"SPAN"===o.nodeName&&(r=o.cloneNode(!1))}I(B.select("span",n),function(e){e.setAttribute("data-mce-mark","1")}),_.getDoc().execCommand(e?"ForwardDelete":"Delete",!1,null),n=B.getParent(t.startContainer,B.isBlock),I(B.select("span",n),function(e){var t=M.getBookmark();r?B.replace(r.cloneNode(!1),e,!0):e.getAttribute("data-mce-mark")?e.removeAttribute("data-mce-mark"):B.remove(e,!0),M.moveToBookmark(t)})}_.onKeyDown.add(function(e,t){var n;n=t.keyCode==A,l(t)||!n&&t.keyCode!=T||N.modifierPressed(t)||(t.preventDefault(),o(n))}),_.addCommand("Delete",function(){o()})}function n(){function o(e){var t=B.create("body"),n=e.cloneContents();return t.appendChild(n),M.serializer.serialize(t,{format:"html"})}function r(e){var t=o(e),n=B.createRng();return n.selectNode(_.getBody()),t===o(n)}_.onKeyDown.add(function(e,t){var n,o=t.keyCode;if(!l(t)&&(o==A||o==T)){if((n=e.selection.isCollapsed())&&!B.isEmpty(e.getBody()))return;if(tinymce.isIE&&!n)return;if(!n&&!r(e.selection.getRng()))return;e.setContent(""),e.selection.setCursorLocation(e.getBody(),0),e.nodeChanged()}})}function r(){_.onKeyDown.add(function(e,t){!l(t)&&65==t.keyCode&&N.metaKeyPressed(t)&&(t.preventDefault(),e.execCommand("SelectAll"))})}function i(){_.settings.content_editable||(B.bind(_.getDoc(),"focusin",function(){M.setRng(M.getRng())}),B.bind(_.getDoc(),"mousedown",function(e){e.target==_.getDoc().documentElement&&(_.getWin().focus(),M.setRng(M.getRng()))}))}function a(){_.onKeyDown.add(function(e,t){if(!l(t)&&t.keyCode===T&&M.isCollapsed()&&0===M.getRng(!0).startOffset){var n=M.getNode().previousSibling;n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(B.remove(n),tinymce.dom.Event.cancel(t))}})}function s(){Range.prototype.getClientRects||_.onMouseDown.add(function(e,t){if(!l(t)&&"HTML"===t.target.nodeName){var n=e.getBody();n.blur(),setTimeout(function(){n.focus()},0)}})}function c(){_.onClick.add(function(e,t){t=t.target,/^(IMG|HR)$/.test(t.nodeName)&&M.getSel().setBaseAndExtent(t,0,t,1),"A"==t.nodeName&&B.hasClass(t,"mceItemAnchor")&&M.select(t),e.nodeChanged()})}function d(){function o(){var e=B.getAttribs(M.getStart().cloneNode(!1));return function(){var t=M.getStart();t!==_.getBody()&&(B.setAttrib(t,"style",null),I(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function r(){return!M.isCollapsed()&&B.getParent(M.getStart(),B.isBlock)!=B.getParent(M.getEnd(),B.isBlock)}function n(e,t){return t.preventDefault(),!1}_.onKeyPress.add(function(e,t){var n;if(!l(t)&&(8==t.keyCode||46==t.keyCode)&&r())return n=o(),e.getDoc().execCommand("delete",!1,null),n(),t.preventDefault(),!1}),B.bind(_.getDoc(),"cut",function(e){var t;!l(e)&&r()&&(t=o(),_.onKeyUp.addToTop(n),setTimeout(function(){t(),_.onKeyUp.remove(n)},0))})}function u(){var t,e;B.bind(_.getDoc(),"selectionchange",function(){e&&(clearTimeout(e),e=0),e=window.setTimeout(function(){var e=M.getRng();t&&tinymce.dom.RangeUtils.compareRanges(e,t)||(_.nodeChanged(),t=e)},50)})}function f(){document.body.setAttribute("role","application")}function p(){_.onKeyDown.add(function(e,t){if(!l(t)&&t.keyCode===T&&M.isCollapsed()&&0===M.getRng(!0).startOffset){var n=M.getNode().previousSibling;if(n&&n.nodeName&&"table"===n.nodeName.toLowerCase())return tinymce.dom.Event.cancel(t)}})}function m(){7<e()||(o("RespectVisibilityInDesign",!0),_.contentStyles.push(".mceHideBrInPre pre br {display: none}"),B.addClass(_.getBody(),"mceHideBrInPre"),L.addNodeFilter("pre",function(e){for(var t,n,o,r,i=e.length;i--;)for(n=(t=e[i].getAll("br")).length;n--;)(r=(o=t[n]).prev)&&3===r.type&&"\n"!=r.value.charAt(r.value-1)?r.value+="\n":o.parent.insert(new tinymce.html.Node("#text",3),o,!0).value="\n"}),D.addNodeFilter("pre",function(e){for(var t,n,o,r=e.length;r--;)for(n=(t=e[r].getAll("br")).length;n--;)(o=t[n].prev)&&3==o.type&&(o.value=o.value.replace(/\r?\n$/,""))}))}function h(){B.bind(_.getBody(),"mouseup",function(){var e,t=M.getNode();"IMG"==t.nodeName&&((e=B.getStyle(t,"width"))&&(B.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),B.setStyle(t,"width","")),(e=B.getStyle(t,"height"))&&(B.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),B.setStyle(t,"height","")))})}function g(){_.onKeyDown.add(function(e,t){var n,o,r,i,a,s,c;n=t.keyCode==A,l(t)||!n&&t.keyCode!=T||N.modifierPressed(t)||(r=(o=M.getRng()).startContainer,i=o.startOffset,c=o.collapsed,3==r.nodeType&&0<r.nodeValue.length&&(0===i&&!c||c&&i===(n?0:1))&&(nonEmptyElements=e.schema.getNonEmptyElements(),t.preventDefault(),a=B.create("br",{id:"__tmp"}),r.parentNode.insertBefore(a,r),e.getDoc().execCommand(n?"ForwardDelete":"Delete",!1,null),(s=(r=M.getRng().startContainer).previousSibling)&&1==s.nodeType&&!B.isBlock(s)&&B.isEmpty(s)&&!nonEmptyElements[s.nodeName.toLowerCase()]&&B.remove(s),B.remove("__tmp")))})}function v(){_.onKeyDown.add(function(e,t){var n,o,r,i,a;if(!l(t)&&t.keyCode==N.BACKSPACE&&(o=(n=M.getRng()).startContainer,r=n.startOffset,i=B.getRoot(),a=o,n.collapsed&&0===r)){for(;a&&a.parentNode&&a.parentNode.firstChild==a&&a.parentNode!=i;)a=a.parentNode;"BLOCKQUOTE"===a.tagName&&(e.formatter.toggle("blockquote",null,a),(n=B.createRng()).setStart(o,0),n.setEnd(o,0),M.setRng(n))}})}function y(){function e(){_._refreshContentEditable(),o("StyleWithCSS",!1),o("enableInlineTableEditing",!1),R.object_resizing||o("enableObjectResizing",!1)}R.readonly||(_.onBeforeExecCommand.add(e),_.onMouseDown.add(e))}function b(){function n(){I(B.select("a"),function(e){var t=e.parentNode,n=B.getRoot();if(t.lastChild===e){for(;t&&!B.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}B.add(t,"br",{"data-mce-bogus":1})}})}_.onExecCommand.add(function(e,t){"CreateLink"===t&&n(e)}),_.onSetContent.add(M.onSetContent.add(n))}function C(){R.forced_root_block&&_.onInit.add(function(){o("DefaultParagraphSeparator",R.forced_root_block)})}function x(){function e(e,t){e&&t.initial||_.execCommand("mceRepaint")}_.onUndo.add(e),_.onRedo.add(e),_.onSetContent.add(e)}function S(){_.onKeyDown.add(function(e,t){var n;l(t)||t.keyCode!=T||(n=e.getDoc().selection.createRange())&&n.item&&(t.preventDefault(),e.undoManager.beforeChange(),B.remove(n.item(0)),e.undoManager.add())})}function E(){var n;10<=e()&&(n="",I("p div h1 h2 h3 h4 h5 h6".split(" "),function(e,t){n+=(0<t?",":"")+e+":empty"}),_.contentStyles.push(n+"{padding-right: 1px !important}"))}function k(){function i(e){var t,n;t=e.screenX-f,n=e.screenY-p,y=t*u[2]+m,b=n*u[3]+h,y=y<5?5:y,b=b<5?5:b,(N.modifierPressed(e)||"IMG"==l.nodeName&&u[2]*u[3]!=0)&&(y=Math.round(b/g),b=Math.round(y*g)),B.setStyles(d,{width:y,height:b}),u[2]<0&&d.clientWidth<=y&&B.setStyle(d,"left",s+(m-y)),u[3]<0&&d.clientHeight<=b&&B.setStyle(d,"top",c+(h-b))}function a(){function e(e,t){t&&(l.style[e]||!_.schema.isValid(l.nodeName.toLowerCase(),e)?B.setStyle(l,e,t):B.setAttrib(l,e,t))}e("width",y),e("height",b),B.unbind(x,"mousemove",i),B.unbind(x,"mouseup",a),C!=x&&(B.unbind(C,"mousemove",i),B.unbind(C,"mouseup",a)),B.remove(d),t(l)}function t(e){var t,o,r;n(),t=B.getPos(e),s=t.x,c=t.y,o=e.offsetWidth,r=e.offsetHeight,l!=e&&(l=e,y=b=0),I(v,function(t,e){var n;(n=B.get("mceResizeHandle"+e))?B.show(n):(n=B.add(x.documentElement,"div",{id:"mceResizeHandle"+e,"class":"mceResizeHandle",style:"cursor:"+e+"-resize; margin:0; padding:0"}),B.bind(n,"mousedown",function(e){e.preventDefault(),a(),f=e.screenX,p=e.screenY,m=l.clientWidth,h=l.clientHeight,g=h/m,u=t,d=l.cloneNode(!0),B.addClass(d,"mceClonedResizable"),B.setStyles(d,{left:s,top:c,margin:0}),x.documentElement.appendChild(d),B.bind(x,"mousemove",i),B.bind(x,"mouseup",a),C!=x&&(B.bind(C,"mousemove",i),B.bind(C,"mouseup",a))})),B.setStyles(n,{left:o*t[0]+s-n.offsetWidth/2,top:r*t[1]+c-n.offsetHeight/2})}),tinymce.isOpera||"IMG"!=l.nodeName||l.setAttribute("data-mce-selected","1")}function n(){for(var e in l&&l.removeAttribute("data-mce-selected"),v)B.hide("mceResizeHandle"+e)}function e(){var e=B.getParent(M.getNode(),"table,img");I(B.select("img[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),e?t(e):n()}var s,c,l,d,u,f,p,m,h,g,v,y,b,C=document,x=_.getDoc();R.object_resizing&&!1!==R.webkit_fake_resize&&(o("enableObjectResizing",!1),v={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},_.contentStyles.push(".mceResizeHandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}.mceResizeHandle:hover {background: #000}img[data-mce-selected] {outline: 1px solid black}img.mceClonedResizable, table.mceClonedResizable {position: absolute;outline: 1px dashed black;opacity: .5;z-index: 10000}"),_.onNodeChange.add(e),B.bind(x,"selectionchange",e),_.serializer.addAttributeFilter("data-mce-selected",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}))}function w(){e()<9&&(L.addNodeFilter("noscript",function(e){for(var t,n,o=e.length;o--;)(n=(t=e[o]).firstChild)&&t.attr("data-mce-innertext",n.value)}),D.addNodeFilter("noscript",function(e){for(var t,n,o,r=e.length;r--;)t=e[r],(n=e[r].firstChild)?n.value=tinymce.html.Entities.decode(n.value):(o=t.attributes.map["data-mce-innertext"])&&(t.attr("data-mce-innertext",null),(n=new tinymce.html.Node("#text",3)).value=o,n.raw=!0,t.append(n))}))}var N=tinymce.VK,T=N.BACKSPACE,A=N.DELETE,B=_.dom,M=_.selection,R=_.settings,L=_.parser,D=_.serializer,I=tinymce.each;p(),v(),n(),tinymce.isWebKit&&(g(),t(),i(),c(),C(),tinymce.isIDevice?u():(k(),r())),tinymce.isIE&&(a(),f(),m(),h(),S(),E(),w()),tinymce.isGecko&&(a(),s(),d(),y(),b(),x()),tinymce.isOpera&&k()},function(i){function o(e){var t;return(t=document.createElement("div")).innerHTML=e,t.textContent||t.innerText||e}function a(e,t){var n,o,r,i={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)o=String.fromCharCode(parseInt(e[n],t)),c[o]||(r="&"+e[n+1]+";",i[o]=r,i[r]=o);return i}}var s,c,r,l=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,t=/[<>&\"\']/g,n=/&(#x|#)?([\w]+);/g,u={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};c={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},r={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},s=a("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),i.html=i.html||{},i.html.Entities={encodeRaw:function(e,t){return e.replace(t?l:d,function(e){return c[e]||e})},encodeAllRaw:function(e){return(""+e).replace(t,function(e){return c[e]||e})},encodeNumeric:function(e,t){return e.replace(t?l:d,function(e){return 1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":c[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||s,e.replace(t?l:d,function(e){return c[e]||n[e]||e})},getEncodeFunc:function(e,n){function t(e,t){return e.replace(t?l:d,function(e){return c[e]||n[e]||"&#"+e.charCodeAt(0)+";"||e})}function o(e,t){return r.encodeNamed(e,t,n)}var r=i.html.Entities;return n=a(n)||s,(e=i.makeMap(e.replace(/\+/g,","))).named&&e.numeric?t:e.named?n?o:r.encodeNamed:e.numeric?r.encodeNumeric:r.encodeRaw},decode:function(e){return e.replace(n,function(e,t,n){return t?65535<(n=parseInt(n,2===t.length?16:10))?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):u[n]||String.fromCharCode(n):r[e]||s[e]||o(e)})}}}(tinymce),tinymce.html.Styles=function(m,s){function h(e,t,n,o){function r(e){return 1<(e=parseInt(e).toString(16)).length?e:"0"+e}return"#"+r(t)+r(n)+r(o)}var c,e,t,g=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,v=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,y=/\s*([^:]+):\s*([^;]+);?/g,b=/\s+$/,C={};for(m=m||{},t="\\\" \\' \\; \\: ; : \ufeff".split(" "),e=0;e<t.length;e++)C[t[e]]="\ufeff"+e,C["\ufeff"+e]=t[e];return{toHex:function(e){return e.replace(g,h)},parse:function(e){function t(e,t){var n,o,r,i;(n=u[e+"-top"+t])&&n==(o=u[e+"-right"+t])&&o==(r=u[e+"-bottom"+t])&&r==(i=u[e+"-left"+t])&&(u[e+t]=i,delete u[e+"-top"+t],delete u[e+"-right"+t],delete u[e+"-bottom"+t],delete u[e+"-left"+t])}function r(e){var t,n=u[e];if(n&&!(n.indexOf(" ")<0)){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return u[e]=n[0],!0}}function n(e,t,n,o){r(t)&&r(n)&&r(o)&&(u[e]=u[t]+" "+u[n]+" "+u[o],delete u[t],delete u[n],delete u[o])}function o(e){return d=!0,C[e]}function a(e,t){return d&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return C[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function i(e,t,n,o,r,i){return(r=r||i)?"'"+(r=a(r)).replace(/\'/g,"\\'")+"'":(t=a(t||n||o),f&&(t=f.call(p,t,"style")),"url('"+t.replace(/\'/g,"\\'")+"')")}var s,c,l,d,u={},f=m.url_converter,p=m.url_converter_scope||this;if(e){for(e=e.replace(/\\[\"\';:\uFEFF]/g,o).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,o)});s=y.exec(e);)c=s[1].replace(b,"").toLowerCase(),l=s[2].replace(b,""),c&&0<l.length&&("font-weight"===c&&"700"===l?l="bold":"color"!==c&&"background-color"!==c||(l=l.toLowerCase()),l=(l=l.replace(g,h)).replace(v,i),u[c]=d?a(l,!0):l),y.lastIndex=s.index+s[0].length;t("border",""),t("border","-width"),t("border","-color"),t("border","-style"),t("padding",""),t("margin",""),n("border","border-width","border-style","border-color"),"medium none"===u.border&&delete u.border}return u},serialize:function(i,e){function t(e){var t,n,o,r;if(t=s.styles[e])for(n=0,o=t.length;n<o;n++)e=t[n],(r=i[e])!==c&&0<r.length&&(a+=(0<a.length?" ":"")+e+": "+r+";")}var n,o,a="";if(e&&s&&s.styles)t("*"),t(e);else for(n in i)(o=i[n])!==c&&0<o.length&&(a+=(0<a.length?" ":"")+n+": "+o+";");return a}}},function(w){function N(e,t){return e.split(t||",")}function t(t,e){function n(e){return e.replace(/[A-Z]+/g,function(e){return n(t[e])})}var o,r={};for(o in t)t.hasOwnProperty(o)&&(t[o]=n(t[o]));return n(e).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(e,t,n,o){n=N(n,"|"),r[t]={attributes:T(n),attributesOrder:n,children:T(o,"|",{"#comment":{}})}}),r}function y(){var e=C.html5;return e||(e=C.html5=t({A:"id|accesskey|class|dir|draggable|item|hidden|itemprop|role|spellcheck|style|subject|title|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"#|a|abbr|area|audio|b|bdo|br|button|canvas|cite|code|command|datalist|del|dfn|em|embed|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|meta|meter|noscript|object|output|progress|q|ruby|samp|script|select|small|span|strong|sub|sup|svg|textarea|time|var|video|wbr",C:"#|a|abbr|area|address|article|aside|audio|b|bdo|blockquote|br|button|canvas|cite|code|command|datalist|del|details|dfn|dialog|div|dl|em|embed|fieldset|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|menu|meta|meter|nav|noscript|ol|object|output|p|pre|progress|q|ruby|samp|script|section|select|small|span|strong|style|sub|sup|svg|table|textarea|time|ul|var|video"},"html[A|manifest][body|head]head[A][base|command|link|meta|noscript|script|style|title]title[A][#]base[A|href|target][]link[A|href|rel|media|type|sizes][]meta[A|http-equiv|name|content|charset][]style[A|type|media|scoped][#]script[A|charset|type|src|defer|async][#]noscript[A][C]body[A][C]section[A][C]nav[A][C]article[A][C]aside[A][C]h1[A][B]h2[A][B]h3[A][B]h4[A][B]h5[A][B]h6[A][B]hgroup[A][h1|h2|h3|h4|h5|h6]header[A][C]footer[A][C]address[A][C]p[A][B]br[A][]pre[A][B]dialog[A][dd|dt]blockquote[A|cite][C]ol[A|start|reversed][li]ul[A][li]li[A|value][C]dl[A][dd|dt]dt[A][B]dd[A][C]a[A|href|target|ping|rel|media|type][B]em[A][B]strong[A][B]small[A][B]cite[A][B]q[A|cite][B]dfn[A][B]abbr[A][B]code[A][B]var[A][B]samp[A][B]kbd[A][B]sub[A][B]sup[A][B]i[A][B]b[A][B]mark[A][B]progress[A|value|max][B]meter[A|value|min|max|low|high|optimum][B]time[A|datetime][B]ruby[A][B|rt|rp]rt[A][B]rp[A][B]bdo[A][B]span[A][B]ins[A|cite|datetime][B]del[A|cite|datetime][B]figure[A][C|legend|figcaption]figcaption[A][C]img[A|alt|src|height|width|usemap|ismap][]iframe[A|name|src|height|width|sandbox|seamless][]embed[A|src|height|width|type][]object[A|data|type|height|width|usemap|name|form|classid][param]param[A|name|value][]details[A|open][C|legend]command[A|type|label|icon|disabled|checked|radiogroup][]menu[A|type|label][C|li]legend[A][C|B]div[A][C]source[A|src|type|media][]audio[A|src|autobuffer|autoplay|loop|controls][source]video[A|src|autobuffer|autoplay|loop|controls|width|height|poster][source]hr[A][]form[A|accept-charset|action|autocomplete|enctype|method|name|novalidate|target][C]fieldset[A|disabled|form|name][C|legend]label[A|form|for][B]input[A|type|accept|alt|autocomplete|autofocus|checked|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|height|list|max|maxlength|min|multiple|pattern|placeholder|readonly|required|size|src|step|width|files|value|name][]button[A|autofocus|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|name|value|type][B]select[A|autofocus|disabled|form|multiple|name|size][option|optgroup]datalist[A][B|option]optgroup[A|disabled|label][option]option[A|disabled|selected|label|value][]textarea[A|autofocus|disabled|form|maxlength|name|placeholder|readonly|required|rows|cols|wrap][]keygen[A|autofocus|challenge|disabled|form|keytype|name][]output[A|for|form|name][B]canvas[A|width|height][]map[A|name][B|C]area[A|shape|coords|href|alt|target|media|rel|ping|type][]mathml[A][]svg[A][]table[A|border][caption|colgroup|thead|tfoot|tbody|tr]caption[A][C]colgroup[A|span][col]col[A|span][]thead[A][tr]tfoot[A][tr]tbody[A][tr]tr[A][th|td]th[A|headers|rowspan|colspan|scope][B]td[A|headers|rowspan|colspan][C]wbr[A][]")),e}function b(){var e=C.html4;return e||(e=C.html4=t({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",
U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]")),e}var C={},T=w.makeMap,x=w.each;w.html.Schema=function(r){function e(e,t,n){var o=r[e];return o?o=T(o,",",T(o.toUpperCase()," ")):(o=C[e])||(o=T(t," ",T(t.toUpperCase()," ")),o=w.extend(o,n),C[e]=o),o}function S(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function t(e){var t,n,o,r,i,a,s,c,l,d,u,f,p,m,h,g,v,y,b,C=/^([#+\-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,x=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,_=/[*?+]/;if(e)for(e=N(e),E["@"]&&(g=E["@"].attributes,v=E["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(i=C.exec(e[t])){if(m=i[1],l=i[2],h=i[3],c=i[4],a={attributes:f={},attributesOrder:p=[]},"#"===m&&(a.paddEmpty=!0),"-"===m&&(a.removeEmpty=!0),g){for(y in g)f[y]=g[y];p.push.apply(p,v)}if(c)for(o=0,r=(c=N(c,"|")).length;o<r;o++)if(i=x.exec(c[o])){if(s={},u=i[1],d=i[2].replace(/::/g,":"),m=i[3],b=i[4],"!"===u&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(d),s.required=!0),"-"===u){delete f[d],p.splice(w.inArray(p,d),1);continue}m&&("="===m&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:d,value:b}),s.defaultValue=b),":"===m&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:d,value:b}),s.forcedValue=b),"<"===m&&(s.validValues=T(b,"?"))),_.test(d)?(a.attributePatterns=a.attributePatterns||[],s.pattern=S(d),a.attributePatterns.push(s)):(f[d]||p.push(d),f[d]=s)}g||"@"!=l||(g=f,v=p),h&&(a.outputName=l,E[h]=a),_.test(l)?(a.pattern=S(l),k.push(a)):E[l]=a}}function n(e){E={},k=[],t(e),x(c,function(e,t){g[t]=e.children})}function o(e){var i=/^(~)?(.+)$/;e&&x(N(e),function(e){var t=i.exec(e),n="~"===t[1],o=n?"span":"div",r=t[2];g[r]=g[o],v[r]=o,n||(p[r.toUpperCase()]={},p[r]={}),E[r]||(E[r]=E[o]),x(g,function(e){e[o]&&(e[r]=e[o])})})}function i(e){var r=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&x(N(e),function(e){var t,n,o=r.exec(e);o&&(n=o[1],t=n?g[o[2]]:g[o[2]]={"#comment":{}},t=g[o[2]],x(N(o[3],"|"),function(e){"-"===n?delete t[e]:t[e]={}}))})}function a(e){var t,n=E[e];if(n)return n;for(t=k.length;t--;)if((n=k[t]).pattern.test(e))return n}var s,c,l,d,u,f,p,m,h=this,E={},g={},k=[],v={};c="html5"==(r=r||{}).schema?y():b(),!1===r.verify_html&&(r.valid_elements="*[*]"),r.valid_styles&&(s={},x(r.valid_styles,function(e,t){s[t]=w.explode(e)})),l=e("whitespace_elements","pre script noscript style textarea"),d=e("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),u=e("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr"),f=e("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),m=e("non_empty_elements","td th iframe video audio object",u),textBlockElementsMap=e("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),p=e("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex samp option datalist select optgroup",textBlockElementsMap),r.valid_elements?n(r.valid_elements):(x(c,function(e,t){E[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},g[t]=e.children}),"html5"!=r.schema&&x(N("strong/b,em/i"),function(e){e=N(e,"/"),E[e[1]].outputName=e[0]}),E.img.attributesDefault=[{name:"alt",value:""}],x(N("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr,strong,em,b,i"),function(e){E[e]&&(E[e].removeEmpty=!0)}),x(N("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(e){E[e].paddEmpty=!0})),o(r.custom_elements),i(r.valid_children),t(r.extended_valid_elements),i("+ol[ul|ol],+ul[ul|ol]"),r.invalid_elements&&w.each(w.explode(r.invalid_elements),function(e){E[e]&&delete E[e]}),a("span")||t("span[!data-mce-type|*]"),h.children=g,h.styles=s,h.getBoolAttrs=function(){return f},h.getBlockElements=function(){return p},h.getTextBlockElements=function(){return textBlockElementsMap},h.getShortEndedElements=function(){return u},h.getSelfClosingElements=function(){return d},h.getNonEmptyElements=function(){return m},h.getWhiteSpaceElements=function(){return l},h.isValidChild=function(e,t){var n=g[e];return!(!n||!n[t])},h.isValid=function(e,t){var n,o,r=a(e);if(r){if(!t)return!0;if(r.attributes[t])return!0;if(n=r.attributePatterns)for(o=n.length;o--;)if(n[o].pattern.test(e))return!0}return!1},h.getElementRule=a,h.getCustomElements=function(){return v},h.addValidElements=t,h.setValidElements=n,h.addCustomElements=o,h.addValidChildren=i,h.elements=E}}(tinymce),function(U){U.html.SaxParser=function(H,F){var t=this,n=function(){};H=H||{},t.schema=F=F||new U.html.Schema,!1!==H.fix_self_closing&&(H.fix_self_closing=!0),U.each("comment cdata text start end pi doctype".split(" "),function(e){e&&(t[e]=H[e]||n)}),t.parse=function(e){function t(e){var t,n;for(t=I.length;t--&&I[t].name!==e;);if(0<=t){for(n=I.length-1;t<=n;n--)(e=I[n]).valid&&L.end(e.name);I.length=t}}function n(e,t,n,o,r){var i,a;if(n=(t=t.toLowerCase())in p?t:O(n||o||r||""),h&&!d&&0!==t.indexOf("data-")){if(!(i=x[t])&&_){for(a=_.length;a--&&!(i=_[a]).pattern.test(t););-1===a&&(i=null)}if(!i)return;if(i.validValues&&!(n in i.validValues))return}s.map[t]=n,s.push({name:t,value:n})}var o,r,i,s,a,c,l,d,u,f,p,m,h,g,v,y,b,C,x,_,S,E,k,w,N,T,A,B,M,R,L=this,D=0,I=[],P=0,O=U.html.Entities.decode;for(N=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),T=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,A={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},f=F.getShortEndedElements(),w=H.self_closing_elements||F.getSelfClosingElements(),p=F.getBoolAttrs(),h=H.validate,u=H.remove_internals,M=H.fix_self_closing,R=U.isIE,C=/^:/;o=N.exec(e);){if(D<o.index&&L.text(O(e.substr(D,o.index-D))),r=o[6])r=r.toLowerCase(),R&&C.test(r)&&(r=r.substr(1)),t(r);else if(r=o[7]){if(r=r.toLowerCase(),R&&C.test(r)&&(r=r.substr(1)),m=r in f,M&&w[r]&&0<I.length&&I[I.length-1].name===r&&t(r),!h||(g=F.getElementRule(r))){if(v=!0,h&&(x=g.attributes,_=g.attributePatterns),(b=o[8])?((d=-1!==b.indexOf("data-mce-type"))&&u&&(v=!1),(s=[]).map={},b.replace(T,n)):(s=[]).map={},h&&!d){if(S=g.attributesRequired,E=g.attributesDefault,k=g.attributesForced)for(a=k.length;a--;)l=(y=k[a]).name,"{$uid}"===(B=y.value)&&(B="mce_"+P++),s.map[l]=B,s.push({name:l,value:B});if(E)for(a=E.length;a--;)(l=(y=E[a]).name)in s.map||("{$uid}"===(B=y.value)&&(B="mce_"+P++),s.map[l]=B,s.push({name:l,value:B}));if(S){for(a=S.length;a--&&!(S[a]in s.map););-1===a&&(v=!1)}s.map["data-mce-bogus"]&&(v=!1)}v&&L.start(r,s,m)}else v=!1;if(i=A[r]){i.lastIndex=D=o.index+o[0].length,(o=i.exec(e))?(v&&(c=e.substr(D,o.index-D)),D=o.index+o[0].length):(c=e.substr(D),D=e.length),v&&0<c.length&&L.text(c,!0),v&&L.end(r),N.lastIndex=D;continue}m||(b&&b.indexOf("/")==b.length-1?v&&L.end(r):I.push({name:r,valid:v}))}else(r=o[1])?L.comment(r):(r=o[2])?L.cdata(r):(r=o[3])?L.doctype(r):(r=o[4])&&L.pi(r,o[5]);D=o.index+o[0].length}for(D<e.length&&L.text(O(e.substr(D))),a=I.length-1;0<=a;a--)(r=I[a]).valid&&L.end(r.name)}}}(tinymce),function(e){function i(e,t,n){var o,r,i=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[i])return e[i];if(e!==t){if(o=e[a])return o;for(r=e.parent;r&&r!==t;r=r.parent)if(o=r[a])return o}}function s(e,t){this.name=e,1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}var a=/^[ \t\r\n]*$/,r={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};e.extend(s.prototype,{replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n,o,r,i=this;if("string"!=typeof e){for(o in e)i.attr(o,e[o]);return i}if(n=i.attributes){if(t===r)return n.map[e];if(null===t){if(e in n.map)for(delete n.map[e],o=n.length;o--;)if(n[o].name===e)return n=n.splice(o,1),i;return i}if(e in n.map){for(o=n.length;o--;)if(n[o].name===e){n[o].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,i}},clone:function(){var e,t,n,o,r,i=this,a=new s(i.name,i.type);if(n=i.attributes){for((r=[]).map={},e=0,t=n.length;e<t;e++)"id"!==(o=n[e]).name&&(r[r.length]={name:o.name,value:o.value},r.map[o.name]=o.value);a.attributes=r}return a.value=i.value,a.shortEnded=i.shortEnded,a},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},remove:function(){var e=this,t=e.parent,n=e.next,o=e.prev;return t&&(t.firstChild===e?(t.firstChild=n)&&(n.prev=null):o.next=n,t.lastChild===e?(t.lastChild=o)&&(o.next=null):n.prev=o,e.parent=e.next=e.prev=null),e},append:function(e){var t,n=this;return e.parent&&e.remove(),(t=n.lastChild)?((t.next=e).prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},insert:function(e,t,n){var o;return e.parent&&e.remove(),o=t.parent||this,n?(t===o.firstChild?o.firstChild=e:t.prev.next=e,e.prev=t.prev,(e.next=t).prev=e):(t===o.lastChild?o.lastChild=e:t.next.prev=e,e.next=t.next,(e.prev=t).next=e),e.parent=o,e},getAll:function(e){var t,n=this,o=[];for(t=n.firstChild;t;t=i(t,n))t.name===e&&o.push(t);return o},empty:function(){var e,t,n,o=this;if(o.firstChild){for(e=[],n=o.firstChild;n;n=i(n,o))e.push(n);for(t=e.length;t--;)(n=e[t]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return o.firstChild=o.lastChild=null,o},isEmpty:function(e){var t,n,o=this,r=o.firstChild;if(r)do{if(1===r.type){if(r.attributes.map["data-mce-bogus"])continue;if(e[r.name])return!1;for(t=r.attributes.length;t--;)if("name"===(n=r.attributes[t].name)||0===n.indexOf("data-mce-"))return!1}if(8===r.type)return!1;if(3===r.type&&!a.test(r.value))return!1}while(r=i(r,o));return!0},walk:function(e){return i(this,null,e)}}),e.extend(s,{create:function(e,t){var n,o;if(n=new s(e,r[e]||1),t)for(o in t)n.attr(o,t[o]);return n}}),e.html.Node=s}(tinymce),function(I){var P=I.html.Node;I.html.DomParser=function(T,A){function B(e){var t,n,o,r,i,a,s,c,l,d,u,f,p,m;for(u=I.makeMap("tr,td,th,tbody,thead,tfoot,table"),d=A.getNonEmptyElements(),f=A.getTextBlockElements(),t=0;t<e.length;t++)if((n=e[t]).parent&&!n.fixed)if(f[n.name]&&"li"==n.parent.name){for(p=n.next;p&&f[p.name];)p.name="li",p.fixed=!0,n.parent.insert(p,n.parent),p=p.next;n.unwrap(n)}else{for(r=[n],o=n.parent;o&&!A.isValidChild(o.name,n.name)&&!u[o.name];o=o.parent)r.push(o);if(o&&1<r.length){for(r.reverse(),i=a=h.filterNode(r[0].clone()),l=0;l<r.length-1;l++){for(A.isValidChild(a.name,r[l].name)?(s=h.filterNode(r[l].clone()),a.append(s)):s=a,c=r[l].firstChild;c&&c!=r[l+1];)m=c.next,s.append(c),c=m;a=s}i.isEmpty(d)?o.insert(n,r[0],!0):(o.insert(i,r[0],!0),o.insert(n,i)),((o=r[0]).isEmpty(d)||o.firstChild===o.lastChild&&"br"===o.firstChild.name)&&o.empty().remove()}else if(n.parent){if("li"===n.name){if((p=n.prev)&&("ul"===p.name||"ul"===p.name)){p.append(n);continue}if((p=n.next)&&("ul"===p.name||"ul"===p.name)){p.insert(n,p.firstChild,!0);continue}n.wrap(h.filterNode(new P("ul",1)));continue}A.isValidChild(n.parent.name,"div")&&A.isValidChild("div",n.name)?n.wrap(h.filterNode(new P("div",1))):"style"===n.name||"script"===n.name?n.empty().remove():n.unwrap()}}}var h=this,M={},R=[],L={},D={};(T=T||{}).validate=!("validate"in T)||T.validate,T.root_name=T.root_name||"body",h.schema=A=A||new I.html.Schema,h.filterNode=function(e){var t,n,o;n in M&&((o=L[n])?o.push(e):L[n]=[e]),t=R.length;for(;t--;)(n=R[t].name)in e.attributes.map&&((o=D[n])?o.push(e):D[n]=[e]);return e},h.addNodeFilter=function(e,n){I.each(I.explode(e),function(e){var t=M[e];t||(M[e]=t=[]),t.push(n)})},h.addAttributeFilter=function(e,n){I.each(I.explode(e),function(e){var t;for(t=0;t<R.length;t++)if(R[t].name===e)return void R[t].callbacks.push(n);R.push({name:e,callbacks:[n]})})},h.parse=function(e,t){function n(){for(var e,t,n=i.firstChild;n;)e=n.next,3==n.type||1==n.type&&"p"!==n.name&&!v[n.name]&&!n.attr("data-mce-type")?(t||(t=c(w,1),i.insert(t,n)),t.append(n)):t=null,n=e}function c(e,t){var n,o=new P(e,t);return e in M&&((n=L[e])?n.push(o):L[e]=[o]),o}function l(e){var t,n,o;for(t=e.prev;t&&3===t.type;)0<(n=t.value.replace(C,"")).length?(t.value=n,t=t.prev):(o=t.prev,t.remove(),t=o)}function o(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var r,i,d,a,s,u,f,p,m,h,g,v,y,b,C,x,_,S,E,k,w,N=[];if(t=t||{},L={},D={},v=I.extend(I.makeMap("script,style,head,html,body,title,meta,param"),A.getBlockElements()),k=A.getNonEmptyElements(),E=A.children,g=T.validate,w="forced_root_block"in t?t.forced_root_block:T.forced_root_block,S=A.getWhiteSpaceElements(),y=/^[ \t\r\n]+/,C=/[ \t\r\n]+$/,x=/[ \t\r\n]+/g,_=/^[ \t\r\n]+$/,r=new I.html.SaxParser({validate:g,self_closing_elements:o(A.getSelfClosingElements()),cdata:function(e){d.append(c("#cdata",4)).value=e},text:function(e,t){var n;b||(e=e.replace(x," "),d.lastChild&&v[d.lastChild.name]&&(e=e.replace(y,""))),0!==e.length&&((n=c("#text",3)).raw=!!t,d.append(n).value=e)},comment:function(e){d.append(c("#comment",8)).value=e},pi:function(e,t){d.append(c(e,7)).value=t,l(d)},doctype:function(e){d.append(c("#doctype",10)).value=e,l(d)},start:function(e,t,n){var o,r,i,a,s;if(i=g?A.getElementRule(e):{}){for((o=c(i.outputName||e,1)).attributes=t,o.shortEnded=n,d.append(o),(s=E[d.name])&&E[o.name]&&!s[o.name]&&N.push(o),r=R.length;r--;)(a=R[r].name)in t.map&&((m=D[a])?m.push(o):D[a]=[o]);v[e]&&l(o),n||(d=o),!b&&S[e]&&(b=!0)}},end:function(e){var t,n,o,r,i;if(n=g?A.getElementRule(e):{}){if(v[e]&&!b){if((t=d.firstChild)&&3===t.type)for(0<(o=t.value.replace(y,"")).length?(t.value=o,t=t.next):(r=t.next,t.remove(),t=r);t&&3===t.type;)o=t.value,r=t.next,(0===o.length||_.test(o))&&(t.remove(),t=r),t=r;if((t=d.lastChild)&&3===t.type)for(0<(o=t.value.replace(C,"")).length?(t.value=o,t=t.prev):(r=t.prev,t.remove(),t=r);t&&3===t.type;)o=t.value,r=t.prev,(0===o.length||_.test(o))&&(t.remove(),t=r),t=r}if(b&&S[e]&&(b=!1),(n.removeEmpty||n.paddEmpty)&&d.isEmpty(k))if(n.paddEmpty)d.empty().append(new P("#text","3")).value="\xa0";else if(!d.attributes.map.name&&!d.attributes.map.id)return i=d.parent,d.empty().remove(),void(d=i);d=d.parent}}},A),i=d=new P(t.context||T.root_name,11),r.parse(e),g&&N.length&&(t.context?t.invalid=!0:B(N)),w&&"body"==i.name&&n(),!t.invalid){for(h in L){for(m=M[h],f=(a=L[h]).length;f--;)a[f].parent||a.splice(f,1);for(s=0,u=m.length;s<u;s++)m[s](a,h,t)}for(s=0,u=R.length;s<u;s++)if((m=R[s]).name in D){for(f=(a=D[m.name]).length;f--;)a[f].parent||a.splice(f,1);for(f=0,p=m.callbacks.length;f<p;f++)m.callbacks[f](a,m.name,t)}}return i},T.remove_trailing_brs&&h.addNodeFilter("br",function(e){var t,n,o,r,i,a,s=e.length,c=I.extend({},A.getBlockElements()),l=A.getNonEmptyElements();for(c.body=1,t=0;t<s;t++)if(o=(n=e[t]).parent,c[n.parent.name]&&n===o.lastChild){for(i=n.prev;i;){if("span"!==(a=i.name)||"bookmark"!==i.attr("data-mce-type")){if("br"!==a)break;if("br"===a){n=null;break}}i=i.prev}n&&(n.remove(),o.isEmpty(l)&&(elementRule=A.getElementRule(o.name),elementRule&&(elementRule.removeEmpty?o.remove():elementRule.paddEmpty&&(o.empty().append(new I.html.Node("#text",3)).value="\xa0"))))}else{for(r=n;o.firstChild===r&&o.lastChild===r&&!c[(r=o).name];)o=o.parent;r===o&&(textNode=new I.html.Node("#text",3),textNode.value="\xa0",n.replace(textNode))}}),T.allow_html_in_named_anchor||h.addAttributeFilter("id,name",function(e){for(var t,n,o,r,i=e.length;i--;)if("a"===(r=e[i]).name&&r.firstChild&&!r.attr("href"))for(o=r.parent,t=r.lastChild;n=t.prev,o.insert(t,r),t=n;);})}}(tinymce),tinymce.html.Writer=function(e){var s,c,l,d,u,f=[];return s=(e=e||{}).indent,c=tinymce.makeMap(e.indent_before||""),l=tinymce.makeMap(e.indent_after||""),d=tinymce.html.Entities.getEncodeFunc(e.entity_encoding||"raw",e.entities),u="html"==e.element_format,{start:function(e,t,n){var o,r,i,a;if(s&&c[e]&&0<f.length&&0<(a=f[f.length-1]).length&&"\n"!==a&&f.push("\n"),f.push("<",e),t)for(o=0,r=t.length;o<r;o++)i=t[o],f.push(" ",i.name,'="',d(i.value,!0),'"');f[f.length]=!n||u?">":" />",n&&s&&l[e]&&0<f.length&&0<(a=f[f.length-1]).length&&"\n"!==a&&f.push("\n")},end:function(e){var t;f.push("</",e,">"),s&&l[e]&&0<f.length&&0<(t=f[f.length-1]).length&&"\n"!==t&&f.push("\n")},text:function(e,t){0<e.length&&(f[f.length]=t?e:d(e))},cdata:function(e){f.push("<![CDATA[",e,"]]>")},comment:function(e){f.push("<!--",e,"-->")},pi:function(e,t){t?f.push("<?",e," ",t,"?>"):f.push("<?",e,"?>"),s&&f.push("\n")},doctype:function(e){f.push("<!DOCTYPE",e,">",s?"\n":"")},reset:function(){f.length=0},getContent:function(){return f.join("").replace(/\n$/,"")}}},function(n){n.html.Serializer=function(t,m){var e=this,h=new n.html.Writer(t);(t=t||{}).validate=!("validate"in t)||t.validate,e.schema=m=m||new n.html.Schema,e.writer=h,e.serialize=function(e){function u(e){var t,n,o,r,i,a,s,c,l,d=f[e.type];if(d)d(e);else{if(t=e.name,n=e.shortEnded,o=e.attributes,p&&o&&1<o.length){for((a=[]).map={},s=0,c=(l=m.getElementRule(e.name)).attributesOrder.length;s<c;s++)(r=l.attributesOrder[s])in o.map&&(i=o.map[r],a.map[r]=i,a.push({name:r,value:i}));for(s=0,c=o.length;s<c;s++)(r=o[s].name)in a.map||(i=o.map[r],a.map[r]=i,a.push({name:r,value:i}));o=a}if(h.start(e.name,o,n),!n){if(e=e.firstChild)for(;u(e),e=e.next;);h.end(t)}}}var f,p;return p=t.validate,f={3:function(e){h.text(e.value,e.raw)},8:function(e){h.comment(e.value)},7:function(e){h.pi(e.name,e.value)},10:function(e){h.doctype(e.value)},4:function(e){h.cdata(e.value)},11:function(e){if(e=e.firstChild)for(;u(e),e=e.next;);}},h.reset(),1!=e.type||t.inner?f[11](e):u(e),h.getContent()}}}(tinymce),tinymce.dom={},function(e,x){function _(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function d(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function S(e,t){function n(){return!1}function o(){return!0}var r,i=t||{};for(r in e)"layerX"!==r&&"layerY"!==r&&(i[r]=e[r]);return i.target||(i.target=i.srcElement||document),i.preventDefault=function(){i.isDefaultPrevented=o,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},i.stopPropagation=function(){i.isPropagationStopped=o,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=o,i.stopPropagation()},i.isDefaultPrevented||(i.isDefaultPrevented=n,i.isPropagationStopped=n,i.isImmediatePropagationStopped=n),i}function E(e,t,n){function o(){n.domLoaded||(n.domLoaded=!0,t(i))}var r=e.document,i={type:"ready"};"complete"!=r.readyState?(k?_(e,"DOMContentLoaded",o):(_(r,"readystatechange",function(){"complete"===r.readyState&&(d(r,"readystatechange",arguments.callee),o())}),r.documentElement.doScroll&&e===e.top&&function(){try{r.documentElement.doScroll("left")}catch(e){return setTimeout(arguments.callee,0)}o()}()),_(e,"load",o)):o()}function t(p){function m(e,t){var n,o,r,i;if(n=C[t][e.type])for(o=0,r=n.length;o<r;o++)if((i=n[o])&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}var h,g,v,y,b=this,C={};v="onmouseenter"in document.documentElement,g="onfocusin"in document.documentElement,y={mouseenter:"mouseover",mouseleave:"mouseout"},h=1,b.domLoaded=!1,b.events=C,b.bind=function(e,t,n,o){function r(e){m(S(e||f.event),i)}var i,a,s,c,l,d,u,f=window;if(e&&3!==e.nodeType&&8!==e.nodeType){for(e[x]?(i=e[x],C[i]||(C[i]={})):(i=h++,e[x]=i,C[i]={}),o=o||e,s=(t=t.split(" ")).length;s--;)d=r,l=u=!1,"DOMContentLoaded"===(c=t[s])&&(c="ready"),!b.domLoaded&&"complete"!=e.readyState||"ready"!==c?(v||(l=y[c])&&(d=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=S(e||f.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,m(e,i))}),g||"focusin"!==c&&"focusout"!==c||(u=!0,l="focusin"===c?"focus":"blur",d=function(e){(e=S(e||f.event)).type="focus"===e.type?"focusin":"focusout",m(e,i)}),(a=C[i][c])?a.push({func:n,scope:o}):(C[i][c]=a=[{func:n,scope:o}],a.fakeName=l,a.capture=u,a.nativeHandler=d,k||(a.proxyHandler=p(i)),"ready"===c?E(e,d,b):_(e,l||c,k?d:a.proxyHandler,u))):(b.domLoaded=!0,n.call(o,S({type:c})));return e=a=0,n}},b.unbind=function(e,t,n){var o,r,i,a,s,c;if(!e||3===e.nodeType||8===e.nodeType)return b;if(o=e[x]){if(c=C[o],t){for(i=(t=t.split(" ")).length;i--;)if(r=c[s=t[i]]){if(n)for(a=r.length;a--;)r[a].func===n&&r.splice(a,1);n&&0!==r.length||(delete c[s],d(e,r.fakeName||s,k?r.nativeHandler:r.proxyHandler,r.capture))}}else{for(s in c)d(e,(r=c[s]).fakeName||s,k?r.nativeHandler:r.proxyHandler,r.capture);c={}}for(s in c)return b;delete C[o];try{delete e[x]}catch(l){e[x]=null}}return b},b.fire=function(e,t,n){var o,r;if(!e||3===e.nodeType||8===e.nodeType)return b;for((r=S(null,n)).type=t;(o=e[x])&&m(r,o),(e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow)&&!r.isPropagationStopped(););return b},b.clean=function(e){var t,n,o=b.unbind;if(!e||3===e.nodeType||8===e.nodeType)return b;if(e[x]&&o(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(o(e),t=(n=e.getElementsByTagName("*")).length;t--;)(e=n[t])[x]&&o(e);return b},b.callNativeHandler=function(e,t){C&&C[e][t.type].nativeHandler(t)},b.destory=function(){C={}},b.add=function(e,t,n,o){if("string"==typeof e&&(e=document.getElementById(e)),!(e&&e instanceof Array))return"init"===t&&(t="ready"),b.bind(e,t instanceof Array?t.join(" "):t,n,o);for(var r=e.length;r--;)b.add(e[r],t,n,o)},b.remove=function(e,t,n,o){if(!e)return b;if("string"==typeof e&&(e=document.getElementById(e)),e instanceof Array){for(var r=e.length;r--;)b.remove(e[r],t,n,o);return b}return b.unbind(e,t instanceof Array?t.join(" "):t,n)},b.clear=function(e){return"string"==typeof e&&(e=document.getElementById(e)),b.clean(e)},b.cancel=function(e){return e&&(b.prevent(e),b.stop(e)),!1},b.prevent=function(e){return e.preventDefault||(e=S(e)),e.preventDefault(),!1},b.stop=function(e){return e.stopPropagation||(e=S(e)),e.stopPropagation(),!1}}var k=!!document.addEventListener;e.EventUtils=t,e.Event=new t(function(t){return function(e){tinymce.dom.Event.callNativeHandler(t,e)}}),e.Event.bind(window,"ready",function(){}),e=0}(tinymce.dom,"data-mce-expando"),tinymce.dom.TreeWalker=function(e,a){function t(e,t,n,o){var r,i;if(e){if(!o&&e[t])return e[t];if(e!=a){if(r=e[n])return r;for(i=e.parentNode;i&&i!=a;i=i.parentNode)if(r=i[n])return r}}}var n=e;this.current=function(){return n},this.next=function(e){return n=t(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=t(n,"lastChild","previousSibling",e)}},function(l){var s=l.each,c=l.is,a=l.isWebKit,d=l.isIE,e=l.html.Entities,o=/^([a-z0-9],?)+$/i,u=/^[ \t\r\n]*$/;l.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(e,t){var n,o=this;if(o.doc=e,o.win=window,o.files={},o.cssFlicker=!1,o.counter=0,o.stdMode=!l.isIE||8<=e.documentMode,o.boxModel=!l.isIE||"CSS1Compat"==e.compatMode||o.stdMode,o.hasOuterHTML="outerHTML"in e.createElement("a"),o.settings=t=l.extend({keep_values:!1,hex_colors:1},t),o.schema=t.schema,o.styles=new l.html.Styles({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),l.isIE6)try{e.execCommand("BackgroundImageCache",!1,!0)}catch(r){o.cssFlicker=!0}o.fixDoc(e),o.events=t.ownEvents?new l.dom.EventUtils(t.proxy):l.dom.Event,l.addUnload(o.destroy,o),n=t.schema?t.schema.getBlockElements():{},o.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!n[e.nodeName]):!!n[e]}},fixDoc:function(t){var e,n=this.settings;if(d&&n.schema)for(e in"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(e){t.createElement(e)}),n.schema.getCustomElements())t.createElement(e)},clone:function(t,e){var n,o,r=this;return!d||1!==t.nodeType||e?t.cloneNode(e):(o=r.doc,e?n.firstChild:(n=o.createElement(t.nodeName),s(r.getAttribs(t),function(e){r.setAttrib(n,e.nodeName,r.getAttrib(t,e.nodeName))}),n))},getRoot:function(){var e=this,t=e.settings;return t&&e.get(t.root_element)||e.doc.body},getViewPort:function(e){var t,n;return t=(e=e||this.win).document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,o=this;return e=o.get(e),t=o.getPos(e),n=o.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,o=this;return e=o.get(e),t=o.getStyle(e,"width"),n=o.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,t,n,o){var r,i=this,a=i.settings,s=[];for(e=i.get(e),o=o===undefined,a.strict_root&&(n=n||i.getRoot()),c(t,"string")&&(t="*"===(r=t)?function(e){return 1==e.nodeType}:function(e){return i.is(e,r)});e&&e!=n&&e.nodeType&&9!==e.nodeType;){if(!t||t(e)){if(!o)return e;s.push(e)}e=e.parentNode}return o?s:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,(e=this.doc.getElementById(e))&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(e,t){var n=this;return l.dom.Sizzle(e,n.get(t)||n.get(n.settings.root_element)||n.doc,[])},is:function(e,t){var n;if(e.length===undefined){if("*"===t)return 1==e.nodeType;if(o.test(t)){for(t=t.toLowerCase().split(/,/),e=e.nodeName.toLowerCase(),n=t.length-1;0<=n;n--)if(t[n]==e)return!0;return!1}}return 0<l.dom.Sizzle.matches(t,e.nodeType?[e]:e).length},add:function(e,n,o,r,i){var a=this;return this.run(e,function(e){var t;return t=c(n,"string")?a.doc.createElement(n):n,a.setAttribs(t,o),r&&(r.nodeType?t.appendChild(r):a.setHTML(t,r)),i?t:e.appendChild(t)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var o,r="",i=this;for(o in r+="<"+e,t)t.hasOwnProperty(o)&&(r+=" "+o+'="'+i.encode(t[o])+'"');return void 0!==n?r+">"+n+"</"+e+">":r+" />"},remove:function(e,o){return this.run(e,function(e){var t,n=e.parentNode;if(!n)return null;if(o)for(;t=e.firstChild;)!l.isIE||3!==t.nodeType||t.nodeValue?n.insertBefore(t,e):e.removeChild(t);return n.removeChild(e)})},setStyle:function(n,o,r){var i=this;return i.run(n,function(e){var t;switch(t=e.style,o=o.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),i.pixelStyles.test(o)&&(l.is(r,"number")||/^[\-0-9\.]+$/.test(r))&&(r+="px"),o){case"opacity":d&&(t.filter=""===r?"":"alpha(opacity="+100*r+")",n.currentStyle&&n.currentStyle.hasLayout||(t.display="inline-block")),t[o]=t["-moz-opacity"]=t["-khtml-opacity"]=r||"";break;case"float":d?t.styleFloat=r:t.cssFloat=r;break;default:t[o]=r||""}i.settings.update_styles&&i.setAttrib(e,"data-mce-style")})},getStyle:function(e,t,n){if(e=this.get(e)){if(this.doc.defaultView&&n){t=t.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(t)}catch(o){return null}}return"float"==(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}))&&(t=d?"styleFloat":"cssFloat"),e.currentStyle&&n?e.currentStyle[t]:e.style?e.style[t]:undefined}},setStyles:function(n,e){var t,o=this,r=o.settings;t=r.update_styles,r.update_styles=0,s(e,function(e,t){o.setStyle(n,t,e)}),r.update_styles=t,r.update_styles&&o.setAttrib(n,r.cssText)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;0<=t;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,r,i){var a=this;if(e&&r)return a.settings.strict&&(r=r.toLowerCase()),this.run(e,function(n){var e=a.settings,t=n.getAttribute(r);if(null!==i)switch(r){case"style":if(!c(i,"string"))return void s(i,function(e,t){a.setStyle(n,t,e)});e.keep_values&&(i&&!a._isRes(i)?n.setAttribute("data-mce-style",i,2):n.removeAttribute("data-mce-style",2)),n.style.cssText=i;break;case"class":n.className=i||"";break;case"src":case"href":e.keep_values&&(e.url_converter&&(i=e.url_converter.call(e.url_converter_scope||a,i,r,n)),a.setAttrib(n,"data-mce-"+r,i,2));break;case"shape":n.setAttribute("data-mce-style",i)}if(c(i)&&null!==i&&0!==i.length?n.setAttribute(r,""+i,2):n.removeAttribute(r,2),tinyMCE.activeEditor&&t!=i){var o=tinyMCE.activeEditor;o.onSetAttrib.dispatch(o,n,r,i)}})},setAttribs:function(e,t){var o=this;return this.run(e,function(n){s(t,function(e,t){o.setAttrib(n,t,e)})})},getAttrib:function(e,t,n){var o,r,i=this;if(!(e=i.get(e))||1!==e.nodeType)return n!==r&&n;if(c(n)||(n=""),/^(src|href|style|coords|shape)$/.test(t)&&(o=e.getAttribute("data-mce-"+t)))return o;if(d&&i.props[t]&&(o=(o=e[i.props[t]])&&o.nodeValue?o.nodeValue:o),o||(o=e.getAttribute(t,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(t))return!0===e[i.props[t]]&&""===o?t:o?t:"";if("FORM"===e.nodeName&&e.getAttributeNode(t))return e.getAttributeNode(t).nodeValue;if("style"===t&&(o=o||e.style.cssText)&&(o=i.serializeStyle(i.parseStyle(o),e.nodeName),i.settings.keep_values&&!i._isRes(o)&&e.setAttribute("data-mce-style",o)),
a&&"class"===t&&o&&(o=o.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),d)switch(t){case"rowspan":case"colspan":1===o&&(o="");break;case"size":"+0"!==o&&20!==o&&0!==o||(o="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===o&&(o="");break;case"hspace":-1===o&&(o="");break;case"maxlength":case"tabindex":32768!==o&&2147483647!==o&&"32768"!==o||(o="");break;case"multiple":case"compact":case"noshade":case"nowrap":return 65535===o?t:n;case"shape":o=o.toLowerCase();break;default:0===t.indexOf("on")&&o&&(o=l._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+o))}return o!==r&&null!==o&&""!==o?""+o:n},getPos:function(e,t){var n,o,r=this,i=0,a=0,s=r.doc;if(e=r.get(e),t=t||s.body,e){if(e.getBoundingClientRect)return e=e.getBoundingClientRect(),n=r.boxModel?s.documentElement:s.body,{x:i=e.left+(s.documentElement.scrollLeft||s.body.scrollLeft)-n.clientTop,y:a=e.top+(s.documentElement.scrollTop||s.body.scrollTop)-n.clientLeft};for(o=e;o&&o!=t&&o.nodeType;)i+=o.offsetLeft||0,a+=o.offsetTop||0,o=o.offsetParent;for(o=e.parentNode;o&&o!=t&&o.nodeType;)i-=o.scrollLeft||0,a-=o.scrollTop||0,o=o.parentNode}return{x:i,y:a}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t,n=this.doc;styleElm=n.getElementById("mceDefaultStyles"),styleElm||(styleElm=n.createElement("style"),styleElm.id="mceDefaultStyles",styleElm.type="text/css",(t=n.getElementsByTagName("head")[0]).firstChild?t.insertBefore(styleElm,t.firstChild):t.appendChild(styleElm)),styleElm.styleSheet?styleElm.styleSheet.cssText+=e:styleElm.appendChild(n.createTextNode(e))},loadCSS:function(e){var n,o=this,r=o.doc;e||(e=""),n=r.getElementsByTagName("head")[0],s(e.split(","),function(e){var t;o.files[e]||(o.files[e]=!0,t=o.create("link",{rel:"stylesheet",href:l._addVer(e)}),d&&r.documentMode&&r.recalc&&(t.onload=function(){r.recalc&&r.recalc(),t.onload=null}),n.appendChild(t))})},addClass:function(e,n){return this.run(e,function(e){var t;return n?this.hasClass(e,n)?e.className:(t=this.removeClass(e,n),e.className=(""!=t?t+" ":"")+n):0})},removeClass:function(e,n){var o,r=this;return r.run(e,function(e){var t;return r.hasClass(e,n)?(o||(o=new RegExp("(^|\\s+)"+n+"(\\s+|$)","g")),t=e.className.replace(o," "),t=l.trim(" "!=t?t:""),(e.className=t)||(e.removeAttribute("class"),e.removeAttribute("className")),t):e.className})},hasClass:function(e,t){return!(!(e=this.get(e))||!t)&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return!(e=this.get(e))||"none"==e.style.display||"none"==this.getStyle(e,"display")},uniqueId:function(e){return(e||"mce_")+this.counter++},setHTML:function(e,o){var r=this;return r.run(e,function(n){if(d){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br />"+o,n.removeChild(n.firstChild)}catch(t){var e=r.create("div");e.innerHTML="<br />"+o,s(l.grep(e.childNodes),function(e,t){t&&n.canHaveHTML&&n.appendChild(e)})}}else n.innerHTML=o;return o})},getOuterHTML:function(e){var t,n=this;return(e=n.get(e))?1===e.nodeType&&n.hasOuterHTML?e.outerHTML:((t=(e.ownerDocument||n.doc).createElement("body")).appendChild(e.cloneNode(!0)),t.innerHTML):null},setOuterHTML:function(e,n,o){function r(e,t,n){var o,r;for((r=n.createElement("body")).innerHTML=t,o=r.lastChild;o;)i.insertAfter(o.cloneNode(!0),e),o=o.previousSibling;i.remove(e)}var i=this;return this.run(e,function(e){if(1==(e=i.get(e)).nodeType)if(o=o||e.ownerDocument||i.doc,d)try{d&&1==e.nodeType?e.outerHTML=n:r(e,n,o)}catch(t){r(e,n,o)}else r(e,n,o)})},decode:e.decode,encode:e.encodeAllRaw,insertAfter:function(e,o){return o=this.get(o),this.run(e,function(e){var t,n;return t=o.parentNode,(n=o.nextSibling)?t.insertBefore(e,n):t.appendChild(e),e})},replace:function(t,e,n){var o=this;return c(e,"array")&&(t=t.cloneNode(!0)),o.run(e,function(e){return n&&s(l.grep(e.childNodes),function(e){t.appendChild(e)}),e.parentNode.replaceChild(t,e)})},rename:function(t,e){var n,o=this;return t.nodeName!=e.toUpperCase()&&(n=o.create(e),s(o.getAttribs(t),function(e){o.setAttrib(n,e.nodeName,o.getAttrib(t,e.nodeName))}),o.replace(n,t,1)),n||t},findCommonAncestor:function(e,t){for(var n,o=e;o;){for(n=t;n&&o!=n;)n=n.parentNode;if(o==n)break;o=o.parentNode}return!o&&e.ownerDocument?e.ownerDocument.documentElement:o},toHex:function(e){function t(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e}var n=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(e);return n?e="#"+t(n[1])+t(n[2])+t(n[3]):e},getClasses:function(){function t(e){s(e.imports,function(e){t(e)}),s(e.cssRules||e.rules,function(e){switch(e.type||1){case 1:e.selectorText&&s(e.selectorText.split(","),function(e){e=e.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(e)&&/\.[\w\-]+$/.test(e)&&(n=e,e=l._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",e),i&&!(e=i(e,n))||r[e]||(o.push({"class":e}),r[e]=1))});break;case 3:t(e.styleSheet)}})}var n,e=this,o=[],r={},i=e.settings.class_filter;if(e.classes)return e.classes;try{s(e.doc.styleSheets,t)}catch(a){}return 0<o.length&&(e.classes=o),o},run:function(e,n,o){var r,i=this;return i.doc&&"string"==typeof e&&(e=i.get(e)),!!e&&(o=o||this,e.nodeType||!e.length&&0!==e.length?n.call(o,e):(r=[],s(e,function(e,t){e&&("string"==typeof e&&(e=i.doc.getElementById(e)),r.push(n.call(o,e,t)))}),r))},getAttribs:function(e){var t;return(e=this.get(e))?d?(t=[],"OBJECT"==e.nodeName?e.attributes:("OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"}),e.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t)):e.attributes:[]},isEmpty:function(e,t){var n,o,r,i,a=this,s=0;if(e=e.firstChild){r=new l.dom.TreeWalker(e,e.parentNode),t=t||a.schema?a.schema.getNonEmptyElements():null;do{if(1===(o=e.nodeType)){if(e.getAttribute("data-mce-bogus"))continue;if(i=e.nodeName.toLowerCase(),t&&t[i]){if("br"!==i)return!1;s++;continue}for(a.getAttribs(e),n=e.attributes.length;n--;)if("name"===(i=e.attributes[n].nodeName)||"data-mce-bookmark"===i)return!1}if(8==o)return!1;if(3===o&&!u.test(e.nodeValue))return!1}while(e=r.next())}return s<=1},destroy:function(e){var t=this;t.win=t.doc=t.root=t.events=t.frag=null,e||l.removeUnload(t.destroy)},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new l.dom.Range(this)},nodeIndex:function(e,t){var n,o,r=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)o=e.nodeType,(!t||3!=o||o!=n&&e.nodeValue.length)&&(r++,n=o);return r},split:function(e,t,n){function a(e){function t(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var n,o=e.childNodes,r=e.nodeType;if(1!=r||"bookmark"!=e.getAttribute("data-mce-type")){for(n=o.length-1;0<=n;n--)a(o[n]);if(9!=r){if(3==r&&0<e.nodeValue.length){var i=l.trim(e.nodeValue).length;if(!s.isBlock(e.parentNode)||0<i||0===i&&t(e))return}else if(1==r&&(1==(o=e.childNodes).length&&o[0]&&1==o[0].nodeType&&"bookmark"==o[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(o[0],e),o.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;s.remove(e)}return e}}var o,r,i,s=this,c=s.createRng();if(e&&t)return c.setStart(e.parentNode,s.nodeIndex(e)),c.setEnd(t.parentNode,s.nodeIndex(t)),o=c.extractContents(),(c=s.createRng()).setStart(t.parentNode,s.nodeIndex(t)+1),c.setEnd(e.parentNode,s.nodeIndex(e)+1),r=c.extractContents(),(i=e.parentNode).insertBefore(a(o),e),n?i.replaceChild(n,t):i.insertBefore(t,e),i.insertBefore(a(r),e),s.remove(e),n||t},bind:function(e,t,n,o){return this.events.add(e,t,n,o||this)},unbind:function(e,t,n){return this.events.remove(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return 1!=e.nodeType?null:(t=e.getAttribute("data-mce-contenteditable"))&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null},_findSib:function(e,t,n){var o=this,r=t;if(e)for(c(r,"string")&&(r=function(e){return o.is(e,t)}),e=e[n];e;e=e[n])if(r(e))return e;return null},_isRes:function(e){return/^(top|left|bottom|right|width|height)/i.test(e)||/;\s*(top|left|bottom|right|width|height)/i.test(e)}}),l.DOM=new l.dom.DOMUtils(document,{process_html:0})}(tinymce),function(){function $(d){function l(){return L.createDocumentFragment()}function t(e,t){x(O,e,t)}function n(e,t){x(H,e,t)}function o(e){t(e.parentNode,K(e))}function e(e){t(e.parentNode,K(e)+1)}function r(e){n(e.parentNode,K(e))}function i(e){n(e.parentNode,K(e)+1)}function a(e){e?(R[V]=R[U],R[z]=R[F]):(R[U]=R[V],R[F]=R[z]),R.collapsed=O}function s(e){o(e),i(e)}function c(e){t(e,0),n(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function u(e,t){var n=R[U],o=R[F],r=R[V],i=R[z],a=t.startContainer,s=t.startOffset,c=t.endContainer,l=t.endOffset;return 0===e?C(n,o,a,s):1===e?C(r,i,a,s):2===e?C(r,i,c,l):3===e?C(n,o,c,l):void 0}function f(){_(P)}function p(){return _(D)}function m(){return _(I)}function h(e){var t,n,o=this[U],r=this[F];3!==o.nodeType&&4!==o.nodeType||!o.nodeValue?(0<o.childNodes.length&&(n=o.childNodes[r]),n?o.insertBefore(e,n):o.appendChild(e)):r?r>=o.nodeValue.length?d.insertAfter(e,o):(t=o.splitText(r),o.parentNode.insertBefore(e,t)):o.parentNode.insertBefore(e,o)}function g(e){var t=R.extractContents();R.insertNode(e),e.appendChild(t),R.selectNode(e)}function v(){return q(new $(d),{startContainer:R[U],startOffset:R[F],endContainer:R[V],endOffset:R[z],collapsed:R.collapsed,commonAncestorContainer:R.commonAncestorContainer})}function y(e,t){var n;if(3==e.nodeType)return e;if(t<0)return e;for(n=e.firstChild;n&&0<t;)--t,n=n.nextSibling;return n||e}function b(){return R[U]==R[V]&&R[F]==R[z]}function C(e,t,n,o){var r,i,a,s,c,l;if(e==n)return t==o?0:t<o?-1:1;for(r=n;r&&r.parentNode!=e;)r=r.parentNode;if(r){for(i=0,a=e.firstChild;a!=r&&i<t;)i++,a=a.nextSibling;return t<=i?-1:1}for(r=e;r&&r.parentNode!=n;)r=r.parentNode;if(r){for(i=0,a=n.firstChild;a!=r&&i<o;)i++,a=a.nextSibling;return i<o?-1:1}for(s=d.findCommonAncestor(e,n),c=e;c&&c.parentNode!=s;)c=c.parentNode;for(c||(c=s),l=n;l&&l.parentNode!=s;)l=l.parentNode;if(l||(l=s),c==l)return 0;for(a=s.firstChild;a;){if(a==c)return-1;if(a==l)return 1;a=a.nextSibling}}function x(e,t,n){var o,r;for(e?(R[U]=t,R[F]=n):(R[V]=t,R[z]=n),o=R[V];o.parentNode;)o=o.parentNode;for(r=R[U];r.parentNode;)r=r.parentNode;r==o?0<C(R[U],R[F],R[V],R[z])&&R.collapse(e):R.collapse(e),R.collapsed=b(),R.commonAncestorContainer=d.findCommonAncestor(R[U],R[V])}function _(e){var t,n,o,r,i,a,s,c=0,l=0;if(R[U]==R[V])return S(e);for(n=(t=R[V]).parentNode;n;n=(t=n).parentNode){if(n==R[U])return E(t,e);++c}for(n=(t=R[U]).parentNode;n;n=(t=n).parentNode){if(n==R[V])return k(t,e);++l}for(o=l-c,r=R[U];0<o;)r=r.parentNode,o--;for(i=R[V];o<0;)i=i.parentNode,o++;for(a=r.parentNode,s=i.parentNode;a!=s;a=a.parentNode,s=s.parentNode)r=a,i=s;return w(r,i,e)}function S(e){var t,n,o,r,i,a,s,c;if(e!=P&&(t=l()),R[F]==R[z])return t;if(3==R[U].nodeType){if(n=R[U].nodeValue.substring(R[F],R[z]),e!=I&&(o=R[U],s=R[F],c=R[z]-R[F],0===s&&c>=o.nodeValue.length-1?o.parentNode.removeChild(o):o.deleteData(s,c),R.collapse(O)),e==P)return;return 0<n.length&&t.appendChild(L.createTextNode(n)),t}for(o=y(R[U],R[F]),r=R[z]-R[F];o&&0<r;)i=o.nextSibling,a=B(o,e),t&&t.appendChild(a),--r,o=i;return e!=I&&R.collapse(O),t}function E(e,t){var n,o,r,i,a;if(t!=P&&(n=l()),o=N(e,t),n&&n.appendChild(o),(r=K(e)-R[F])<=0)return t!=I&&(R.setEndBefore(e),R.collapse(H)),n;for(o=e.previousSibling;0<r;)i=o.previousSibling,a=B(o,t),n&&n.insertBefore(a,n.firstChild),--r,o=i;return t!=I&&(R.setEndBefore(e),R.collapse(H)),n}function k(e,t){var n,o,r,i,a,s;for(t!=P&&(n=l()),r=T(e,t),n&&n.appendChild(r),o=K(e),++o,i=R[z]-o,r=e.nextSibling;r&&0<i;)a=r.nextSibling,s=B(r,t),n&&n.appendChild(s),--i,r=a;return t!=I&&(R.setStartAfter(e),R.collapse(O)),n}function w(e,t,n){var o,r,i,a,s,c;for(n!=P&&(r=l()),o=T(e,n),r&&r.appendChild(o),e.parentNode,i=K(e),a=K(t)-++i,s=e.nextSibling;0<a;)c=s.nextSibling,o=B(s,n),r&&r.appendChild(o),s=c,--a;return o=N(t,n),r&&r.appendChild(o),n!=I&&(R.setStartAfter(e),R.collapse(O)),r}function N(e,t){var n,o,r,i,a,s=y(R[V],R[z]-1),c=s!=R[V];if(s==e)return A(s,c,H,t);for(o=A(n=s.parentNode,H,H,t);n;){for(;s;)r=s.previousSibling,i=A(s,c,H,t),t!=P&&o.insertBefore(i,o.firstChild),c=O,s=r;if(n==e)return o;s=n.previousSibling,a=A(n=n.parentNode,H,H,t),t!=P&&a.appendChild(o),o=a}}function T(e,t){var n,o,r,i,a,s=y(R[U],R[F]),c=s!=R[U];if(s==e)return A(s,c,O,t);for(o=A(n=s.parentNode,H,O,t);n;){for(;s;)r=s.nextSibling,i=A(s,c,O,t),t!=P&&o.appendChild(i),c=O,s=r;if(n==e)return o;s=n.nextSibling,a=A(n=n.parentNode,H,O,t),t!=P&&a.appendChild(o),o=a}}function A(e,t,n,o){var r,i,a,s,c;return t?B(e,o):3!=e.nodeType?o!=P?d.clone(e,H):void 0:(r=e.nodeValue,n?(s=R[F],i=r.substring(s),a=r.substring(0,s)):(s=R[z],i=r.substring(0,s),a=r.substring(s)),o!=I&&(e.nodeValue=a),o!=P?((c=d.clone(e,H)).nodeValue=i,c):void 0)}function B(e,t){if(t!=P)return t==I?d.clone(e,O):e;e.parentNode.removeChild(e)}function M(){return d.create("body",null,m()).outerText}var R=this,L=d.doc,D=0,I=1,P=2,O=!0,H=!1,F="startOffset",U="startContainer",V="endContainer",z="endOffset",q=tinymce.extend,K=d.nodeIndex;return q(R,{startContainer:L,startOffset:0,endContainer:L,endOffset:0,collapsed:O,commonAncestorContainer:L,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:t,setEnd:n,setStartBefore:o,setStartAfter:e,setEndBefore:r,setEndAfter:i,collapse:a,selectNode:s,selectNodeContents:c,compareBoundaryPoints:u,deleteContents:f,extractContents:p,cloneContents:m,insertNode:h,surroundContents:g,cloneRange:v,toStringIE:M}),R}(tinymce.dom.Range=$).prototype.toString=function(){return this.toStringIE()}}(),function(){function e(m){function d(e,t){var n,o,r,i,a,s,c,l,d=0,u=-1;if((n=e.duplicate()).collapse(t),(l=n.parentElement()).ownerDocument===m.dom.doc){for(;"false"===l.contentEditable;)l=l.parentNode;if(!l.hasChildNodes())return{node:l,inside:1};for(o=(i=l.children).length-1;d<=o;)if(a=i[c=Math.floor((d+o)/2)],n.moveToElementText(a),0<(u=n.compareEndPoints(t?"StartToStart":"EndToEnd",e)))o=c-1;else{if(!(u<0))return{node:a};d=c+1}if(u<0)for(a?n.collapse(!1):(n.moveToElementText(l),n.collapse(!0),a=l,r=!0),s=0;0!==n.compareEndPoints(t?"StartToStart":"StartToEnd",e)&&0!==n.move("character",1)&&l==n.parentElement();)s++;else for(n.collapse(!0),s=0;0!==n.compareEndPoints(t?"StartToStart":"StartToEnd",e)&&0!==n.move("character",-1)&&l==n.parentElement();)s++;return{node:a,position:u,offset:s,inside:r}}}function e(){function e(e){var t,n,o,r,i,a=d(c,e),s=0;if(t=a.node,n=a.offset,!a.inside||t.hasChildNodes())if(n!==r){if(a.position<0){if(!(o=a.inside?t.firstChild:t.nextSibling))return void l[e?"setStartAfter":"setEndAfter"](t);if(!n)return void(3==o.nodeType?l[e?"setStart":"setEnd"](o,0):l[e?"setStartBefore":"setEndBefore"](o));for(;o;){if(n<=(s+=(i=o.nodeValue).length)){t=o,s-=n,s=i.length-s;break}o=o.nextSibling}}else{if(!(o=t.previousSibling))return l[e?"setStartBefore":"setEndBefore"](t);if(!n)return void(3==t.nodeType?l[e?"setStart":"setEnd"](o,t.nodeValue.length):l[e?"setStartAfter":"setEndAfter"](o));for(;o;){if(n<=(s+=o.nodeValue.length)){t=o,s-=n;break}o=o.previousSibling}}l[e?"setStart":"setEnd"](t,s)}else l[e?"setStartBefore":"setEndAfter"](t);else l[e?"setStart":"setEnd"](t,0)}var t,n,o,r,i,c=m.getRng(),l=h.createRng();if((t=c.item?c.item(0):c.parentElement()).ownerDocument!=h.doc)return l;if(n=m.isCollapsed(),c.item)return l.setStart(t.parentNode,h.nodeIndex(t)),l.setEnd(l.startContainer,l.startOffset+1),l;try{e(!0),n||e()}catch(a){if(-2147024809!=a.number)throw a;i=s.getBookmark(2),(o=c.duplicate()).collapse(!0),t=o.parentElement(),n||((o=c.duplicate()).collapse(!1),(r=o.parentElement()).innerHTML=r.innerHTML),t.innerHTML=t.innerHTML,s.moveToBookmark(i),c=m.getRng(),e(!0),n||e()}return l}var s=this,h=m.dom,g=!1;this.getBookmark=function(e){function n(e){var t,n,o,r,i=[];for(t=e.parentNode,n=h.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(r=(o=t.children).length;r--;)if(e===o[r]){i.push(r);break}t=(e=t).parentNode}return i}function t(e){var t;if(t=d(o,e))return{position:t.position,offset:t.offset,indexes:n(t.node),inside:t.inside}}var o=m.getRng(),r={};return 2===e&&(o.item?r.start={ctrl:!0,indexes:n(o.item(0))}:(r.start=t(!0),m.isCollapsed()||(r.end=t()))),r},this.moveToBookmark=function(i){function a(e){var t,n,o,r;for(t=h.getRoot(),n=e.length-1;0<=n;n--)r=t.children,(o=e[n])<=r.length-1&&(t=r[o]);return t}function e(e){var t,n,o,r=i[e?"start":"end"];r&&(t=0<r.position,(n=c.createTextRange()).moveToElementText(a(r.indexes)),offset=r.offset,offset!==o?(n.collapse(r.inside||t),n.moveStart("character",t?-offset:offset)):n.collapse(e),s.setEndPoint(e?"StartToStart":"EndToStart",n),e&&s.collapse(!0))}var s,c=h.doc.body;i.start&&(i.start.ctrl?(s=c.createControlRange()).addElement(a(i.start.indexes)):(s=c.createTextRange(),e(!0),e()),s.select())},this.addRange=function(e){function t(e){var t,n,o,r,i;o=h.create("a"),t=e?s:l,n=e?c:d,r=a.duplicate(),t!=u&&t!=u.documentElement||(t=f,n=0),3==t.nodeType?(t.parentNode.insertBefore(o,t),r.moveToElementText(o),r.moveStart("character",n),h.remove(o),a.setEndPoint(e?"StartToStart":"EndToEnd",r)):((i=t.childNodes).length?(n>=i.length?h.insertAfter(o,i[i.length-1]):t.insertBefore(o,i[n]),r.moveToElementText(o)):t.canHaveHTML&&(t.innerHTML="<span>\ufeff</span>",o=t.firstChild,r.moveToElementText(o),r.collapse(g)),a.setEndPoint(e?"StartToStart":"EndToEnd",r),h.remove(o))}var a,n,s,c,l,d,o,r,i,u=m.dom.doc,f=u.body;if(s=e.startContainer,c=e.startOffset,l=e.endContainer,d=e.endOffset,a=f.createTextRange(),s==l&&1==s.nodeType){if(c==d&&!s.hasChildNodes()){if(s.canHaveHTML)return(o=s.previousSibling)&&!o.hasChildNodes()&&h.isBlock(o)?o.innerHTML="\ufeff":o=null,s.innerHTML="<span>\ufeff</span><span>\ufeff</span>",a.moveToElementText(s.lastChild),a.select(),h.doc.selection.clear(),s.innerHTML="",void(o&&(o.innerHTML=""));c=h.nodeIndex(s),s=s.parentNode}if(c==d-1)try{if(i=s.childNodes[c],(n=f.createControlRange()).addElement(i),n.select(),(r=m.getRng()).item&&i===r.item(0))return}catch(p){}}t(!0),t(),a.select()},this.getRangeAt=e}tinymce.dom.TridentSelection=e}(),function(){function a(e,t,n,o,r,i){for(var a=0,s=o.length;a<s;a++){var c=o[a];if(c){var l=!1;for(c=c[e];c;){if(c[d]===n){l=o[c.sizset];break}if(1!==c.nodeType||i||(c[d]=n,c.sizset=a),c.nodeName.toLowerCase()===t){l=c;break}c=c[e]}o[a]=l}}}function s(e,t,n,o,r,i){for(var a=0,s=o.length;a<s;a++){var c=o[a];if(c){var l=!1;for(c=c[e];c;){if(c[d]===n){l=o[c.sizset];break}if(1===c.nodeType)if(i||(c[d]=n,c.sizset=a),"string"!=typeof t){if(c===t){l=!0;break}}else if(0<b.filter(t,[c]).length){l=c;break}c=c[e]}o[a]=l}}}var v=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache",c=0,y=Object.prototype.toString,u=!1,n=!0,l=/\\/g,i=/\r\n/g,f=/\W/;[0,0].sort(function(){return n=!1,0});var b=function(e,t,n,o){n=n||[];var r=t=t||document;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return n;var i,a,s,c,l,d,u,f,p=!0,m=b.isXML(t),h=[],g=e;do{if(v.exec(""),(i=v.exec(g))&&(g=i[3],h.push(i[1]),i[2])){c=i[3];break}}while(i);if(1<h.length&&x.exec(e))if(2===h.length&&C.relative[h[0]])a=k(h[0]+h[1],t,o);else for(a=C.relative[h[0]]?[t]:b(h.shift(),t);h.length;)e=h.shift(),C.relative[e]&&(e+=h.shift()),a=k(e,a,o);else if(!o&&1<h.length&&9===t.nodeType&&!m&&C.match.ID.test(h[0])&&!C.match.ID.test(h[h.length-1])&&(t=(l=b.find(h.shift(),t,m)).expr?b.filter(l.expr,l.set)[0]:l.set[0]),t)for(a=(l=o?{expr:h.pop(),set:E(o)}:b.find(h.pop(),1!==h.length||"~"!==h[0]&&"+"!==h[0]||!t.parentNode?t:t.parentNode,m)).expr?b.filter(l.expr,l.set):l.set,0<h.length?s=E(a):p=!1;h.length;)u=d=h.pop(),C.relative[d]?u=h.pop():d="",null==u&&(u=t),C.relative[d](s,u,m);else s=h=[];if(s||(s=a),s||b.error(d||e),"[object Array]"===y.call(s))if(p)if(t&&1===t.nodeType)for(f=0;null!=s[f];f++)s[f]&&(!0===s[f]||1===s[f].nodeType&&b.contains(t,s[f]))&&n.push(a[f]);else for(f=0;null!=s[f];f++)s[f]&&1===s[f].nodeType&&n.push(a[f]);else n.push.apply(n,s);else E(s,n);return c&&(b(c,r,n,o),b.uniqueSort(n)),n};b.uniqueSort=function(e){if(o&&(u=n,e.sort(o),u))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},b.matches=function(e,t){return b(e,null,null,t)},b.matchesSelector=function(e,t){return 0<b(t,null,null,[e]).length},b.find=function(e,t,n){var o,r,i,a,s,c;if(!e)return[];for(r=0,i=C.order.length;r<i;r++)if(s=C.order[r],(a=C.leftMatch[s].exec(e))&&(c=a[1],a.splice(1,1),"\\"!==c.substr(c.length-1)&&(a[1]=(a[1]||"").replace(l,""),null!=(o=C.find[s](a,t,n))))){e=e.replace(C.match[s],"");break}return o||(o="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName("*"):[]),{set:o,expr:e}},b.filter=function(e,t,n,o){for(var r,i,a,s,c,l,d,u,f,p=e,m=[],h=t,g=t&&t[0]&&b.isXML(t[0]);e&&t.length;){for(a in C.filter)if(null!=(r=C.leftMatch[a].exec(e))&&r[2]){if(l=C.filter[a],d=r[1],i=!1,r.splice(1,1),"\\"===d.substr(d.length-1))continue;if(h===m&&(m=[]),C.preFilter[a])if(r=C.preFilter[a](r,h,n,m,o,g)){if(!0===r)continue}else i=s=!0;if(r)for(u=0;null!=(c=h[u]);u++)c&&(f=o^(s=l(c,r,u,h)),n&&null!=s?f?i=!0:h[u]=!1:f&&(m.push(c),i=!0));if(s!==undefined){if(n||(h=m),e=e.replace(C.match[a],""),!i)return[];break}}if(e===p){if(null!=i)break;b.error(e)}p=e}return h},b.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var p=b.getText=function(e){var t,n,o=e.nodeType,r="";if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;if("string"==typeof e.innerText)return e.innerText.replace(i,"");for(e=e.firstChild;e;e=e.nextSibling)r+=p(e)}else if(3===o||4===o)return e.nodeValue}else for(t=0;n=e[t];t++)8!==n.nodeType&&(r+=p(n));return r},C=b.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n="string"==typeof t,o=n&&!f.test(t),r=n&&!o;o&&(t=t.toLowerCase());for(var i,a=0,s=e.length;a<s;a++)if(i=e[a]){for(;(i=i.previousSibling)&&1!==i.nodeType;);e[a]=r||i&&i.nodeName.toLowerCase()===t?i||!1:i===t}r&&b.filter(t,e,!0)},">":function(e,t){var n,o="string"==typeof t,r=0,i=e.length;if(o&&!f.test(t)){for(t=t.toLowerCase();r<i;r++)if(n=e[r]){var a=n.parentNode;e[r]=a.nodeName.toLowerCase()===t&&a}}else{for(;r<i;r++)(n=e[r])&&(e[r]=o?n.parentNode:n.parentNode===t);o&&b.filter(t,e,!0)}},"":function(e,t,n){var o,r=c++,i=s;"string"!=typeof t||f.test(t)||(o=t=t.toLowerCase(),i=a),i("parentNode",t,r,e,o,n)},"~":function(e,t,n){var o,r=c++,i=s;"string"!=typeof t||f.test(t)||(o=t=t.toLowerCase(),i=a),i("previousSibling",t,r,e,o,n)}},find:{ID:function(e,t,n){if("undefined"!=typeof t.getElementById&&!n){var o=t.getElementById(e[1]);return o&&o.parentNode?[o]:[]}},NAME:function(e,t){if("undefined"!=typeof t.getElementsByName){for(var n=[],o=t.getElementsByName(e[1]),r=0,i=o.length;r<i;r++)o[r].getAttribute("name")===e[1]&&n.push(o[r]);return 0===n.length?null:n}},TAG:function(e,t){if("undefined"!=typeof t.getElementsByTagName)return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,o,r,i){if(e=" "+e[1].replace(l,"")+" ",i)return e;for(var a,s=0;null!=(a=t[s]);s++)a&&(r^(a.className&&0<=(" "+a.className+" ").replace(/[\t\n\r]/g," ").indexOf(e))?n||o.push(a):n&&(t[s]=!1));return!1},ID:function(e){return e[1].replace(l,"")},TAG:function(e){return e[1].replace(l,"").toLowerCase()},CHILD:function(e){if("nth"===e[1]){e[2]||b.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(("even"===e[2]?"2n":"odd"===e[2]&&"2n+1")||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&b.error(e[0]);return e[0]=c++,e},ATTR:function(e,t,n,o,r,i){var a=e[1]=e[1].replace(l,"");return!i&&C.attrMap[a]&&(e[1]=C.attrMap[a]),e[4]=(e[4]||e[5]||"").replace(l,""),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,n,o,r){if("not"===e[1]){if(!(1<(v.exec(e[3])||"").length||/^\w/.test(e[3]))){var i=b.filter(e[3],t,n,!0^r);return n||o.push.apply(o,i),!1}e[3]=b(e[3],null,null,t)}else if(C.match.POS.test(e[0])||C.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return!1===e.disabled&&"hidden"!==e.type},disabled:function(e){return!0===e.disabled},checked:function(e){return!0===e.checked},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!b(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return"input"===e.nodeName.toLowerCase()&&"text"===n&&(t===n||null===t)},radio:function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},checkbox:function(e){return"input"===e.nodeName.toLowerCase()&&"checkbox"===e.type},file:function(e){return"input"===e.nodeName.toLowerCase()&&"file"===e.type},password:function(e){return"input"===e.nodeName.toLowerCase()&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"submit"===e.type},image:function(e){return"input"===e.nodeName.toLowerCase()&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,n,o){return t===o.length-1},even:function(e,t){return t%2==0},odd:function(e,t){return t%2==1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,o){var r=t[1],i=C.filters[r];if(i)return i(e,n,t,o);if("contains"===r)return 0<=(e.textContent||e.innerText||p([e])||"").indexOf(t[3]);if("not"===r){for(var a=t[3],s=0,c=a.length;s<c;s++)if(a[s]===e)return!1;return!0}b.error(r)},CHILD:function(e,t){var n,o,r,i,a,s,c=t[1],l=e;switch(c){case"only":case"first":for(;l=l.previousSibling;)if(1===l.nodeType)return!1;if("first"===c)return!0;l=e;case"last":for(;l=l.nextSibling;)if(1===l.nodeType)return!1;return!0;case"nth":if(n=t[2],o=t[3],1===n&&0===o)return!0;if(r=t[0],(i=e.parentNode)&&(i[d]!==r||!e.nodeIndex)){for(a=0,l=i.firstChild;l;l=l.nextSibling)1===l.nodeType&&(l.nodeIndex=++a);i[d]=r}return s=e.nodeIndex-o,0===n?0===s:s%n==0&&0<=s/n}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return-1<(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)},ATTR:function(e,t){var n=t[1],o=b.attr?b.attr(e,n):C.attrHandle[n]?C.attrHandle[n](e):null!=e[n]?e[n]:e.getAttribute(n),r=o+"",i=t[2],a=t[4];return null==o?"!="===i:!i&&b.attr?null!=o:"="===i?r===a:"*="===i?0<=r.indexOf(a):"~="===i?0<=(" "+r+" ").indexOf(a):a?"!="===i?r!==a:"^="===i?0===r.indexOf(a):"$="===i?r.substr(r.length-a.length)===a:"|="===i&&(r===a||r.substr(0,a.length+1)===a+"-"):r&&!1!==o},POS:function(e,t,n,o){var r=t[2],i=C.setFilters[r];if(i)return i(e,n,t,o)}}},x=C.match.POS,e=function(e,t){return"\\"+(t-0+1)};for(var t in C.match)C.match[t]=new RegExp(C.match[t].source+/(?![^\[]*\])(?![^\(]*\))/.source),C.leftMatch[t]=new RegExp(/(^(?:.|\r|\n)*?)/.source+C.match[t].source.replace(/\\(\d+)/g,e));C.match.globalPOS=x;var o,m,r,h,g,_,S,E=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(w){E=function(e,t){var n=0,o=t||[];if("[object Array]"===y.call(e))Array.prototype.push.apply(o,e);else if("number"==typeof e.length)for(var r=e.length;n<r;n++)o.push(e[n]);else for(;e[n];n++)o.push(e[n]);return o}}document.documentElement.compareDocumentPosition?o=function(e,t){return e===t?(u=!0,0):e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1}:(o=function(e,t){if(e===t)return u=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,o,r=[],i=[],a=e.parentNode,s=t.parentNode,c=a;if(a===s)return m(e,t);if(!a)return-1;if(!s)return 1;for(;c;)r.unshift(c),c=c.parentNode;for(c=s;c;)i.unshift(c),c=c.parentNode;n=r.length,o=i.length;for(var l=0;l<n&&l<o;l++)if(r[l]!==i[l])return m(r[l],i[l]);return l===n?m(e,i[l],-1):m(r[l],t,1)},m=function(e,t,n){if(e===t)return n;for(var o=e.nextSibling;o;){if(o===t)return-1;o=o.nextSibling}return 1}),r=document.createElement("div"),h="script"+(new Date).getTime(),g=document.documentElement,r.innerHTML="<a name='"+h+"'/>",g.insertBefore(r,g.firstChild),document.getElementById(h)&&(C.find.ID=function(e,t,n){if("undefined"!=typeof t.getElementById&&!n){var o=t.getElementById(e[1]);return o?o.id===e[1]||"undefined"!=typeof o.getAttributeNode&&o.getAttributeNode("id").nodeValue===e[1]?[o]:undefined:[]}},C.filter.ID=function(e,t){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&n&&n.nodeValue===t}),g.removeChild(r),g=r=null,(_=document.createElement("div")).appendChild(document.createComment("")),0<_.getElementsByTagName("*").length&&(C.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var o=[],r=0;n[r];r++)1===n[r].nodeType&&o.push(n[r]);n=o}return n}),_.innerHTML="<a href='#'></a>",_.firstChild&&"undefined"!=typeof _.firstChild.getAttribute&&"#"!==_.firstChild.getAttribute("href")&&(C.attrHandle.href=function(e){return e.getAttribute("href",2)}),_=null,document.querySelectorAll&&function(){var p=b,e=document.createElement("div"),m="__sizzle__";if(e.innerHTML="<p class='TEST'></p>",!e.querySelectorAll||0!==e.querySelectorAll(".TEST").length){for(var t in b=function(e,t,n,o){if(t=t||document,!o&&!b.isXML(t)){var r=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(e);if(r&&(1===t.nodeType||9===t.nodeType)){if(r[1])return E(t.getElementsByTagName(e),n);if(r[2]&&C.find.CLASS&&t.getElementsByClassName)return E(t.getElementsByClassName(r[2]),n)}if(9===t.nodeType){if("body"===e&&t.body)return E([t.body],n);if(r&&r[3]){var i=t.getElementById(r[3]);if(!i||!i.parentNode)return E([],n);if(i.id===r[3])return E([i],n)}try{return E(t.querySelectorAll(e),n)}catch(u){}}else if(1===t.nodeType&&"object"!==t.nodeName.toLowerCase()){var a=t,s=t.getAttribute("id"),c=s||m,l=t.parentNode,d=/^\s*[+~]/.test(e);s?c=c.replace(/'/g,"\\$&"):t.setAttribute("id",c),d&&l&&(t=t.parentNode);try{if(!d||l)return E(t.querySelectorAll("[id='"+c+"'] "+e),n)}catch(f){}finally{s||a.removeAttribute("id")}}}return p(e,t,n,o)},p)b[t]=p[t];e=null}}(),function(){var e=document.documentElement,o=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(o){var r=!o.call(document.createElement("div"),"div"),i=!1;try{o.call(document.documentElement,"[test!='']:sizzle")}catch(t){i=!0}b.matchesSelector=function(e,t){if(t=t.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!b.isXML(e))try{if(i||!C.match.PSEUDO.test(t)&&!/!=/.test(t)){var n=o.call(e,t);if(n||!r||e.document&&11!==e.document.nodeType)return n}}catch(w){}return 0<b(t,null,null,[e]).length}}}(),(S=document.createElement("div")).innerHTML="<div class='test e'></div><div class='test'></div>",S.getElementsByClassName&&0!==S.getElementsByClassName("e").length&&(S.lastChild.className="e",1!==S.getElementsByClassName("e").length&&(C.order.splice(1,0,"CLASS"),C.find.CLASS=function(e,t,n){if("undefined"!=typeof t.getElementsByClassName&&!n)return t.getElementsByClassName(e[1])},S=null)),document.documentElement.contains?b.contains=function(e,t){return e!==t&&(!e.contains||e.contains(t))
}:document.documentElement.compareDocumentPosition?b.contains=function(e,t){return!!(16&e.compareDocumentPosition(t))}:b.contains=function(){return!1},b.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return!!t&&"HTML"!==t.nodeName};var k=function(e,t,n){for(var o,r=[],i="",a=t.nodeType?[t]:t;o=C.match.PSEUDO.exec(e);)i+=o[0],e=e.replace(C.match.PSEUDO,"");e=C.relative[e]?e+"*":e;for(var s=0,c=a.length;s<c;s++)b(e,a[s],r,n);return b.filter(i,r)};window.tinymce.dom.Sizzle=b}(),function(a){a.dom.Element=function(o,n){var r,i=this;i.settings=n=n||{},i.id=o,i.dom=r=n.dom||a.DOM,a.isIE||r.get(i.id),a.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(n){i[n]=function(){var e,t=[o];for(e=0;e<arguments.length;e++)t.push(arguments[e]);return t=r[n].apply(r,t),i.update(n),t}}),a.extend(i,{on:function(e,t,n){return a.dom.Event.add(i.id,e,t,n)},getXY:function(){return{x:parseInt(i.getStyle("left")),y:parseInt(i.getStyle("top"))}},getSize:function(){var e=r.get(i.id);return{w:parseInt(i.getStyle("width")||e.clientWidth),h:parseInt(i.getStyle("height")||e.clientHeight)}},moveTo:function(e,t){i.setStyles({left:e,top:t})},moveBy:function(e,t){var n=i.getXY();i.moveTo(n.x+e,n.y+t)},resizeTo:function(e,t){i.setStyles({width:e,height:t})},resizeBy:function(e,t){var n=i.getSize();i.resizeTo(n.w+e,n.h+t)},update:function(e){var t;if(a.isIE6&&n.blocker){if(0===(e=e||"").indexOf("get")||0===e.indexOf("has")||0===e.indexOf("is"))return;if("remove"==e)return void r.remove(i.blocker);i.blocker?t=r.get(i.blocker):(i.blocker=r.uniqueId(),t=r.add(n.container||r.getRoot(),"iframe",{id:i.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),r.setStyle(t,"opacity",0)),r.setStyles(t,{left:i.getStyle("left",1),top:i.getStyle("top",1),width:i.getStyle("width",1),height:i.getStyle("height",1),display:i.getStyle("display",1),zIndex:parseInt(i.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(m){var c=m.is,r=m.isIE,g=m.each,h=m.dom.TreeWalker;m.create("tinymce.dom.Selection",{Selection:function(e,t,n,o){var r=this;r.dom=e,r.win=t,r.serializer=n,r.editor=o,g(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(e){r[e]=new m.util.Dispatcher(r)}),r.win.getSelection||(r.tridentSel=new m.dom.TridentSelection(r)),m.isIE&&e.boxModel&&this._fixIESelection(),m.addUnload(r.destroy,r)},setCursorLocation:function(e,t){var n=this,o=n.dom.createRng();o.setStart(e,t),o.setEnd(e,t),n.setRng(o),n.collapse(!1)},getContent:function(e){var t,n,o,r=this,i=r.getRng(),a=r.dom.create("body"),s=r.getSel();return t=n="",(e=e||{}).get=!0,e.format=e.format||"html",e.forced_root_block="",r.onBeforeGetContent.dispatch(r,e),"text"==e.format?r.isCollapsed()?"":i.text||(s.toString?s.toString():""):(i.cloneContents?(o=i.cloneContents())&&a.appendChild(o):c(i.item)||c(i.htmlText)?(a.innerHTML="<br>"+(i.item?i.item(0).outerHTML:i.htmlText),a.removeChild(a.firstChild)):a.innerHTML=i.toString(),/^\s/.test(a.innerHTML)&&(t=" "),/\s+$/.test(a.innerHTML)&&(n=" "),e.getInner=!0,e.content=r.isCollapsed()?"":t+r.serializer.serialize(a,e)+n,r.onGetContent.dispatch(r,e),e.content)},setContent:function(e,t){var n,o,r,i=this,a=i.getRng(),s=i.win.document;if((t=t||{format:"html"}).set=!0,e=t.content=e,t.no_events||i.onBeforeSetContent.dispatch(i,t),e=t.content,a.insertNode){e+='<span id="__caret">_</span>',a.startContainer==s&&a.endContainer==s?s.body.innerHTML=e:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=e:a.createContextualFragment?a.insertNode(a.createContextualFragment(e)):(o=s.createDocumentFragment(),r=s.createElement("div"),o.appendChild(r),r.outerHTML=e,a.insertNode(o))),n=i.dom.get("__caret"),(a=s.createRange()).setStartBefore(n),a.setEndBefore(n),i.setRng(a),i.dom.remove("__caret");try{i.setRng(a)}catch(c){}}else a.item&&(s.execCommand("Delete",!1,null),a=i.getRng()),/^\s+/.test(e)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+e),i.dom.remove("__mce_tmp")):a.pasteHTML(e);t.no_events||i.onSetContent.dispatch(i,t)},getStart:function(){var e,t,n,o,r=this,i=r.getRng();if(i.duplicate||i.item){if(i.item)return i.item(0);for((n=i.duplicate()).collapse(1),(e=n.parentElement()).ownerDocument!==r.dom.doc&&(e=r.dom.getRoot()),t=o=i.parentElement();o=o.parentNode;)if(o==e){e=t;break}return e}return 1==(e=i.startContainer).nodeType&&e.hasChildNodes()&&(e=e.childNodes[Math.min(e.childNodes.length-1,i.startOffset)]),e&&3==e.nodeType?e.parentNode:e},getEnd:function(){var e,t,n=this,o=n.getRng();return o.duplicate||o.item?o.item?o.item(0):((o=o.duplicate()).collapse(0),(e=o.parentElement()).ownerDocument!==n.dom.doc&&(e=n.dom.getRoot()),e&&"BODY"==e.nodeName&&e.lastChild||e):(e=o.endContainer,t=o.endOffset,1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[0<t?t-1:t]),e&&3==e.nodeType?e.parentNode:e)},getBookmark:function(e,l){function t(e,n){var o=0;return g(p.select(e),function(e,t){e==n&&(o=t)}),o}function n(i){function e(e){var t,n,o,r=e?"start":"end";t=i[r+"Container"],n=i[r+"Offset"],1==t.nodeType&&"TR"==t.nodeName&&(t=(o=t.childNodes)[Math.min(e?n:n-1,o.length-1)])&&(n=e?0:t.childNodes.length,i["set"+(e?"Start":"End")](t,n))}return e(!0),e(),i}function o(){function e(e,t){var n,o,r=e[t?"startContainer":"endContainer"],i=e[t?"startOffset":"endOffset"],a=[],s=0;if(3==r.nodeType){if(l)for(n=r.previousSibling;n&&3==n.nodeType;n=n.previousSibling)i+=n.nodeValue.length;a.push(i)}else i>=(o=r.childNodes).length&&o.length&&(s=1,i=Math.max(0,o.length-1)),a.push(f.dom.nodeIndex(o[i],l)+s);for(;r&&r!=c;r=r.parentNode)a.push(f.dom.nodeIndex(r,l));return a}var t=f.getRng(!0),c=p.getRoot(),n={};return n.start=e(t,!0),f.isCollapsed()||(n.end=e(t)),n}var r,i,a,s,c,d,u,f=this,p=f.dom,m="\ufeff";if(2==e)return f.tridentSel?f.tridentSel.getBookmark(e):o();if(e)return{rng:f.getRng()};if(r=f.getRng(),a=p.uniqueId(),s=tinyMCE.activeEditor.selection.isCollapsed(),u="overflow:hidden;line-height:0px",r.duplicate||r.item){if(r.item)return{name:c=(d=r.item(0)).nodeName,index:t(c,d)};i=r.duplicate();try{r.collapse(),r.pasteHTML('<span data-mce-type="bookmark" id="'+a+'_start" style="'+u+'">'+m+"</span>"),s||(i.collapse(!1),r.moveToElementText(i.parentElement()),0===r.compareEndPoints("StartToEnd",i)&&i.move("character",-1),i.pasteHTML('<span data-mce-type="bookmark" id="'+a+'_end" style="'+u+'">'+m+"</span>"))}catch(h){return null}}else{if("IMG"==(c=(d=f.getNode()).nodeName))return{name:c,index:t(c,d)};i=n(r.cloneRange()),s||(i.collapse(!1),i.insertNode(p.create("span",{"data-mce-type":"bookmark",id:a+"_end",style:u},m))),(r=n(r)).collapse(!0),r.insertNode(p.create("span",{"data-mce-type":"bookmark",id:a+"_start",style:u},m))}return f.moveToBookmark({id:a,keep:1}),{id:a}},moveToBookmark:function(s){function e(e){var t,n,o,r,i=s[e?"start":"end"];if(i){for(o=i[0],n=c,t=i.length-1;1<=t;t--){if(r=n.childNodes,i[t]>r.length-1)return;n=r[i[t]]}3===n.nodeType&&(o=Math.min(i[0],n.nodeValue.length)),1===n.nodeType&&(o=Math.min(i[0],n.childNodes.length)),e?a.setStart(n,o):a.setEnd(n,o)}return!0}function t(e){var t,n,o,r,i=p.get(s.id+"_"+e),a=s.keep;if(i&&(t=i.parentNode,"start"==e?(a?(t=i.firstChild,n=1):n=p.nodeIndex(i),l=d=t,u=f=n):(a?(t=i.firstChild,n=1):n=p.nodeIndex(i),d=t,f=n),!a)){for(r=i.previousSibling,o=i.nextSibling,g(m.grep(i.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});i=p.get(s.id+"_"+e);)p.remove(i,1);r&&o&&r.nodeType==o.nodeType&&3==r.nodeType&&!m.isOpera&&(n=r.nodeValue.length,r.appendData(o.nodeValue),p.remove(o),"start"==e?(l=d=r,u=f=n):(d=r,f=n))}}function n(e){return!p.isBlock(e)||e.innerHTML||r||(e.innerHTML='<br data-mce-bogus="1" />'),e}var a,c,l,d,u,f,o=this,p=o.dom;if(s)if(s.start){if(a=p.createRng(),c=p.getRoot(),o.tridentSel)return o.tridentSel.moveToBookmark(s);e(!0)&&e()&&o.setRng(a)}else s.id?(t("start"),t("end"),l&&((a=p.createRng()).setStart(n(l),u),a.setEnd(n(d),f),o.setRng(a))):s.name?o.select(p.select(s.name)[s.index]):s.rng&&o.setRng(s.rng)},select:function(e,t){function n(e,t){var n=new h(e,e);do{if(3==e.nodeType&&0!==m.trim(e.nodeValue).length)return void(t?a.setStart(e,0):a.setEnd(e,e.nodeValue.length));if("BR"==e.nodeName)return void(t?a.setStartBefore(e):a.setEndBefore(e))}while(e=t?n.next():n.prev())}var o,r=this,i=r.dom,a=i.createRng();return e&&(o=i.nodeIndex(e),a.setStart(e.parentNode,o),a.setEnd(e.parentNode,o+1),t&&(n(e,1),n(e)),r.setRng(a)),e},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed)},collapse:function(e){var t,n=this,o=n.getRng();o.item&&(t=o.item(0),(o=n.win.document.body.createTextRange()).moveToElementText(t)),o.collapse(!!e),n.setRng(o)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){var t,n,o,r=this,i=r.win.document;if(e&&r.tridentSel)return r.tridentSel.getRangeAt(0);try{(t=r.getSel())&&(n=0<t.rangeCount?t.getRangeAt(0):t.createRange?t.createRange():i.createRange())}catch(a){}return m.isIE&&n&&n.setStart&&i.selection.createRange().item&&(o=i.selection.createRange().item(0),(n=i.createRange()).setStartBefore(o),n.setEndAfter(o)),n||(n=i.createRange?i.createRange():i.body.createTextRange()),n.setStart&&9===n.startContainer.nodeType&&n.collapsed&&(o=r.dom.getRoot(),n.setStart(o,0),n.setEnd(o,0)),r.selectedRange&&r.explicitRange&&(0===n.compareBoundaryPoints(n.START_TO_START,r.selectedRange)&&0===n.compareBoundaryPoints(n.END_TO_END,r.selectedRange)?n=r.explicitRange:(r.selectedRange=null,r.explicitRange=null)),n},setRng:function(e,t){var n,o=this;if(o.tridentSel){if(e.cloneRange)try{return void o.tridentSel.addRange(e)}catch(r){}try{e.select()}catch(r){}}else if(n=o.getSel()){o.explicitRange=e;try{n.removeAllRanges()}catch(r){}n.addRange(e),!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),o.selectedRange=0<n.rangeCount?n.getRangeAt(0):null}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t,n=this,o=n.getRng(),r=(n.getSel(),o.startContainer),i=o.endContainer;return o?o.setStart?(t=o.commonAncestorContainer,!o.collapsed&&(o.startContainer==o.endContainer&&o.endOffset-o.startOffset<2&&o.startContainer.hasChildNodes()&&(t=o.startContainer.childNodes[o.startOffset]),3===r.nodeType&&3===i.nodeType&&(r=r.length===o.startOffset?e(r.nextSibling,!0):r.parentNode,i=0===o.endOffset?e(i.previousSibling,!1):i.parentNode,r&&r===i))?r:t&&3==t.nodeType?t.parentNode:t):o.item?o.item(0):o.parentElement():n.dom.getRoot()},getSelectedBlocks:function(e,t){var n,o,r,i=this,a=i.dom,s=[];if(n=a.getParent(e||i.getStart(),a.isBlock),o=a.getParent(t||i.getEnd(),a.isBlock),n&&s.push(n),n&&o&&n!=o)for(var c=new h(r=n,a.getRoot());(r=c.next())&&r!=o;)a.isBlock(r)&&s.push(r);return o&&n!=o&&s.push(o),s},isForward:function(){var e,t,n=this.dom,o=this.getSel();return!o||null==o.anchorNode||null==o.focusNode||((e=n.createRng()).setStart(o.anchorNode,o.anchorOffset),e.collapse(!0),(t=n.createRng()).setStart(o.focusNode,o.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0)},normalize:function(){function e(e){function t(e,t){for(var n=new h(e,c.getParent(e.parentNode,c.isBlock)||l);e=n[t?"prev":"next"]();)if("BR"===e.nodeName)return!0}function n(e,t){var n,o;for(n=new h(t=t||r,c.getParent(t.parentNode,c.isBlock)||l);a=n[e?"prev":"next"]();){if(3===a.nodeType&&0<a.nodeValue.length)return r=a,i=e?a.nodeValue.length:0,void(u=!0);if(c.isBlock(a)||s[a.nodeName.toLowerCase()])return;o=a}f&&o&&(r=o,u=!0,i=0)}var r,i,o,a,s,c=p.dom,l=c.getRoot();if(r=d[(e?"start":"end")+"Container"],i=d[(e?"start":"end")+"Offset"],s=c.schema.getNonEmptyElements(),9===r.nodeType&&(r=c.getRoot(),i=0),r===l){if(e&&(a=r.childNodes[0<i?i-1:0])&&(a.nodeName.toLowerCase(),s[a.nodeName]||"TABLE"==a.nodeName))return;if(r.hasChildNodes()&&(r=r.childNodes[Math.min(!e&&0<i?i-1:i,r.childNodes.length-1)],i=0,r.hasChildNodes()&&!/TABLE/.test(r.nodeName))){o=new h(a=r,l);do{if(3===a.nodeType&&0<a.nodeValue.length){i=e?0:a.nodeValue.length,r=a,u=!0;break}if(s[a.nodeName.toLowerCase()]){i=c.nodeIndex(a),r=a.parentNode,"IMG"!=a.nodeName||e||i++,u=!0;break}}while(a=e?o.next():o.prev())}}f&&(3===r.nodeType&&0===i&&n(!0),1===r.nodeType&&(!(a=r.childNodes[i])||"BR"!==a.nodeName||t(a)||t(a,!0)||n(!0,r.childNodes[i]))),e&&!f&&3===r.nodeType&&i===r.nodeValue.length&&n(!1),u&&d["set"+(e?"Start":"End")](r,i)}var d,u,f,p=this;m.isIE||(d=p.getRng(),f=d.collapsed,e(!0),f||e(),u&&(f&&d.collapse(!0),p.setRng(d,p.isForward())))},selectorChanged:function(e,t){var a,s=this;return s.selectorChangedData||(s.selectorChangedData={},a={},s.editor.onNodeChange.addToTop(function(e,t,n){var o=s.dom,r=o.getParents(n,null,o.getRoot()),i={};g(s.selectorChangedData,function(e,n){g(r,function(t){if(o.is(t,n))return a[n]||(g(e,function(e){e(!0,{node:t,selector:n,parents:r})}),a[n]=e),i[n]=e,!1})}),g(a,function(e,t){i[t]||(delete a[t],g(e,function(e){e(!1,{node:n,selector:t,parents:r})}))})})),s.selectorChangedData[e]||(s.selectorChangedData[e]=[]),s.selectorChangedData[e].push(t),s},scrollIntoView:function(e){var t,n,o=this,r=o.dom;n=r.getViewPort(o.editor.getWin()),((t=r.getPos(e).y)<n.y||t+25>n.y+n.h)&&o.editor.getWin().scrollTo(0,t<n.y?t:t-n.h+25)},destroy:function(e){var t=this;t.win=null,e||m.removeUnload(t.destroy)},_fixIESelection:function(){function n(e,t){var n=l.createTextRange();try{n.moveToPoint(e,t)}catch(o){n=null}return n}function t(e){var t;e.button?(t=n(e.x,e.y))&&(0<t.compareEndPoints("StartToStart",i)?t.setEndPoint("StartToStart",i):t.setEndPoint("EndToEnd",i),t.select()):o()}function o(){var e=c.selection.createRange();i&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&i.select(),s.unbind(c,"mouseup",o),s.unbind(c,"mousemove",t),i=r=0}var r,i,a,s=this.dom,c=s.doc,l=c.body;c.documentElement.unselectable=!0,s.bind(c,["mousedown","contextmenu"],function(e){if("HTML"===e.target.nodeName){if(r&&o(),(a=c.documentElement).scrollHeight>a.clientHeight)return;r=1,(i=n(e.x,e.y))&&(s.bind(c,"mouseup",o),s.bind(c,"mousemove",t),s.win.focus(),i.select())}})}})}(tinymce),function(h){h.dom.Serializer=function(l,d,s){var c,u,f,p=h.isIE,m=h.each;return l.apply_source_formatting||(l.indent=!1),d=d||h.DOM,s=s||new h.html.Schema(l),l.entity_encoding=l.entity_encoding||"named",l.remove_trailing_brs=!("remove_trailing_brs"in l)||l.remove_trailing_brs,c=new h.util.Dispatcher(self),u=new h.util.Dispatcher(self),(f=new h.html.DomParser(l,s)).addAttributeFilter("src,href,style",function(e,t){for(var n,o,r,i=e.length,a="data-mce-"+t,s=l.url_converter,c=l.url_converter_scope;i--;)(o=(n=e[i]).attributes.map[a])!==r?(n.attr(t,0<o.length?o:null),n.attr(a,null)):(o=n.attributes.map[t],"style"===t?o=d.serializeStyle(d.parseStyle(o),n.name):s&&(o=s.call(c,o,t,n.name)),n.attr(t,0<o.length?o:null))}),f.addAttributeFilter("class",function(e){for(var t,n,o=e.length;o--;)n=(t=e[o]).attr("class").replace(/(?:^|\s)mce(Item\w+|Selected)(?!\S)/g,""),t.attr("class",0<n.length?n:null)}),f.addAttributeFilter("data-mce-type",function(e,t,n){for(var o,r=e.length;r--;)"bookmark"!==(o=e[r]).attributes.map["data-mce-type"]||n.cleanup||o.remove()}),f.addAttributeFilter("data-mce-expando",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),f.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=h.html.Entities.decode(t.value))}),f.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var o,r,i=e.length;i--;)r=(o=e[i]).firstChild?o.firstChild.value:"","script"===t?(o.attr("type",(o.attr("type")||"text/javascript").replace(/^mce\-/,"")),0<r.length&&(o.firstChild.value="// <![CDATA[\n"+n(r)+"\n// ]]>")):0<r.length&&(o.firstChild.value="<!--\n"+n(r)+"\n-->")}),f.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)0===(t=e[n]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),f.addNodeFilter("xml:namespace,input",function(e,t){for(var n,o=e.length;o--;)7===(n=e[o]).type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),l.fix_list_elements&&f.addNodeFilter("ul,ol",function(e){for(var t,n,o=e.length;o--;)"ul"!==(n=(t=e[o]).parent).name&&"ol"!==n.name||t.prev&&"li"===t.prev.name&&t.prev.append(t)}),f.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:s,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,onPreProcess:c,onPostProcess:u,serialize:function(e,t){var n,o,r,i,a;return p&&0<d.select("script,style,select,map").length?(a=e.innerHTML,e=e.cloneNode(!1),d.setHTML(e,a)):e=e.cloneNode(!0),(n=e.ownerDocument.implementation).createHTMLDocument&&(o=n.createHTMLDocument(""),m("BODY"==e.nodeName?e.childNodes:[e],function(e){o.body.appendChild(o.importNode(e,!0))}),e="BODY"!=e.nodeName?o.body.firstChild:o.body,r=d.doc,d.doc=o),(t=t||{}).format=t.format||"html",t.no_events||(t.node=e,c.dispatch(self,t)),i=new h.html.Serializer(l,s),t.content=i.serialize(f.parse(h.trim(t.getInner?e.innerHTML:d.getOuterHTML(e)),t)),t.cleanup||(t.content=t.content.replace(/\uFEFF/g,"")),t.no_events||u.dispatch(self,t),r&&(d.doc=r),t.node=null,t.content},addRules:function(e){s.addValidElements(e)},setRules:function(e){s.setValidElements(e)}}}}(tinymce),function(p){p.dom.ScriptLoader=function(){function i(e,t){function n(){c.remove(s),r&&(r.onreadystatechange=r.onload=r=null),t()}function o(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+e)}var r,i,a,s,c=p.DOM;s=c.uniqueId(),p.isIE6&&(i=new p.util.URI(e),a=location,i.host==a.hostname&&i.port==a.port&&i.protocol+":"==a.protocol&&"file"!=i.protocol.toLowerCase())?p.util.XHR.send({url:p._addVer(i.getURI()),success:function(e){var t=c.create("script",{type:"text/javascript"});t.text=e,document.getElementsByTagName("head")[0].appendChild(t),c.remove(t),n()},error:o}):((r=document.createElement("script")).id=s,r.type="text/javascript",r.src=p._addVer(e),p.isIE||(r.onload=n),r.onerror=o,p.isOpera||(r.onreadystatechange=function(){var e=r.readyState;"complete"!=e&&"loaded"!=e||n()}),(document.getElementsByTagName("head")[0]||document.body).appendChild(r))}var a,o=0,s=1,c=2,l={},r=[],d={},u=[],f=0;this.isDone=function(e){return l[e]==c},this.markDone=function(e){l[e]=c},this.add=this.load=function(e,t,n){l[e]==a&&(r.push(e),l[e]=o),t&&(d[e]||(d[e]=[]),d[e].push({func:t,scope:n||this}))},this.loadQueue=function(e,t){this.loadScripts(r,e,t)},this.loadScripts=function(t,e,n){function o(e){p.each(d[e],function(e){e.func.call(e.scope)}),d[e]=a}var r;u.push({func:e,scope:n||this}),(r=function(){var e=p.grep(t);t.length=0,p.each(e,function(e){l[e]!=c?l[e]!=s&&(l[e]=s,f++,i(e,function(){l[e]=c,f--,o(e),r()})):o(e)}),f||(p.each(u,function(e){e.func.call(e.scope)}),u.length=0)})()}},p.ScriptLoader=new p.dom.ScriptLoader}(tinymce),function(y){y.dom.RangeUtils=function(v){this.walk=function(e,r){function i(e){var t;return 3===(t=e[0]).nodeType&&t===p&&m>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===g&&0<e.length&&t===h&&3===t.nodeType&&e.splice(e.length-1,1),e}function a(e,t,n){for(var o=[];e&&e!=n;e=e[t])o.push(e);return o}function t(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function n(e,t,n){var o=n?"nextSibling":"previousSibling";for(d=(l=e).parentNode;l&&l!=t;l=d)d=l.parentNode,(u=a(l==e?l:l[o],o)).length&&(n||u.reverse(),r(i(u)))}var o,s,c,l,d,u,f,p=e.startContainer,m=e.startOffset,h=e.endContainer,g=e.endOffset;if(0<(f=v.select("td.mceSelected,th.mceSelected")).length)y.each(f,function(e){r([e])});else{if(1==p.nodeType&&p.hasChildNodes()&&(p=p.childNodes[m]),1==h.nodeType&&h.hasChildNodes()&&(h=h.childNodes[Math.min(g-1,h.childNodes.length-1)]),p==h)return r(i([p]));for(o=v.findCommonAncestor(p,h),l=p;l;l=l.parentNode){if(l===h)return n(p,o,!0);if(l===o)break}for(l=h;l;l=l.parentNode){if(l===p)return n(h,o);if(l===o)break}s=t(p,o)||p,c=t(h,o)||h,n(p,s,!0),(u=a(s==p?s:s.nextSibling,"nextSibling",c==h?c.nextSibling:c)).length&&r(i(u)),n(h,c)}},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,o=e.startOffset,r=e.endContainer,i=e.endOffset;return n==r&&3==n.nodeType?0<o&&o<n.nodeValue.length&&(n=(r=t(n,o)).previousSibling,o<i?(n=r=t(r,i-=o).previousSibling,i=r.nodeValue.length,o=0):i=0):(3==n.nodeType&&0<o&&o<n.nodeValue.length&&(n=t(n,o),o=0),3==r.nodeType&&0<i&&i<r.nodeValue.length&&(i=(r=t(r,i).previousSibling).nodeValue.length)),{startContainer:n,startOffset:o,endContainer:r,endOffset:i}}},y.dom.RangeUtils.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1}}(tinymce),function(m){var h=m.dom.Event,g=m.each;m.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(l,r){var i,a,t,n,d,u=this,o=l.root,s=l.items,f=l.enableUpDown,p=l.enableLeftRight||!l.enableUpDown,c=l.excludeFromTabOrder;r=r||m.DOM,i=function(e){d=e.target.id},a=function(e){r.setAttrib(e.target.id,"tabindex","-1")},n=function(){var e=r.get(d);r.setAttrib(e,"tabindex","0"),e.focus()},u.focus=function(){r.get(d).focus()},u.destroy=function(){g(s,function(e){var t=r.get(e.id);r.unbind(t,"focus",i),r.unbind(t,"blur",a)});var e=r.get(o);r.unbind(e,"focus",n),r.unbind(e,"keydown",t),s=r=o=u.focus=i=a=t=n=null,u.destroy=function(){}},u.moveFocus=function(e,t){var n,o=-1;u.controls;d&&(g(s,function(e,t){if(e.id===d)return o=t,!1}),(o+=e)<0?o=s.length-1:o>=s.length&&(o=0),n=s[o],r.setAttrib(d,"tabindex","-1"),r.setAttrib(n.id,"tabindex","0"),r.get(n.id).focus(),l.actOnFocus&&l.onAction(n.id),t&&h.cancel(t))},t=function(e){var t=37,n=39,o=38,r=40,i=27,a=14,s=13,c=32;switch(e.keyCode){case t:p&&u.moveFocus(-1);break;case n:p&&u.moveFocus(1);break;case o:f&&u.moveFocus(-1);break;case r:f&&u.moveFocus(1);break;case i:l.onCancel&&(l.onCancel(),h.cancel(e));break;case a:case s:case c:l.onAction&&(l.onAction(d),h.cancel(e))}},g(s,function(e,t){var n,o;e.id||(e.id=r.uniqueId("_mce_item_")),o=r.get(e.id),c?(r.bind(o,"blur",a),n="-1"):n=0===t?"0":"-1",o.setAttribute("tabindex",n),r.bind(o,"focus",i)}),s[0]&&(d=s[0].id),r.setAttrib(o,"tabindex","-1");var e=r.get(o);r.bind(e,"focus",n),r.bind(e,"keydown",t)}})}(tinymce),function(o){var r=o.DOM,n=o.is;o.create("tinymce.ui.Control",{Control:function(e,t,n){this.id=e,this.settings=t=t||{},this.rendered=!1,this.onRender=new o.util.Dispatcher(this),this.classPrefix="",this.scope=t.scope||this,this.disabled=0,this.active=0,this.editor=n},setAriaProperty:function(e,t){var n=r.get(this.id+"_aria")||r.get(this.id);n&&r.setAttrib(n,"aria-"+e,!!t)},focus:function(){r.get(this.id).focus()},setDisabled:function(e){e!=this.disabled&&(this.setAriaProperty("disabled",e),this.setState("Disabled",e),this.setState("Enabled",!e),this.disabled=e)},isDisabled:function(){return this.disabled},setActive:function(e){e!=this.active&&(this.setState("Active",e),this.active=e,this.setAriaProperty("pressed",e))},isActive:function(){return this.active},setState:function(e,t){var n=r.get(this.id);e=this.classPrefix+e,t?r.addClass(n,e):r.removeClass(n,e)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(e){r.setHTML(e,this.renderHTML())},postRender:function(){var e,t=this;n(t.disabled)&&(e=t.disabled,t.disabled=-1,t.setDisabled(e)),n(t.active)&&(e=t.active,t.active=-1,t.setActive(e))},remove:function(){r.remove(this.id),this.destroy()},destroy:function(){o.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(e,t,n){this.parent(e,t,n),this.controls=[],this.lookup={}},add:function(e){return this.lookup[e.id]=e,this.controls.push(e),e},get:function(e){return this.lookup[e]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(e,t){this.parent(e,t),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(e){var t=e.is;e.DOM,e.each,e.walk;e.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(e,t){this.parent(e,t),this.classPrefix="mceMenuItem"},setSelected:function(e){this.setState("Selected",e),this.setAriaProperty("checked",!!e),this.selected=e},isSelected:function(){return this.selected},postRender:function(){var e=this;e.parent(),t(e.selected)&&e.setSelected(e.selected)}})}(tinymce),function(o){o.is;var n=o.DOM,r=(o.each,o.walk);o.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(e,t){var n=this;n.parent(e,t),n.items={},n.collapsed=!1,n.menuCount=0,n.onAddItem=new o.util.Dispatcher(this)},expand:function(e){var t=this;e&&r(t,function(e){e.expand&&e.expand()},"items",t),t.collapsed=!1},collapse:function(e){var t=this;e&&r(t,function(e){e.collapse&&e.collapse()},"items",t),t.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(e){return e.settings||(e=new o.ui.MenuItem(e.id||n.uniqueId(),e)),this.onAddItem.dispatch(this,e),this.items[e.id]=e},addSeparator:function(){return this.add({separator:!0})},addMenu:function(e){return e.collapse||(e=this.createMenu(e)),this.menuCount++,this.add(e)},hasMenus:function(){return 0!==this.menuCount},remove:function(e){delete this.items[e.id]},removeAll:function(){var e=this;r(e,function(e){e.removeAll?e.removeAll():e.remove(),e.destroy()},"items",e),e.items={}},createMenu:function(e){var t=new o.ui.Menu(e.id||n.uniqueId(),e);return t.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),t}})}(tinymce),function(m){var n=m.is,h=m.DOM,g=m.each,v=m.dom.Event,y=m.dom.Element;m.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(e,t){(t=t||{}).container=t.container||h.doc.body,t.offset_x=t.offset_x||0,t.offset_y=t.offset_y||0,t.vp_offset_x=t.vp_offset_x||0,t.vp_offset_y=t.vp_offset_y||0,n(t.icons)&&!t.icons&&(t["class"]+=" mceNoIcons"),this.parent(e,t),this.onShowMenu=new m.util.Dispatcher(this),this.onHideMenu=new m.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(e){var t,n=this,o=n.settings;return e.container=e.container||o.container,e.parent=n,e.constrain=e.constrain||o.constrain,e["class"]=e["class"]||o["class"],e.vp_offset_x=e.vp_offset_x||o.vp_offset_x,e.vp_offset_y=e.vp_offset_y||o.vp_offset_y,e.keyboard_focus=o.keyboard_focus,(t=new m.ui.DropMenu(e.id||h.uniqueId(),e)).onAddItem.add(n.onAddItem.dispatch,n.onAddItem),t},focus:function(){var e=this;e.keyboardNav&&e.keyboardNav.focus()},update:function(){var e,t,n=this,o=n.settings,r=h.get("menu_"+n.id+"_tbl"),i=h.get("menu_"+n.id+"_co");e=o.max_width?Math.min(r.offsetWidth,o.max_width):r.offsetWidth,t=o.max_height?Math.min(r.offsetHeight,o.max_height):r.offsetHeight,h.boxModel?n.element.setStyles({width:e,height:t}):n.element.setStyles({width:e+2,height:t+2}),o.max_width&&h.setStyle(i,"width",e),o.max_height&&(h.setStyle(i,"height",t),r.clientHeight<o.max_height&&h.setStyle(i,"overflow","hidden"))},showMenu:function(e,t,n){var o,r,i,a,s,c,l=this,d=l.settings,u=h.getViewPort(),f=2,p=l.classPrefix;l.collapse(1),l.isMenuVisible||(l.rendered?o=h.get("menu_"+l.id):(o=h.add(l.settings.container,l.renderNode()),g(l.items,function(e){e.postRender()}),l.element=new y("menu_"+l.id,{blocker:1,container:d.container})),m.isOpera||h.setStyles(o,{left:-65535,top:-65535}),h.show(o),l.update(),e+=d.offset_x||0,t+=d.offset_y||0,u.w-=4,u.h-=4,d.constrain&&(r=o.clientWidth-f,i=o.clientHeight-f,a=u.x+u.w,s=u.y+u.h,e+d.vp_offset_x+r>a&&(e=n?n-r:Math.max(0,a-d.vp_offset_x-r)),t+d.vp_offset_y+i>s&&(t=Math.max(0,s-d.vp_offset_y-i))),h.setStyles(o,{left:e,top:t}),l.element.update(),l.isMenuVisible=1,l.mouseClickFunc=v.add(o,"click",function(e){var t;if((e=e.target)&&(e=h.getParent(e,"tr"))&&!h.hasClass(e,p+"ItemSub")){if((t=l.items[e.id]).isDisabled())return;for(c=l;c;)c.hideMenu&&c.hideMenu(),c=c.settings.parent;return t.settings.onclick&&t.settings.onclick(e),!1}}),l.hasMenus()&&(l.mouseOverFunc=v.add(o,"mouseover",function(e){var t,n;if((e=e.target)&&(e=h.getParent(e,"tr"))){if(t=l.items[e.id],l.lastMenu&&l.lastMenu.collapse(1),t.isDisabled())return;e&&h.hasClass(e,p+"ItemSub")&&(n=h.getRect(e),t.showMenu(n.x+n.w-f,n.y-f,n.x),l.lastMenu=t,h.addClass(h.get(t.id).firstChild,p+"ItemActive"))}})),v.add(o,"keydown",l._keyHandler,l),l.onShowMenu.dispatch(l),d.keyboard_focus&&l._setupKeyboardNav())},hideMenu:function(e){var t,n=this,o=h.get("menu_"+n.id);n.isMenuVisible&&(n.keyboardNav&&n.keyboardNav.destroy(),v.remove(o,"mouseover",n.mouseOverFunc),v.remove(o,"click",n.mouseClickFunc),v.remove(o,"keydown",n._keyHandler),h.hide(o),n.isMenuVisible=0,e||n.collapse(1),n.element&&n.element.hide(),(t=h.get(n.id))&&h.removeClass(t.firstChild,n.classPrefix+"ItemActive"),n.onHideMenu.dispatch(n))},add:function(e){var t,n=this;return e=n.parent(e),n.isRendered&&(t=h.get("menu_"+n.id))&&n._add(h.select("tbody",t)[0],e),e},collapse:function(e){this.parent(e),this.hideMenu(1)},remove:function(e){return h.remove(e.id),this.destroy(),this.parent(e)},destroy:function(){var e=this,t=h.get("menu_"+e.id);e.keyboardNav&&e.keyboardNav.destroy(),v.remove(t,"mouseover",e.mouseOverFunc),v.remove(h.select("a",t),"focus",e.mouseOverFunc),v.remove(t,"click",e.mouseClickFunc),v.remove(t,"keydown",e._keyHandler),e.element&&e.element.remove(),h.remove(t)},renderNode:function(){var e,t,n,o,r=this,i=r.settings;return o=h.create("div",{role:"listbox",id:"menu_"+r.id,"class":i["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),r.settings.parent&&h.setAttrib(o,"aria-parent","menu_"+r.settings.parent.id),n=h.add(o,"div",{role:"presentation",id:"menu_"+r.id+"_co","class":r.classPrefix+(i["class"]?" "+i["class"]:"")}),r.element=new y("menu_"+r.id,{blocker:1,container:i.container}),i.menu_line&&h.add(n,"span",{"class":r.classPrefix+"Line"}),e=h.add(n,"table",{role:"presentation",id:"menu_"+r.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),t=h.add(e,"tbody"),g(r.items,function(e){r._add(t,e)}),r.rendered=!0,o},_setupKeyboardNav:function(){var e,t,n=this;e=h.get("menu_"+n.id),(t=h.select("a[role=option]","menu_"+n.id)).splice(0,0,e),n.keyboardNav=new m.ui.KeyboardNavigation({root:"menu_"+n.id,items:t,onCancel:function(){n.hideMenu()},enableUpDown:!0}),e.focus()},_keyHandler:function(e){var t=this;switch(e.keyCode){case 37:t.settings.parent&&(t.hideMenu(),t.settings.parent.focus(),v.cancel(e));break;case 39:t.mouseOverFunc&&t.mouseOverFunc(e)}},_add:function(e,t){var n,o,r,i,a,s=t.settings,c=this.classPrefix;if(s.separator)return r=h.add(e,"tr",{id:t.id,"class":c+"ItemSeparator"}),h.add(r,"td",{"class":c+"ItemSeparator"}),void((n=r.previousSibling)&&h.addClass(n,"mceLast"));n=r=h.add(e,"tr",{id:t.id,"class":c+"Item "+c+"ItemEnabled"}),n=i=h.add(n,s.titleItem?"th":"td"),n=o=h.add(n,"a",{id:t.id+"_aria",role:s.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),s.parent&&(h.setAttrib(o,"aria-haspopup","true"),h.setAttrib(o,"aria-owns","menu_"+t.id)),h.addClass(i,s["class"]),a=h.add(n,"span",{"class":"mceIcon"+(s.icon?" mce_"+s.icon:"")}),s.icon_src&&h.add(a,"img",{src:s.icon_src}),n=h.add(n,s.element||"span",{"class":"mceText",title:t.settings.title},t.settings.title),t.settings.style&&("function"==typeof t.settings.style&&(t.settings.style=t.settings.style()),h.setAttrib(n,"style",t.settings.style)),1==e.childNodes.length&&h.addClass(r,"mceFirst"),(n=r.previousSibling)&&h.hasClass(n,c+"ItemSeparator")&&h.addClass(r,"mceFirst"),t.collapse&&h.addClass(r,c+"ItemSub"),(n=r.previousSibling)&&h.removeClass(n,"mceLast"),h.addClass(r,"mceLast")}})}(tinymce),function(r){var i=r.DOM;r.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,t,n){this.parent(e,t,n),this.classPrefix="mceButton"},renderHTML:function(){var e,t,n=this.classPrefix,o=this.settings;return t=i.encode(o.label||""),
e='<a role="button" id="'+this.id+'" href="javascript:;" class="'+n+" "+n+"Enabled "+o["class"]+(t?" "+n+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+i.encode(o.title)+'">',!o.image||this.editor&&this.editor.forcedHighContrastMode?e+='<span class="mceIcon '+o["class"]+'"></span>'+(t?'<span class="'+n+'Label">'+t+"</span>":""):e+='<span class="mceIcon '+o["class"]+'"><img class="mceIcon" src="'+o.image+'" alt="'+i.encode(o.title)+'" /></span>'+(t?'<span class="'+n+'Label">'+t+"</span>":""),e+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+o.title+"</span>",e+="</a>"},postRender:function(){var t,n=this,o=n.settings;r.isIE&&n.editor&&r.dom.Event.add(n.id,"mousedown",function(){var e=n.editor.selection.getNode().nodeName;t="IMG"===e?n.editor.selection.getBookmark():null}),r.dom.Event.add(n.id,"click",function(e){if(!n.isDisabled())return r.isIE&&n.editor&&null!==t&&n.editor.selection.moveToBookmark(t),o.onclick.call(o.scope,e)}),r.dom.Event.add(n.id,"keyup",function(e){if(!n.isDisabled()&&e.keyCode==r.VK.SPACEBAR)return o.onclick.call(o.scope,e)})}})}(tinymce),function(r){var i,a=r.DOM,s=r.dom.Event,c=r.each,l=r.util.Dispatcher;r.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(e,t,n){var o=this;o.parent(e,t,n),o.items=[],o.onChange=new l(o),o.onPostRender=new l(o),o.onAdd=new l(o),o.onRenderMenu=new r.util.Dispatcher(this),o.classPrefix="mceListBox",o.marked={}},select:function(t){var n,o,r=this;if(r.marked={},t==i)return r.selectByIndex(-1);o=t&&"function"==typeof t?t:function(e){return e==t},t!=r.selectedValue&&(c(r.items,function(e,t){if(o(e.value))return n=1,r.selectByIndex(t),!1}),n||r.selectByIndex(-1))},selectByIndex:function(e){var t,n,o,r=this;r.marked={},e!=r.selectedIndex&&(t=a.get(r.id+"_text"),o=a.get(r.id+"_voiceDesc"),(n=r.items[e])?(r.selectedValue=n.value,r.selectedIndex=e,a.setHTML(t,a.encode(n.title)),a.setHTML(o,r.settings.title+" - "+n.title),a.removeClass(t,"mceTitle"),a.setAttrib(r.id,"aria-valuenow",n.title)):(a.setHTML(t,a.encode(r.settings.title)),a.setHTML(o,a.encode(r.settings.title)),a.addClass(t,"mceTitle"),r.selectedValue=r.selectedIndex=null,a.setAttrib(r.id,"aria-valuenow",r.settings.title)),t=0)},mark:function(e){this.marked[e]=!0},add:function(e,t,n){var o=this;n=n||{},n=r.extend(n,{title:e,value:t}),o.items.push(n),o.onAdd.dispatch(o,n)},getLength:function(){return this.items.length},renderHTML:function(){var e="",t=this,n=t.settings,o=t.classPrefix;return e='<span role="listbox" aria-haspopup="true" aria-labelledby="'+t.id+'_voiceDesc" aria-describedby="'+t.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+t.id+'" cellpadding="0" cellspacing="0" class="'+o+" "+o+"Enabled"+(n["class"]?" "+n["class"]:"")+'"><tbody><tr>',e+="<td>"+a.createHTML("span",{id:t.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},t.settings.title),e+=a.createHTML("a",{id:t.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},a.encode(t.settings.title))+"</td>",e+="<td>"+a.createHTML("a",{id:t.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25bc</span></span>')+"</td>",e+="</tr></tbody></table></span>"},showMenu:function(){var e,t,n=this,o=a.get(this.id);if(!n.isDisabled()&&0!==n.items.length){if(n.menu&&n.menu.isMenuVisible)return n.hideMenu();n.isMenuRendered||(n.renderMenu(),n.isMenuRendered=!0),e=a.getPos(o),(t=n.menu).settings.offset_x=e.x,t.settings.offset_y=e.y,t.settings.keyboard_focus=!r.isOpera,c(n.items,function(e){t.items[e.id]&&t.items[e.id].setSelected(0)}),c(n.items,function(e){t.items[e.id]&&n.marked[e.value]&&t.items[e.id].setSelected(1),e.value===n.selectedValue&&t.items[e.id].setSelected(1)}),t.showMenu(0,o.clientHeight),s.add(a.doc,"mousedown",n.hideMenu,n),a.addClass(n.id,n.classPrefix+"Selected")}},hideMenu:function(e){var t=this;if(t.menu&&t.menu.isMenuVisible){if(a.removeClass(t.id,t.classPrefix+"Selected"),e&&"mousedown"==e.type&&(e.target.id==t.id+"_text"||e.target.id==t.id+"_open"))return;e&&a.getParent(e.target,".mceMenu")||(a.removeClass(t.id,t.classPrefix+"Selected"),s.remove(a.doc,"mousedown",t.hideMenu,t),t.menu.hideMenu())}},renderMenu:function(){var t,n=this;(t=n.settings.control_manager.createDropMenu(n.id+"_menu",{menu_line:1,"class":n.classPrefix+"Menu mceNoIcons",max_width:250,max_height:150})).onHideMenu.add(function(){n.hideMenu(),n.focus()}),t.add({title:n.settings.title,"class":"mceMenuItemTitle",onclick:function(){!1!==n.settings.onselect("")&&n.select("")}}),c(n.items,function(e){e.value===i?t.add({title:e.title,role:"option","class":"mceMenuItemTitle",onclick:function(){!1!==n.settings.onselect("")&&n.select("")}}):(e.id=a.uniqueId(),e.role="option",e.onclick=function(){!1!==n.settings.onselect(e.value)&&n.select(e.value)},t.add(e))}),n.onRenderMenu.dispatch(n,t),n.menu=t},postRender:function(){var n=this,e=n.classPrefix;s.add(n.id,"click",n.showMenu,n),s.add(n.id,"keydown",function(e){32==e.keyCode&&(n.showMenu(e),s.cancel(e))}),s.add(n.id,"focus",function(){n._focused||(n.keyDownHandler=s.add(n.id,"keydown",function(e){40==e.keyCode&&(n.showMenu(),s.cancel(e))}),n.keyPressHandler=s.add(n.id,"keypress",function(e){var t;13==e.keyCode&&(t=n.selectedValue,n.selectedValue=null,s.cancel(e),n.settings.onselect(t))})),n._focused=1}),s.add(n.id,"blur",function(){s.remove(n.id,"keydown",n.keyDownHandler),s.remove(n.id,"keypress",n.keyPressHandler),n._focused=0}),!r.isIE6&&a.boxModel||(s.add(n.id,"mouseover",function(){a.hasClass(n.id,e+"Disabled")||a.addClass(n.id,e+"Hover")}),s.add(n.id,"mouseout",function(){a.hasClass(n.id,e+"Disabled")||a.removeClass(n.id,e+"Hover")})),n.onPostRender.dispatch(n,a.get(n.id))},destroy:function(){this.parent(),s.clear(this.id+"_text"),s.clear(this.id+"_open")}})}(tinymce),function(a){var e,s=a.DOM,c=a.dom.Event,i=a.each;a.util.Dispatcher;a.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(e,t){this.parent(e,t),this.classPrefix="mceNativeListBox"},setDisabled:function(e){s.get(this.id).disabled=e,this.setAriaProperty("disabled",e)},isDisabled:function(){return s.get(this.id).disabled},select:function(t){var n,o,r=this;if(t==e)return r.selectByIndex(-1);o=t&&"function"==typeof t?t:function(e){return e==t},t!=r.selectedValue&&(i(r.items,function(e,t){if(o(e.value))return n=1,r.selectByIndex(t),!1}),n||r.selectByIndex(-1))},selectByIndex:function(e){s.get(this.id).selectedIndex=e+1,this.selectedValue=this.items[e]?this.items[e].value:null},add:function(e,t,n){var o,r=this;(n=n||{}).value=t,r.isRendered()&&s.add(s.get(this.id),"option",n,e),o={title:e,value:t,attribs:n},r.items.push(o),r.onAdd.dispatch(r,o)},getLength:function(){return this.items.length},renderHTML:function(){var t,e=this;return t=s.createHTML("option",{value:""},"-- "+e.settings.title+" --"),i(e.items,function(e){t+=s.createHTML("option",{value:e.value},e.title)}),t=s.createHTML("select",{id:e.id,"class":"mceNativeListBox","aria-labelledby":e.id+"_aria"},t),t+=s.createHTML("span",{id:e.id+"_aria",style:"display: none"},e.settings.title)},postRender:function(){function n(e){var t=r.items[e.target.selectedIndex-1];t&&(t=t.value)&&(r.onChange.dispatch(r,t),r.settings.onselect&&r.settings.onselect(t))}var o,r=this,i=!0;r.rendered=!0,c.add(r.id,"change",n),c.add(r.id,"keydown",function(e){var t;return c.remove(r.id,"change",o),i=!1,t=c.add(r.id,"blur",function(){i||(i=!0,c.add(r.id,"change",n),c.remove(r.id,"blur",t))}),!a.isWebKit||37!=e.keyCode&&39!=e.keyCode?13==e.keyCode||32==e.keyCode?(n(e),c.cancel(e)):void 0:c.prevent(e)}),r.onPostRender.dispatch(r,s.get(r.id))}})}(tinymce),function(o){var r=o.DOM,i=o.dom.Event;o.each;o.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(e,t,n){this.parent(e,t,n),this.onRenderMenu=new o.util.Dispatcher(this),t.menu_container=t.menu_container||r.doc.body},showMenu:function(){var e,t,n=this,o=r.get(n.id);if(!n.isDisabled()){if(n.isMenuRendered||(n.renderMenu(),n.isMenuRendered=!0),n.isMenuVisible)return n.hideMenu();r.getPos(n.settings.menu_container),e=r.getPos(o),(t=n.menu).settings.offset_x=e.x,t.settings.offset_y=e.y,t.settings.vp_offset_x=e.x,t.settings.vp_offset_y=e.y,t.settings.keyboard_focus=n._focused,t.showMenu(0,o.firstChild.clientHeight),i.add(r.doc,"mousedown",n.hideMenu,n),n.setState("Selected",1),n.isMenuVisible=1}},renderMenu:function(){var e,t=this;(e=t.settings.control_manager.createDropMenu(t.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:t.settings.icons})).onHideMenu.add(function(){t.hideMenu(),t.focus()}),t.onRenderMenu.dispatch(t,e),t.menu=e},hideMenu:function(e){var t=this;e&&"mousedown"==e.type&&r.getParent(e.target,function(e){return e.id===t.id||e.id===t.id+"_open"})||(e&&r.getParent(e.target,".mceMenu")||(t.setState("Selected",0),i.remove(r.doc,"mousedown",t.hideMenu,t),t.menu&&t.menu.hideMenu()),t.isMenuVisible=0)},postRender:function(){var e=this,t=e.settings;i.add(e.id,"click",function(){e.isDisabled()||(t.onclick&&t.onclick(e.value),e.showMenu())})}})}(tinymce),function(e){var r=e.DOM,i=e.dom.Event;e.each;e.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(e,t,n){this.parent(e,t,n),this.classPrefix="mceSplitButton"},renderHTML:function(){var e,t,n=this,o=n.settings;return e="<tbody><tr>",t=o.image?r.createHTML("img ",{src:o.image,role:"presentation","class":"mceAction "+o["class"]}):r.createHTML("span",{"class":"mceAction "+o["class"]},""),t+=r.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:n.id+"_voice",style:"display:none;"},o.title),e+="<td >"+r.createHTML("a",{role:"button",id:n.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+o["class"],onclick:"return false;",onmousedown:"return false;",title:o.title},t)+"</td>",t=r.createHTML("span",{"class":"mceOpen "+o["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25bc</span>'),e+="<td >"+r.createHTML("a",{role:"button",id:n.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+o["class"],onclick:"return false;",onmousedown:"return false;",title:o.title},t)+"</td>",e+="</tr></tbody>",e=r.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+o["class"],cellpadding:"0",cellspacing:"0",title:o.title},e),r.createHTML("div",{id:n.id,role:"button",tabindex:"0","aria-labelledby":n.id+"_voice","aria-haspopup":"true"},e)},postRender:function(){var n,o=this,t=o.settings;t.onclick&&(n=function(e){o.isDisabled()||(t.onclick(o.value),i.cancel(e))},i.add(o.id+"_action","click",n),i.add(o.id,["click","keydown"],function(e){var t=40;32!==e.keyCode&&13!==e.keyCode&&14!==e.keyCode||e.altKey||e.ctrlKey||e.metaKey?"click"!==e.type&&e.keyCode!==t||(o.showMenu(),i.cancel(e)):(n(),i.cancel(e))})),i.add(o.id+"_open","click",function(e){o.showMenu(),i.cancel(e)}),i.add([o.id,o.id+"_open"],"focus",function(){o._focused=1}),i.add([o.id,o.id+"_open"],"blur",function(){o._focused=0}),!e.isIE6&&r.boxModel||(i.add(o.id,"mouseover",function(){r.hasClass(o.id,"mceSplitButtonDisabled")||r.addClass(o.id,"mceSplitButtonHover")}),i.add(o.id,"mouseout",function(){r.hasClass(o.id,"mceSplitButtonDisabled")||r.removeClass(o.id,"mceSplitButtonHover")}))},destroy:function(){this.parent(),i.clear(this.id+"_action"),i.clear(this.id+"_open"),i.clear(this.id)}})}(tinymce),function(l){var d=l.DOM,u=l.dom.Event,f=l.is,p=l.each;l.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(e,t,n){var o=this;o.parent(e,t,n),o.settings=t=l.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},o.settings),o.onShowMenu=new l.util.Dispatcher(o),o.onHideMenu=new l.util.Dispatcher(o),o.value=t.default_color},showMenu:function(){var e,t,n=this;if(!n.isDisabled()){if(n.isMenuRendered||(n.renderMenu(),n.isMenuRendered=!0),n.isMenuVisible)return n.hideMenu();e=d.get(n.id),d.show(n.id+"_menu"),d.addClass(e,"mceSplitButtonSelected"),t=d.getPos(e),d.setStyles(n.id+"_menu",{left:t.x,top:t.y+e.firstChild.clientHeight,zIndex:2e5}),e=0,u.add(d.doc,"mousedown",n.hideMenu,n),n.onShowMenu.dispatch(n),n._focused&&(n._keyHandler=u.add(n.id+"_menu","keydown",function(e){27==e.keyCode&&n.hideMenu()}),d.select("a",n.id+"_menu")[0].focus()),n.keyboardNav=new l.ui.KeyboardNavigation({root:n.id+"_menu",items:d.select("a",n.id+"_menu"),onCancel:function(){n.hideMenu(),n.focus()}}),n.keyboardNav.focus(),n.isMenuVisible=1}},hideMenu:function(e){var t=this;if(t.isMenuVisible){if(e&&"mousedown"==e.type&&d.getParent(e.target,function(e){return e.id===t.id+"_open"}))return;e&&d.getParent(e.target,".mceSplitButtonMenu")||(d.removeClass(t.id,"mceSplitButtonSelected"),u.remove(d.doc,"mousedown",t.hideMenu,t),u.remove(t.id+"_menu","keydown",t._keyHandler),d.hide(t.id+"_menu")),t.isMenuVisible=0,t.onHideMenu.dispatch(),t.keyboardNav.destroy()}},renderMenu:function(){var e,n,o,r,t,i,a=this,s=0,c=a.settings;return t=d.add(c.menu_container,"div",{role:"listbox",id:a.id+"_menu","class":c.menu_class+" "+c["class"],style:"position:absolute;left:0;top:-1000px;"}),e=d.add(t,"div",{"class":c["class"]+" mceSplitButtonMenu"}),d.add(e,"span",{"class":"mceMenuLine"}),n=d.add(e,"table",{role:"presentation","class":"mceColorSplitMenu"}),o=d.add(n,"tbody"),s=0,p(f(c.colors,"array")?c.colors:c.colors.split(","),function(e){e=e.replace(/^#/,""),s--||(r=d.add(o,"tr"),s=c.grid_width-1),n=d.add(r,"td");var t={href:"javascript:;",style:{backgroundColor:"#"+e},title:a.editor.getLang("colors."+e,e),"data-mce-color":"#"+e};l.isIE||(t.role="option"),n=d.add(n,"a",t),a.editor.forcedHighContrastMode&&((n=d.add(n,"canvas",{width:16,height:16,"aria-hidden":"true"})).getContext&&(i=n.getContext("2d"))?(i.fillStyle="#"+e,i.fillRect(0,0,16,16)):d.remove(n))}),c.more_colors_func&&(n=d.add(o,"tr"),n=d.add(n,"td",{colspan:c.grid_width,"class":"mceMoreColors"}),n=d.add(n,"a",{role:"option",id:a.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},c.more_colors_title),u.add(n,"click",function(e){return c.more_colors_func.call(c.more_colors_scope||this),u.cancel(e)})),d.addClass(e,"mceColorSplitMenu"),u.add(a.id+"_menu","mousedown",function(e){return u.cancel(e)}),u.add(a.id+"_menu","click",function(e){var t;return(e=d.getParent(e.target,"a",o))&&"a"==e.nodeName.toLowerCase()&&(t=e.getAttribute("data-mce-color"))&&a.setColor(t),!1}),t},setColor:function(e){this.displayColor(e),this.hideMenu(),this.settings.onselect(e)},displayColor:function(e){var t=this;d.setStyle(t.id+"_preview","backgroundColor",e),t.value=e},postRender:function(){var e=this,t=e.id;e.parent(),d.add(t+"_action","div",{id:t+"_preview","class":"mceColorPreview"}),d.setStyle(e.id+"_preview","backgroundColor",e.value)},destroy:function(){var e=this;e.parent(),u.clear(e.id+"_menu"),u.clear(e.id+"_more"),d.remove(e.id+"_menu"),e.keyboardNav&&e.keyboardNav.destroy()}})}(tinymce),function(i){var a=i.DOM,n=i.each,t=i.dom.Event;i.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var e=this,t=[],n=e.controls,o=i.each,r=e.settings;return t.push('<div id="'+e.id+'" role="group" aria-labelledby="'+e.id+'_voice">'),t.push("<span role='application'>"),t.push('<span id="'+e.id+'_voice" class="mceVoiceLabel" style="display:none;">'+a.encode(r.name)+"</span>"),o(n,function(e){t.push(e.renderHTML())}),t.push("</span>"),t.push("</div>"),t.join("")},focus:function(){var e=this;a.get(e.id).focus()},postRender:function(){var e=this,t=[];n(e.controls,function(e){n(e.controls,function(e){e.id&&t.push(e)})}),e.keyNav=new i.ui.KeyboardNavigation({root:e.id,items:t,onCancel:function(){i.isWebKit&&a.get(e.editor.id+"_ifr").focus(),e.editor.focus()},excludeFromTabOrder:!e.settings.tab_focus_toolbar})},destroy:function(){var e=this;e.parent(),e.keyNav.destroy(),t.clear(e.id)}})}(tinymce),function(e){var l=e.DOM;e.each;e.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var e,t,n,o,r,i,a=this,s="",c=a.settings;for(i=a.controls,n=0;n<i.length;n++)t=i[n],o=i[n-1],r=i[n+1],0===n&&(e="mceToolbarStart",t.Button?e+=" mceToolbarStartButton":t.SplitButton?e+=" mceToolbarStartSplitButton":t.ListBox&&(e+=" mceToolbarStartListBox"),s+=l.createHTML("td",{"class":e},l.createHTML("span",null,"<!-- IE -->"))),o&&t.ListBox&&(o.Button||o.SplitButton)&&(s+=l.createHTML("td",{"class":"mceToolbarEnd"},l.createHTML("span",null,"<!-- IE -->"))),l.stdMode?s+='<td style="position: relative">'+t.renderHTML()+"</td>":s+="<td>"+t.renderHTML()+"</td>",r&&t.ListBox&&(r.Button||r.SplitButton)&&(s+=l.createHTML("td",{"class":"mceToolbarStart"},l.createHTML("span",null,"<!-- IE -->")));return e="mceToolbarEnd",t.Button?e+=" mceToolbarEndButton":t.SplitButton?e+=" mceToolbarEndSplitButton":t.ListBox&&(e+=" mceToolbarEndListBox"),s+=l.createHTML("td",{"class":e},l.createHTML("span",null,"<!-- IE -->")),l.createHTML("table",{id:a.id,"class":"mceToolbar"+(c["class"]?" "+c["class"]:""),cellpadding:"0",cellspacing:"0",align:a.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+s+"</tr></tbody>")}})}(tinymce),function(s){var t=s.util.Dispatcher;s.each;s.create("tinymce.AddOnManager",{AddOnManager:function(){var e=this;e.items=[],e.urls={},e.lookup={},e.onAdd=new t(e)},get:function(e){return this.lookup[e]?this.lookup[e].instance:undefined},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(e){var t=s.settings;t&&t.language&&!1!==t.language_load&&s.ScriptLoader.add(this.urls[e]+"/langs/"+t.language+".js")},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},this.onAdd.dispatch(this,e,t),t},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(e,t){var n=this.urls[e];s.each(t,function(e){s.ScriptLoader.add(n+"/"+e)})},load:function(t,n,o,r){function e(){var e=i.dependencies(t);s.each(e,function(e){var t=i.createUrl(n,e);i.load(t.resource,t,undefined,undefined)}),o&&(r?o.call(r):o.call(s.ScriptLoader))}var i=this,a=n;i.urls[t]||("object"==typeof n&&(a=n.prefix+n.resource+n.suffix),0!==a.indexOf("/")&&-1==a.indexOf("://")&&(a=s.baseURL+"/"+a),i.urls[t]=a.substring(0,a.lastIndexOf("/")),i.lookup[t]?e():s.ScriptLoader.add(a,e,r))}}),s.PluginManager=new s.AddOnManager,s.ThemeManager=new s.AddOnManager}(tinymce),function(l){var t,d=l.each,e=l.extend,u=l.DOM,n=l.dom.Event,f=(l.ThemeManager,l.PluginManager,l.explode),o=l.util.Dispatcher,p=0;l.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(l.documentBaseURL)||(l.documentBaseURL+="/"),l.baseURL=new l.util.URI(l.documentBaseURL).toAbsolute(l.baseURL),l.baseURI=new l.util.URI(l.baseURL),l.onBeforeUnload=new o(l),n.add(window,"beforeunload",function(e){l.onBeforeUnload.dispatch(l,e)}),l.onAddEditor=new o(l),l.onRemoveEditor=new o(l),l.EditorManager=e(l,{editors:[],i18n:{},activeEditor:null,init:function(o){function r(e){var t=e.id;return t||(t=(t=e.name)&&!u.get(t)?e.name:u.uniqueId(),e.setAttribute("id",t)),t}function i(e,t,n){var o=e[t];if(o)return l.is(o,"string")&&(n=(n=o.replace(/\.\w+$/,""))?l.resolve(n):0,o=l.resolve(o)),o.apply(n||this,Array.prototype.slice.call(arguments,2))}function a(e,t){return t.constructor===RegExp?t.test(e.className):u.hasClass(e,t)}var s,e=this,c=(l.ScriptLoader,[]);e.settings=o,n.bind(window,"ready",function(){var t,n;switch(i(o,"onpageload"),o.mode){case"exact":0<(t=o.elements||"").length&&d(f(t),function(t){u.get(t)?(s=new l.Editor(t,o),c.push(s),s.render(1)):d(document.forms,function(e){d(e.elements,function(e){e.name===t&&(t="mce_editor_"+p++,u.setAttrib(e,"id",t),s=new l.Editor(t,o),c.push(s),s.render(1))})})});break;case"textareas":case"specific_textareas":d(u.select("textarea"),function(e){o.editor_deselector&&a(e,o.editor_deselector)||o.editor_selector&&!a(e,o.editor_selector)||(s=new l.Editor(r(e),o),c.push(s),s.render(1))});break;default:o.types?d(o.types,function(n){d(u.select(n.selector),function(e){var t=new l.Editor(r(e),l.extend({},o,n));c.push(t),t.render(1)})}):o.selector&&d(u.select(o.selector),function(e){var t=new l.Editor(r(e),o);c.push(t),t.render(1)})}o.oninit&&(t=n=0,d(c,function(e){n++,e.initialized?t++:e.onInit.add(function(){++t==n&&i(o,"oninit")}),t==n&&i(o,"oninit")}))})},get:function(e){return e===t?this.editors:this.editors.hasOwnProperty(e)?this.editors[e]:t},getInstanceById:function(e){return this.get(e)},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),t._setActive(e),t.onAddEditor.dispatch(t,e),e},remove:function(e){var t,n=this,o=n.editors;if(!o[e.id])return null;for(delete o[e.id],t=0;t<o.length;t++)if(o[t]==e){o.splice(t,1);break}return n.activeEditor==e&&n._setActive(o[0]),e.destroy(),n.onRemoveEditor.dispatch(n,e),e},execCommand:function(e,t,n){function o(){a.destroy(),r.detachEvent("onunload",o),r=r.tinyMCE=r.tinymce=null}var r,i=this,a=i.get(n);switch(e){case"mceFocus":return a.focus(),!0;case"mceAddEditor":case"mceAddControl":return i.get(n)||new l.Editor(n,i.settings).render(),!0;case"mceAddFrameControl":return(r=n.window).tinyMCE=tinyMCE,(r.tinymce=l).DOM.doc=r.document,l.DOM.win=r,(a=new l.Editor(n.element_id,n)).render(),l.isIE&&r.attachEvent("onunload",o),!(n.page_window=null);case"mceRemoveEditor":case"mceRemoveControl":return a&&a.remove(),!0;case"mceToggleEditor":return a?a.isHidden()?a.show():a.hide():i.execCommand("mceAddControl",0,n),!0}return!!i.activeEditor&&i.activeEditor.execCommand(e,t,n)},execInstanceCommand:function(e,t,n,o){var r=this.get(e);return!!r&&r.execCommand(t,n,o)},triggerSave:function(){d(this.editors,function(e){e.save()})},addI18n:function(n,e){var r=this.i18n;l.is(n,"string")?d(e,function(e,t){r[n+"."+t]=e}):d(n,function(e,o){d(e,function(e,n){d(e,function(e,t){"common"===n?r[o+"."+t]=e:r[o+"."+n+"."+t]=e})})})},_setActive:function(e){this.selectedInstance=this.activeEditor=e}})}(tinymce),function(m){var h=m.DOM,i=m.dom.Event,c=m.extend,g=m.each,n=m.isGecko,v=m.isIE,a=(m.isWebKit,m.is),y=m.ThemeManager,b=m.PluginManager,C=m.explode;m.create("tinymce.Editor",{Editor:function(e,t){var n=this,o=!0;n.settings=t=c({id:e,language:"en",theme:"advanced",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:m.documentBaseURL,add_form_submit_trigger:o,submit_patch:o,add_unload_trigger:o,convert_urls:o,relative_urls:o,remove_script_host:o,table_inline_editing:!1,object_resizing:o,accessibility_focus:o,doctype:m.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual:o,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:o,directionality:"ltr",forced_root_block:"p",hidden_input:o,padd_empty_editor:o,render_ui:o,indentation:"30px",fix_table_elements:o,inline_styles:o,convert_fonts_to_spans:o,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:o,entity_encoding:"named",url_converter:n.convertURL,url_converter_scope:n,ie7_compat:o},t),n.id=n.editorId=e,n.isNotDirty=!1,n.plugins={},n.documentBaseURI=new m.util.URI(t.document_base_url||m.documentBaseURL,{base_uri:tinyMCE.baseURI}),n.baseURI=m.baseURI,n.contentCSS=[],n.contentStyles=[],n.setupEvents(),n.execCommands={},n.queryStateCommands={},n.queryValueCommands={},n.execCallback("setup",n)},render:function(){function e(){n.language&&!1!==n.language_load&&r.add(m.baseURL+"/langs/"+n.language+".js"),n.theme&&"function"!=typeof n.theme&&"-"!=n.theme.charAt(0)&&!y.urls[n.theme]&&y.load(n.theme,"themes/"+n.theme+"/editor_template"+m.suffix+".js"),g(C(n.plugins),function(e){if(e&&!b.urls[e])if("-"==e.charAt(0)){e=e.substr(1,e.length);var t=b.dependencies(e);g(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/editor_plugin"+m.suffix+".js"};e=b.createUrl(t,e),b.load(e.resource,e)})}else{if("safari"==e)return;b.load(e,{prefix:"plugins/",resource:e,suffix:"/editor_plugin"+m.suffix+".js"})}}),r.loadQueue(function(){t.removed||t.init()})}var t=this,n=t.settings,o=t.id,r=m.ScriptLoader;i.domLoaded?(tinyMCE.settings=n,t.getElement()&&(m.isIDevice&&!m.isIOS5||(!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&n.hidden_input&&h.getParent(o,"form")&&h.insertAfter(h.create("input",{type:"hidden",name:o}),o),n.content_editable||(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden"),m.WindowManager&&(t.windowManager=new m.WindowManager(t)),"xml"==n.encoding&&t.onGetContent.add(function(e,t){t.save&&(t.content=h.encode(t.content))}),n.add_form_submit_trigger&&t.onSubmit.addToTop(function(){t.initialized&&(t.save(),t.isNotDirty=1)}),n.add_unload_trigger&&(t._beforeUnload=tinyMCE.onBeforeUnload.add(function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0})})),m.addUnload(t.destroy,t),n.submit_patch&&t.onBeforeRenderUI.add(function(){var e=t.getElement().form;e&&(e._mceOldSubmit||(e.submit.nodeType||e.submit.length||((t.formElement=e)._mceOldSubmit=e.submit,e.submit=function(){return m.triggerSave(),t.isNotDirty=1,t.formElement._mceOldSubmit(t.formElement)}),e=null))}),e()))):i.add(window,"ready",function(){t.render()})},init:function(){function r(e){var t,n=b.get(e),o=b.urls[e]||m.documentBaseURL.replace(/\/$/,"");n&&-1===m.inArray(p,e)&&(g(b.dependencies(e),function(e){r(e)}),t=new n(d,o),(d.plugins[e]=t).init&&(t.init(d,o),p.push(e)))}var e,t,n,o,i,a,s,c,l,d=this,u=d.settings,f=d.getElement(),p=[];if(m.add(d),u.aria_label=u.aria_label||h.getAttrib(f,"aria-label",d.getLang("aria.rich_text_area")),u.theme&&("function"!=typeof u.theme?(u.theme=u.theme.replace(/-/,""),o=y.get(u.theme),d.theme=new o,d.theme.init&&d.theme.init(d,y.urls[u.theme]||m.documentBaseURL.replace(/\/$/,""))):d.theme=u.theme),g(C(u.plugins.replace(/\-/g,"")),r),!1!==u.popup_css&&(u.popup_css?u.popup_css=d.documentBaseURI.toAbsolute(u.popup_css):u.popup_css=d.baseURI.toAbsolute("themes/"+u.theme+"/skins/"+u.skin+"/dialog.css")),u.popup_css_add&&(u.popup_css+=","+d.documentBaseURI.toAbsolute(u.popup_css_add)),d.controlManager=new m.ControlManager(d),d.onBeforeRenderUI.dispatch(d,d.controlManager),u.render_ui&&d.theme&&(d.orgDisplay=f.style.display,"function"!=typeof u.theme?(e=u.width||f.style.width||f.offsetWidth,t=u.height||f.style.height||f.offsetHeight,n=u.min_height||100,(c=/^[0-9\.]+(|px)$/i).test(""+e)&&(e=Math.max(parseInt(e,10)+(o.deltaWidth||0),100)),c.test(""+t)&&(t=Math.max(parseInt(t,10)+(o.deltaHeight||0),n)),o=d.theme.renderUI({targetNode:f,width:e,height:t,deltaWidth:u.delta_width,deltaHeight:u.delta_height}),h.setStyles(o.sizeContainer||o.editorContainer,{width:e,height:t}),(t=(o.iframeHeight||t)+("number"==typeof t?o.deltaHeight||0:""))<n&&(t=n)):((o=u.theme(d,f)).editorContainer.nodeType&&(o.editorContainer=o.editorContainer.id=o.editorContainer.id||d.id+"_parent"),o.iframeContainer.nodeType&&(o.iframeContainer=o.iframeContainer.id=o.iframeContainer.id||d.id+"_iframecontainer"),t=o.iframeHeight||f.offsetHeight,v&&d.onInit.add(function(e){e.dom.bind(e.getBody(),"beforedeactivate keydown",function(){e.lastIERng=e.selection.getRng()})})),d.editorContainer=o.editorContainer),u.content_css&&g(C(u.content_css),function(e){d.contentCSS.push(d.documentBaseURI.toAbsolute(e))}),u.content_style&&d.contentStyles.push(u.content_style),u.content_editable)return f=o=null,d.initContentBody();for(document.domain&&location.hostname!=document.domain&&(m.relaxedDomain=document.domain),d.iframeHTML=u.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',u.document_base_url!=m.documentBaseURL&&(d.iframeHTML+='<base href="'+d.documentBaseURI.getURI()+'" />'),m.isIE8&&(u.ie7_compat?d.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':d.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />'),d.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',l=0;l<d.contentCSS.length;l++)d.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+d.contentCSS[l]+'" />';d.contentCSS=[],-1!=(a=u.body_id||"tinymce").indexOf("=")&&(a=(a=d.getParam("body_id","","hash"))[d.id]||a),-1!=(s=u.body_class||"").indexOf("=")&&(s=(s=d.getParam("body_class","","hash"))[d.id]||""),d.iframeHTML+='</head><body id="'+a+'" class="mceContentBody '+s+'" onload="window.parent.tinyMCE.get(\''+d.id+"').onLoad.dispatch();\"><br></body></html>",m.relaxedDomain&&(v||m.isOpera&&parseFloat(opera.version())<11)&&(i='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+d.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()'),h.add(o.iframeContainer,"iframe",{id:d.id+"_ifr",src:i||'javascript:""',frameBorder:"0",allowTransparency:"true",title:u.aria_label,style:{width:"100%",height:t,display:"block"}}),d.contentAreaContainer=o.iframeContainer,o.editorContainer&&(h.get(o.editorContainer).style.display=d.orgDisplay),f.style.visibility=d.orgVisibility,h.get(d.id).style.display="none",h.setAttrib(d.id,"aria-hidden",!0),m.relaxedDomain&&i||d.initContentBody(),f=o=null},initContentBody:function(){var e,t,s=this,n=s.settings,o=h.get(s.id),r=s.getDoc();v&&m.relaxedDomain||n.content_editable||(r.open(),r.write(s.iframeHTML),r.close(),m.relaxedDomain&&(r.domain=m.relaxedDomain)),n.content_editable&&(h.addClass(o,"mceContentBody"),s.contentDocument=r=n.content_document||document,s.contentWindow=n.content_window||window,s.bodyElement=o,n.content_document=n.content_window=null),(e=s.getBody()).disabled=!0,n.readonly||(e.contentEditable=s.getParam("content_editable_state",!0)),e.disabled=!1,s.schema=new m.html.Schema(n),s.dom=new m.dom.DOMUtils(r,{keep_values:!0,url_converter:s.convertURL,url_converter_scope:s,hex_colors:n.force_hex_style_colors,class_filter:n.class_filter,update_styles:!0,root_element:n.content_editable?s.id:null,schema:s.schema}),s.parser=new m.html.DomParser(n,s.schema),s.parser.addAttributeFilter("src,href,style",function(e,t){for(var n,o,r,i=e.length,a=s.dom;i--;)o=(n=e[i]).attr(t),r="data-mce-"+t,n.attributes.map[r]||("style"===t?n.attr(r,a.serializeStyle(a.parseStyle(o),n.name)):n.attr(r,s.convertURL(o,t,n.name)))}),s.parser.addNodeFilter("script",function(e){for(var t,n=e.length;n--;)(t=e[n]).attr("type","mce-"+(t.attr("type")||"text/javascript"))}),s.parser.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)(t=e[n]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),s.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t,n=e.length,o=s.schema.getNonEmptyElements();n--;)(t=e[n]).isEmpty(o)&&(t.empty().append(new m.html.Node("br",1)).shortEnded=!0)}),s.serializer=new m.dom.Serializer(n,s.dom,s.schema),s.selection=new m.dom.Selection(s.dom,s.getWin(),s.serializer,s),s.formatter=new m.Formatter(s),s.undoManager=new m.UndoManager(s),s.forceBlocks=new m.ForceBlocks(s),s.enterKey=new m.EnterKey(s),s.editorCommands=new m.EditorCommands(s),s.onExecCommand.add(function(e,t){/^(FontName|FontSize)$/.test(t)||s.nodeChanged()}),s.serializer.onPreProcess.add(function(e,t){return s.onPreProcess.dispatch(s,t,e)}),s.serializer.onPostProcess.add(function(e,t){return s.onPostProcess.dispatch(s,t,e)}),s.onPreInit.dispatch(s),n.browser_spellcheck||n.gecko_spellcheck||(r.body.spellcheck=!1),n.readonly||s.bindNativeEvents(),s.controlManager.onPostRender.dispatch(s,s.controlManager),s.onPostRender.dispatch(s),s.quirks=m.util.Quirks(s),n.directionality&&(e.dir=n.directionality),n.nowrap&&(e.style.whiteSpace="nowrap"),n.protect&&s.onBeforeSetContent.add(function(e,t){g(n.protect,function(e){t.content=t.content.replace(e,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),s.onSetContent.add(function(){s.addVisual(s.getBody())}),n.padd_empty_editor&&s.onPostProcess.add(function(e,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),s.load({initial:!0,format:"html"}),s.startContent=s.getContent({format:"raw"}),s.initialized=!0,s.onInit.dispatch(s),s.execCallback(
"setupcontent_callback",s.id,e,r),s.execCallback("init_instance_callback",s),s.focus(!0),s.nodeChanged({initial:!0}),0<s.contentStyles.length&&(t="",g(s.contentStyles,function(e){t+=e+"\r\n"}),s.dom.addStyle(t)),g(s.contentCSS,function(e){s.dom.loadCSS(e)}),n.auto_focus&&setTimeout(function(){var e=m.get(n.auto_focus);e.selection.select(e.getBody(),1),e.selection.collapse(1),e.getBody().focus(),e.getWin().focus()},100),o=r=e=null},focus:function(e){var t,n,o,r,i=this,a=i.selection,s=i.settings.content_editable,c=i.getDoc();e||(i.lastIERng&&a.setRng(i.lastIERng),(n=a.getRng()).item&&(o=n.item(0)),i._refreshContentEditable(),s||i.getWin().focus(),(m.isGecko||s)&&((r=i.getBody()).setActive?r.setActive():r.focus(),s&&a.normalize()),o&&o.ownerDocument==c&&((n=c.body.createControlRange()).addElement(o),n.select())),m.activeEditor!=i&&(null!=(t=m.activeEditor)&&t.onDeactivate.dispatch(t,i),i.onActivate.dispatch(i,t)),m._setActive(i)},execCallback:function(e){var t,n=this,o=n.settings[e];if(o)return n.callbackLookup&&(t=n.callbackLookup[e])&&(o=t.func,t=t.scope),a(o,"string")&&(t=(t=o.replace(/\.\w+$/,""))?m.resolve(t):0,o=m.resolve(o),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[e]={func:o,scope:t}),o.apply(t||n,Array.prototype.slice.call(arguments,1))},translate:function(e){var n=this.settings.language||"en",o=m.i18n;return e?o[n+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,t){return o[n+"."+t]||"{#"+t+"}"}):""},getLang:function(e,t){return m.i18n[(this.settings.language||"en")+"."+e]||(a(t)?t:"{#"+e+"}")},getParam:function(e,t,n){var o,r=m.trim,i=a(this.settings[e])?this.settings[e]:t;return"hash"===n?(o={},a(i,"string")?g(0<i.indexOf("=")?i.split(/[;,](?![^=;,]*(?:[;,]|$))/):i.split(","),function(e){1<(e=e.split("=")).length?o[r(e[0])]=r(e[1]):o[r(e[0])]=r(e)}):o=i,o):i},nodeChanged:function(t){var e,n=this,o=n.selection;n.initialized&&(t=t||{},e=o.getStart()||n.getBody(),e=v&&e.ownerDocument!=n.getDoc()?n.getBody():e,t.parents=[],n.dom.getParent(e,function(e){if("BODY"==e.nodeName)return!0;t.parents.push(e)}),n.onNodeChange.dispatch(n,t&&t.controlManager||n.controlManager,e,o.isCollapsed(),t))},addButton:function(e,t){var n=this;n.buttons=n.buttons||{},n.buttons[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,n,o,r){var t,i=this;return!1!==i.settings.custom_shortcuts&&(i.shortcuts=i.shortcuts||{},a(o,"string")&&(t=o,o=function(){i.execCommand(t,!1,null)}),a(o,"object")&&(t=o,o=function(){i.execCommand(t[0],t[1],t[2])}),g(C(e),function(e){var t={func:o,scope:r||this,desc:i.translate(n),alt:!1,ctrl:!1,shift:!1};g(C(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":t[e]=!0;break;default:t.charCode=e.charCodeAt(0),t.keyCode=e.toUpperCase().charCodeAt(0)}}),i.shortcuts[(t.ctrl?"ctrl":"")+","+(t.alt?"alt":"")+","+(t.shift?"shift":"")+","+t.keyCode]=t}),!0)},execCommand:function(t,n,o,r){var e,i,a=this,s=0;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(t)||r&&r.skip_focus||a.focus(),r=c({},r),a.onBeforeExecCommand.dispatch(a,t,n,o,r),!r.terminate&&(a.execCallback("execcommand_callback",a.id,a.selection.getNode(),t,n,o)?(a.onExecCommand.dispatch(a,t,n,o,r),!0):(e=a.execCommands[t])&&!0!==(i=e.func.call(e.scope,n,o))?(a.onExecCommand.dispatch(a,t,n,o,r),i):(g(a.plugins,function(e){if(e.execCommand&&e.execCommand(t,n,o))return a.onExecCommand.dispatch(a,t,n,o,r),!(s=1)}),!!s||(a.theme&&a.theme.execCommand&&a.theme.execCommand(t,n,o)?(a.onExecCommand.dispatch(a,t,n,o,r),!0):a.editorCommands.execCommand(t,n,o)?(a.onExecCommand.dispatch(a,t,n,o,r),!0):(a.getDoc().execCommand(t,n,o),void a.onExecCommand.dispatch(a,t,n,o,r)))))},queryCommandState:function(e){var t,n,o=this;if(!o._isHidden()){if((t=o.queryStateCommands[e])&&!0!==(n=t.func.call(t.scope)))return n;if(-1!==(t=o.editorCommands.queryCommandState(e)))return t;try{return this.getDoc().queryCommandState(e)}catch(r){}}},queryCommandValue:function(e){var t,n,o=this;if(!o._isHidden()){if((t=o.queryValueCommands[e])&&!0!==(n=t.func.call(t.scope)))return n;if(t=o.editorCommands.queryCommandValue(e),a(t))return t;try{return this.getDoc().queryCommandValue(e)}catch(r){}}},show:function(){var e=this;h.show(e.getContainer()),h.hide(e.id),e.load()},hide:function(){var e=this,t=e.getDoc();v&&t&&t.execCommand("SelectAll"),e.save(),h.hide(e.getContainer()),h.setStyle(e.id,"display",e.orgDisplay)},isHidden:function(){return!h.isHidden(this.id)},setProgressState:function(e,t,n){return this.onSetProgressState.dispatch(this,e,t,n),e},load:function(e){var t,n=this,o=n.getElement();if(o)return(e=e||{}).load=!0,t=n.setContent(a(o.value)?o.value:o.innerHTML,e),e.element=o,e.no_events||n.onLoadContent.dispatch(n,e),e.element=o=null,t},save:function(e){var t,n,o=this,r=o.getElement();if(r&&o.initialized)return(e=e||{}).save=!0,e.element=r,t=e.content=o.getContent(e),e.no_events||o.onSaveContent.dispatch(o,e),t=e.content,/TEXTAREA|INPUT/i.test(r.nodeName)?r.value=t:(r.innerHTML=t,(n=h.getParent(o.id,"form"))&&g(n.elements,function(e){if(e.name==o.id)return e.value=t,!1})),e.element=r=null,t},setContent:function(e,t){var n,o=this,r=o.getBody();return(t=t||{}).format=t.format||"html",t.set=!0,t.content=e,t.no_events||o.onBeforeSetContent.dispatch(o,t),e=t.content,m.isIE||0!==e.length&&!/^\s+$/.test(e)?("raw"!==t.format&&(e=new m.html.Serializer({},o.schema).serialize(o.parser.parse(e))),t.content=m.trim(e),o.dom.setHTML(r,t.content),t.no_events||o.onSetContent.dispatch(o,t),o.settings.content_editable&&document.activeElement!==o.getBody()||o.selection.normalize(),t.content):(e=(n=o.settings.forced_root_block)?"<"+n+'><br data-mce-bogus="1"></'+n+">":'<br data-mce-bogus="1">',r.innerHTML=e,o.selection.select(r,!0),void o.selection.collapse(!0))},getContent:function(e){var t,n=this,o=n.getBody();return(e=e||{}).format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||n.onBeforeGetContent.dispatch(n,e),t="raw"==e.format?o.innerHTML:"text"==e.format?o.innerText||o.textContent:n.serializer.serialize(o,e),"text"!=e.format?e.content=m.trim(t):e.content=t,e.no_events||n.onGetContent.dispatch(n,e),e.content},isDirty:function(){var e=this;return m.trim(e.startContent)!=m.trim(e.getContent({format:"raw",no_events:1}))&&!e.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=h.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return h.get(this.settings.content_element||this.id)},getWin:function(){var e,t=this;return t.contentWindow||(e=h.get(t.id+"_ifr"))&&(t.contentWindow=e.contentWindow),t.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin())&&(t.contentDocument=e.document),t.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var o=this,r=o.settings;return r.urlconverter_callback?o.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")?e:r.relative_urls?o.documentBaseURI.toRelative(e):e=o.documentBaseURI.toAbsolute(e,r.remove_script_host)},addVisual:function(e){var n,o=this,r=o.settings,i=o.dom;e=e||o.getBody(),a(o.hasVisual)||(o.hasVisual=r.visual),g(i.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":return n=r.visual_table_class||"mceItemTable",void((t=i.getAttrib(e,"border"))&&"0"!=t||(o.hasVisual?i.addClass(e,n):i.removeClass(e,n)));case"A":return void(i.getAttrib(e,"href",!1)||(t=i.getAttrib(e,"name")||e.id,n="mceItemAnchor",t&&(o.hasVisual?i.addClass(e,n):i.removeClass(e,n))))}}),o.onVisualAid.dispatch(o,e,o.hasVisual)},remove:function(){var e=this,t=e.getContainer(),n=e.getDoc();e.removed||(e.removed=1,v&&n&&n.execCommand("SelectAll"),e.save(),h.setStyle(e.id,"display",e.orgDisplay),e.settings.content_editable||(i.unbind(e.getWin()),i.unbind(e.getDoc())),i.unbind(e.getBody()),i.clear(t),e.execCallback("remove_instance_callback",e),e.onRemove.dispatch(e),e.onExecCommand.listeners=[],m.remove(e),h.remove(t))},destroy:function(e){var t=this;t.destroyed||(n&&(i.unbind(t.getDoc()),i.unbind(t.getWin()),i.unbind(t.getBody())),e||(m.removeUnload(t.destroy),tinyMCE.onBeforeUnload.remove(t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),t.controlManager.destroy(),t.selection.destroy(),t.dom.destroy()),t.formElement&&(t.formElement.submit=t.formElement._mceOldSubmit,t.formElement._mceOldSubmit=null),t.contentAreaContainer=t.formElement=t.container=t.settings.content_element=t.bodyElement=t.contentDocument=t.contentWindow=null,t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null),t.destroyed=1)},_refreshContentEditable:function(){var e,t,n=this;n._isHidden()&&((t=(e=n.getBody()).parentNode).removeChild(e),t.appendChild(e),e.focus())},_isHidden:function(){var e;return n?!(e=this.selection.getSel())||!e.rangeCount||0===e.rangeCount:0}})}(tinymce),function(l){var t=l.each;l.Editor.prototype.setupEvents=function(){var o=this,e=o.settings;t(["onPreInit","onBeforeRenderUI","onPostRender","onLoad","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onSetAttrib"],function(e){o[e]=new l.util.Dispatcher(o)}),e.cleanup_callback&&(o.onBeforeSetContent.add(function(e,t){t.content=e.execCallback("cleanup_callback","insert_to_editor",t.content,t)}),o.onPreProcess.add(function(e,t){t.set&&e.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t),t.get&&e.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)}),o.onPostProcess.add(function(e,t){t.set&&(t.content=e.execCallback("cleanup_callback","insert_to_editor",t.content,t)),t.get&&(t.content=e.execCallback("cleanup_callback","get_from_editor",t.content,t))})),e.save_callback&&o.onGetContent.add(function(e,t){t.save&&(t.content=e.execCallback("save_callback",e.id,t.content,e.getBody()))}),e.handle_event_callback&&o.onEvent.add(function(e,t,n){!1===o.execCallback("handle_event_callback",t,e,n)&&(t.preventDefault(),t.stopPropagation())}),e.handle_node_change_callback&&o.onNodeChange.add(function(e,t,n){e.execCallback("handle_node_change_callback",e.id,n,-1,-1,!0,e.selection.isCollapsed())}),e.save_callback&&o.onSaveContent.add(function(e,t){var n=e.execCallback("save_callback",e.id,t.content,e.getBody());n&&(t.content=n)}),e.onchange_callback&&o.onChange.add(function(e,t){e.execCallback("onchange_callback",e,t)})},l.Editor.prototype.bindNativeEvents=function(){function o(e,t){e.type;a.removed||!1!==a.onEvent.dispatch(a,e,t)&&a[i[e.fakeType||e.type]].dispatch(a,e,t)}function e(){a.focus(!0)}function r(e,t){65==t.keyCode&&l.VK.metaKeyPressed(t)||a.selection.normalize(),a.nodeChanged()}function n(n,o){(n.altKey||n.ctrlKey||n.metaKey)&&t(a.shortcuts,function(e){var t=l.isMac?n.metaKey:n.ctrlKey;if(e.ctrl==t&&e.alt==n.altKey&&e.shift==n.shiftKey)return n.keyCode==e.keyCode||n.charCode&&n.charCode==e.charCode?(n.preventDefault(),o&&e.func.call(e.scope),!0):void 0})}var i,a=this,s=a.settings,c=a.dom;t(i={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"},function(e,t){var n=s.content_editable?a.getBody():a.getDoc();switch(t){case"contextmenu":c.bind(n,t,o);break;case"paste":c.bind(a.getBody(),t,o);break;case"submit":case"reset":c.bind(a.getElement().form||l.DOM.getParent(a.id,"form"),t,o);break;default:c.bind(n,t,o)}}),c.bind(s.content_editable?a.getBody():l.isGecko?a.getDoc():a.getWin(),"focus",function(){a.focus(!0)}),s.content_editable&&l.isOpera&&(c.bind(a.getBody(),"click",e),c.bind(a.getBody(),"keydown",e)),a.onMouseUp.add(r),a.onKeyUp.add(function(e,t){var n=t.keyCode;(33<=n&&n<=36||37<=n&&n<=40||13==n||45==n||46==n||8==n||l.isMac&&(91==n||93==n)||t.ctrlKey)&&r(e,t)}),a.onReset.add(function(){a.setContent(a.startContent,{format:"raw"})}),a.onKeyUp.add(function(e,t){n(t)}),a.onKeyPress.add(function(e,t){n(t)}),a.onKeyDown.add(function(e,t){n(t,!0)}),l.isOpera&&a.onClick.add(function(e,t){t.preventDefault()})}}(tinymce),function(C){var p,m=C.each,h=!0,g=!1;C.EditorCommands=function(v){function n(e,t,n){var o;return e=e.toLowerCase(),(o=d.exec[e])?(o(e,t,n),h):g}function i(e){var t;return e=e.toLowerCase(),(t=d.state[e])?t(e):-1}function e(e){var t;return e=e.toLowerCase(),(t=d.value[e])?t(e):g}function t(e,n){n=n||"exec",m(e,function(t,e){m(e.toLowerCase().split(","),function(e){d[n][e]=t})})}function a(e,t,n){return t===p&&(t=g),n===p&&(n=null),v.getDoc().execCommand(e,t,n)}function o(e){return f.match(e)}function s(e,t){f.toggle(e,t?{value:t}:p)}function r(e){l=b.getBookmark(e)}function c(){b.moveToBookmark(l)}var l,y=v.dom,b=v.selection,d={state:{},exec:{},value:{}},u=v.settings,f=v.formatter;C.extend(this,{execCommand:n,queryCommandState:i,queryCommandValue:e,addCommands:t}),t({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){v.undoManager.add()},"Cut,Copy,Paste":function(e){var t,n=v.getDoc();try{a(e)}catch(o){t=h}!t&&n.queryCommandSupported(e)||(C.isGecko?v.windowManager.confirm(v.getLang("clipboard_msg"),function(e){e&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):v.windowManager.alert(v.getLang("clipboard_no_support")))},unlink:function(e){b.isCollapsed()&&b.select(b.getNode()),a(e),b.collapse(g)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t=e.substring(7);m("left,center,right,full".split(","),function(e){t!=e&&f.remove("align"+e)}),s("align"+t),n("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;a(e),(t=y.getParent(b.getNode(),"ol,ul"))&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(r(),y.split(n,t),c()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){s(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){s(e,n)},FontSize:function(e,t,n){var o,r;1<=n&&n<=7&&(r=C.explode(u.font_size_style_values),n=(o=C.explode(u.font_size_classes))?o[n-1]||n:r[n-1]||n),s(e,n)},RemoveFormat:function(e){f.remove(e)},mceBlockQuote:function(){s("blockquote")},FormatBlock:function(e,t,n){return s(n||"p")},mceCleanup:function(){var e=b.getBookmark();v.setContent(v.getContent({cleanup:h}),{cleanup:h}),b.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var o=n||b.getNode();o!=v.getBody()&&(r(),v.dom.remove(o,h),c())},mceSelectNodeDepth:function(e,t,n){var o=0;y.getParent(b.getNode(),function(e){if(1==e.nodeType&&o++==n)return b.select(e),g},v.getBody())},mceSelectNode:function(e,t,n){b.select(n)},mceInsertContent:function(e,t,n){var o,r,i,a,s,c,l,d,u,f,p,m,h,g;if(o=v.parser,r=new C.html.Serializer({},v.schema),h='<span id="mce_marker" data-mce-type="bookmark">\ufeff</span>',c={content:n,format:"html"},b.onBeforeSetContent.dispatch(b,c),-1==(n=c.content).indexOf("{$caret}")&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,h),b.isCollapsed()||v.getDoc().execCommand("Delete",!1,null),c={context:(i=b.getNode()).nodeName.toLowerCase()},"mce_marker"==(p=(s=o.parse(n,c)).lastChild).attr("id"))for(p=(l=p).prev;p;p=p.walk(!0))if(3==p.type||!y.isBlock(p.name)){p.parent.insert(l,p,"br"===p.name);break}if(c.invalid){for(b.setContent(h),i=b.getNode(),a=v.getBody(),9==i.nodeType?i=p=a:p=i;p!==a;)p=(i=p).parentNode;n=i==a?a.innerHTML:y.getOuterHTML(i),n=r.serialize(o.parse(n.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return r.serialize(s)}))),i==a?y.setHTML(a,n):y.setOuterHTML(i,n)}else n=r.serialize(s),p=i.firstChild,m=i.lastChild,!p||p===m&&"BR"===p.nodeName?y.setHTML(i,n):b.setContent(n);l=y.get("mce_marker"),d=y.getRect(l),u=y.getViewPort(v.getWin()),(d.y+d.h>u.y+u.h||d.y<u.y||d.x>u.x+u.w||d.x<u.x)&&((g=C.isIE?v.getDoc().documentElement:v.getBody()).scrollLeft=d.x,g.scrollTop=d.y-u.h+25),f=y.createRng(),(p=l.previousSibling)&&3==p.nodeType?f.setStart(p,p.nodeValue.length):(f.setStartBefore(l),f.setEndBefore(l)),y.remove(l),b.setRng(f),b.onSetContent.dispatch(b,c),v.addVisual()},mceInsertRawHTML:function(e,t,n){b.setContent("tiny_mce_marker"),v.setContent(v.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){s(n)},mceSetContent:function(e,t,n){v.setContent(n)},"Indent,Outdent":function(t){var n,o,r;n=u.indentation,o=/[a-z%]+$/i.exec(n),n=parseInt(n),i("InsertUnorderedList")||i("InsertOrderedList")?a(t):(u.forced_root_block||y.getParent(b.getNode(),y.isBlock)||f.apply("div"),m(b.getSelectedBlocks(),function(e){"outdent"==t?(r=Math.max(0,parseInt(e.style.paddingLeft||0)-n),y.setStyle(e,"paddingLeft",r?r+o:"")):y.setStyle(e,"paddingLeft",parseInt(e.style.paddingLeft||0)+n+o)}))},mceRepaint:function(){if(C.isGecko)try{r(h),b.getSel()&&b.getSel().selectAllChildren(v.getBody()),b.collapse(h),c()}catch(e){}},mceToggleFormat:function(e,t,n){f.toggle(n)},InsertHorizontalRule:function(){v.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){v.hasVisual=!v.hasVisual,v.addVisual()},mceReplaceContent:function(e,t,n){v.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,b.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var o;"string"==typeof n&&(n={href:n}),o=y.getParent(b.getNode(),"a"),n.href=n.href.replace(" ","%20"),o&&n.href||f.remove("link"),n.href&&f.apply("link",n,o)},selectAll:function(){var e=y.getRoot(),t=y.createRng();b.getRng().setStart?(t.setStart(e,0),t.setEnd(e,e.childNodes.length),b.setRng(t)):a("SelectAll")}}),t({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=b.isCollapsed()?[y.getParent(b.getNode(),y.isBlock)]:b.getSelectedBlocks(),o=C.map(n,function(e){return!!f.matchNode(e,t)});return-1!==C.inArray(o,h)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return o(e)},mceBlockQuote:function(){return o("blockquote")},Outdent:function(){var e;if(u.inline_styles){if((e=y.getParent(b.getStart(),y.isBlock))&&0<parseInt(e.style.paddingLeft))return h;if((e=y.getParent(b.getEnd(),y.isBlock))&&0<parseInt(e.style.paddingLeft))return h}return i("InsertUnorderedList")||i("InsertOrderedList")||!u.inline_styles&&!!y.getParent(b.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=y.getParent(b.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),t({"FontSize,FontName":function(e){var t,n=0;return(t=y.getParent(b.getNode(),"span"))&&(n="fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),t({Undo:function(){v.undoManager.undo()},Redo:function(){v.undoManager.redo()}})}}(tinymce),function(d){var u=d.util.Dispatcher;d.UndoManager=function(r){function i(){return d.trim(r.getContent({format:"raw",no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\/span>/g,""))}function o(){a.typing=!1,a.add()}var a,s,e,t,n,c=0,l=[];return onBeforeAdd=new u(a),e=new u(a),t=new u(a),n=new u(a),e.add(function(e,t){if(e.hasUndo())return r.onChange.dispatch(r,t,e)}),t.add(function(e,t){return r.onUndo.dispatch(r,t,e)}),n.add(function(e,t){return r.onRedo.dispatch(r,t,e)}),r.onInit.add(function(){a.add()}),r.onBeforeExecCommand.add(function(e,t,n,o,r){"Undo"==t||"Redo"==t||"mceRepaint"==t||r&&r.skip_undo||a.beforeChange()}),r.onExecCommand.add(function(e,t,n,o,r){"Undo"==t||"Redo"==t||"mceRepaint"==t||r&&r.skip_undo||a.add()}),r.onSaveContent.add(o),r.dom.bind(r.dom.getRoot(),"dragend",o),r.dom.bind(r.getBody(),"focusout",function(){!r.removed&&a.typing&&o()}),r.onKeyUp.add(function(e,t){var n=t.keyCode;(33<=n&&n<=36||37<=n&&n<=40||45==n||13==n||t.ctrlKey)&&o()}),r.onKeyDown.add(function(e,t){var n=t.keyCode;33<=n&&n<=36||37<=n&&n<=40||45==n?a.typing&&o():(n<16||20<n)&&224!=n&&91!=n&&!a.typing&&(a.beforeChange(),a.typing=!0,a.add())}),r.onMouseDown.add(function(){a.typing&&o()}),r.addShortcut("ctrl+z","undo_desc","Undo"),r.addShortcut("ctrl+y","redo_desc","Redo"),a={data:l,typing:!1,onBeforeAdd:onBeforeAdd,onAdd:e,onUndo:t,onRedo:n,beforeChange:function(){s=r.selection.getBookmark(2,!0)},add:function(e){var t,n,o=r.settings;if((e=e||{}).content=i(),a.onBeforeAdd.dispatch(a,e),(n=l[c])&&n.content==e.content)return null;if(l[c]&&(l[c].beforeBookmark=s),o.custom_undo_redo_levels&&l.length>o.custom_undo_redo_levels){for(t=0;t<l.length-1;t++)l[t]=l[t+1];l.length--,c=l.length}return e.bookmark=r.selection.getBookmark(2,!0),c<l.length-1&&(l.length=c+1),l.push(e),c=l.length-1,a.onAdd.dispatch(a,e),r.isNotDirty=0,e},undo:function(){var e;return a.typing&&(a.add(),a.typing=!1),0<c&&(e=l[--c],r.setContent(e.content,{format:"raw"}),r.selection.moveToBookmark(e.beforeBookmark),a.onUndo.dispatch(a,e)),e},redo:function(){var e;return c<l.length-1&&(e=l[++c],r.setContent(e.content,{format:"raw"}),r.selection.moveToBookmark(e.bookmark),a.onRedo.dispatch(a,e)),e},clear:function(){l=[],c=0,a.typing=!1},hasUndo:function(){return 0<c||this.typing},hasRedo:function(){return c<l.length-1&&!this.typing}}}}(tinymce),tinymce.ForceBlocks=function(p){function e(){var e,t,n,o,r,i,a,s,c,l=g.getStart(),d=p.getBody(),u=-16777215;if(l&&1===l.nodeType&&m.forced_root_block){for(;l&&l!=d;){if(v[l.nodeName])return;l=l.parentNode}for((e=g.getRng()).setStart?(t=e.startContainer,n=e.startOffset,o=e.endContainer,r=e.endOffset):(e.item&&(l=e.item(0),(e=p.getDoc().body.createTextRange()).moveToElementText(l)),c=e.parentElement().ownerDocument===p.getDoc(),tmpRng=e.duplicate(),tmpRng.collapse(!0),n=-1*tmpRng.move("character",u),tmpRng.collapsed||(tmpRng=e.duplicate(),tmpRng.collapse(!1),r=-1*tmpRng.move("character",u)-n)),l=d.firstChild;l;)if(3===l.nodeType||1==l.nodeType&&!v[l.nodeName]){if(3===l.nodeType&&0==l.nodeValue.length){l=(a=l).nextSibling,h.remove(a);continue}i||(i=h.create(m.forced_root_block),l.parentNode.insertBefore(i,l),s=!0),l=(a=l).nextSibling,i.appendChild(a)}else i=null,l=l.nextSibling;if(s){if(e.setStart)e.setStart(t,n),e.setEnd(o,r),g.setRng(e);else if(c)try{(e=p.getDoc().body.createTextRange()).moveToElementText(d),e.collapse(!0),e.moveStart("character",n),0<r&&e.moveEnd("character",r),e.select()}catch(f){}p.nodeChanged()}}}var m=p.settings,h=p.dom,g=p.selection,v=p.schema.getBlockElements();m.forced_root_block&&(p.onKeyUp.add(e),p.onNodeChange.add(e))},function(l){l.DOM;var s=l.dom.Event,c=l.each,d=l.extend;l.create("tinymce.ControlManager",{ControlManager:function(e,t){var n=this;t=t||{},n.editor=e,n.controls={},n.onAdd=new l.util.Dispatcher(n),n.onPostRender=new l.util.Dispatcher(n),n.prefix=t.prefix||e.id+"_",n._cls={},n.onPostRender.add(function(){c(n.controls,function(e){e.postRender()})})},get:function(e){return this.controls[this.prefix+e]||this.controls[e]},setActive:function(e,t){var n=null;return(n=this.get(e))&&n.setActive(t),n},setDisabled:function(e,t){var n=null;return(n=this.get(e))&&n.setDisabled(t),n},add:function(e){var t=this;return e&&(t.controls[e.id]=e,t.onAdd.dispatch(e,t)),e},createControl:function(e){var t,n,o,r,i=this,a=i.editor;for(i.controlFactories||(i.controlFactories=[],c(a.plugins,function(e){e.createControl&&i.controlFactories.push(e)})),n=0,o=(r=i.controlFactories).length;n<o;n++)if(t=r[n].createControl(e,i))return i.add(t);return"|"===e||"separator"===e?i.createSeparator():a.buttons&&(t=a.buttons[e])?i.createButton(e,t):i.add(t)},createDropMenu:function(e,t,n){var o,r,i,a,s=this,c=s.editor;return(t=d({"class":"mceDropDown",constrain:c.settings.constrain_menus},t))["class"]=t["class"]+" "+c.getParam("skin")+"Skin",(i=c.getParam("skin_variant"))&&(t["class"]+=" "+c.getParam("skin")+"Skin"+i.substring(0,1).toUpperCase()+i.substring(1)),t["class"]+="rtl"==c.settings.directionality?" mceRtl":"",e=s.prefix+e,a=n||s._cls.dropmenu||l.ui.DropMenu,(o=s.controls[e]=new a(e,t)).onAddItem.add(function(e,t){var n=t.settings;n.title=c.getLang(n.title,n.title),n.onclick||(n.onclick=function(){n.cmd&&c.execCommand(n.cmd,n.ui||!1,n.value)})}),c.onRemove.add(function(){o.destroy()}),l.isIE&&(o.onShowMenu.add(function(){c.focus(),r=c.selection.getBookmark(1)}),o.onHideMenu.add(function(){r&&(c.selection.moveToBookmark(r),r=0)})),s.add(o)},createListBox:function(e,t,n){function o(e){return e.settings.use_accessible_selects&&!l.isGecko}var r,i=this,a=i.editor;return i.get(e)?null:(t.title=a.translate(t.title),t.scope=t.scope||a,t.onselect||(t.onselect=function(e){a.execCommand(t.cmd,t.ui||!1,e||t.value)}),t=d({title:t.title,"class":"mce_"+e,scope:t.scope,control_manager:i},t),e=i.prefix+e,r=a.settings.use_native_selects||o(a)?new l.ui.NativeListBox(e,t):new(n||i._cls.listbox||l.ui.ListBox)(e,t,a),i.controls[e]=r,l.isWebKit&&r.onPostRender.add(function(e,t){s.add(t,"mousedown",function(){a.bookmark=a.selection.getBookmark(1)}),s.add(t,"focus",function(){a.selection.moveToBookmark(a.bookmark),a.bookmark=null})}),r.hideMenu&&a.onMouseDown.add(r.hideMenu,r),i.add(r))},createButton:function(e,t,n){var o,r=this,i=r.editor;return r.get(e)?null:(t.title=i.translate(t.title),t.label=i.translate(t.label),t.scope=t.scope||i,t.onclick||t.menu_button||(t.onclick=function(){i.execCommand(t.cmd,t.ui||!1,t.value)}),t=d({title:t.title,"class":"mce_"+e,unavailable_prefix:i.getLang("unavailable",""),scope:t.scope,control_manager:r},t),e=r.prefix+e,t.menu_button?(o=new(n||r._cls.menubutton||l.ui.MenuButton)(e,t,i),i.onMouseDown.add(o.hideMenu,o)):o=new(r._cls.button||l.ui.Button)(e,t,i),r.add(o))},createMenuButton:function(e,t,n){return(t=t||{}).menu_button=1,this.createButton(e,t,n)},createSplitButton:function(e,t,n){var o,r,i=this,a=i.editor;return i.get(e)?null:(t.title=a.translate(t.title),t.scope=t.scope||a,t.onclick||(t.onclick=function(e){a.execCommand(t.cmd,t.ui||!1,e||t.value)}),t.onselect||(t.onselect=function(e){a.execCommand(t.cmd,t.ui||!1,e||t.value)}),t=d({title:t.title,"class":"mce_"+e,scope:t.scope,control_manager:i},t),e=i.prefix+e,r=n||i._cls.splitbutton||l.ui.SplitButton,o=i.add(new r(e,t,a)),a.onMouseDown.add(o.hideMenu,o),o)},createColorSplitButton:function(e,t,n){var o,r,i,a=this,s=a.editor;return a.get(e)?null:(t.title=s.translate(t.title),t.scope=t.scope||s,t.onclick||(t.onclick=function(e){l.isIE&&(i=s.selection.getBookmark(1)),s.execCommand(t.cmd,t.ui||!1,e||t.value)}),t.onselect||(t.onselect=function(e){s.execCommand(t.cmd,t.ui||!1,e||t.value)}),t=d({title:t.title,"class":"mce_"+e,menu_class:s.getParam("skin")+"Skin",scope:t.scope,more_colors_title:s.getLang("more_colors")},t),e=a.prefix+e,r=n||a._cls.colorsplitbutton||l.ui.ColorSplitButton,o=new r(e,t,s),s.onMouseDown.add(o.hideMenu,o),s.onRemove.add(function(){o.destroy()}),l.isIE&&(o.onShowMenu.add(function(){s.focus(),i=s.selection.getBookmark(1)}),o.onHideMenu.add(function(){i&&(s.selection.moveToBookmark(i),i=0)})),a.add(o))},createToolbar:function(e,t,n){var o,r=this;return e=r.prefix+e,o=new(n||r._cls.toolbar||l.ui.Toolbar)(e,t,r.editor),r.get(e)?null:r.add(o)},createToolbarGroup:function(e,t,n){var o,r=this;return e=r.prefix+e,o=new(n||this._cls.toolbarGroup||l.ui.ToolbarGroup)(e,t,r.editor),r.get(e)?null:r.add(o)},createSeparator:function(e){return new(e||this._cls.separator||l.ui.Separator)},setControlType:function(e,t){return this._cls[e.toLowerCase()]=t},destroy:function(){c(this.controls,function(e){e.destroy()}),this.controls=null}})}(tinymce),function(u){var n=u.util.Dispatcher,f=u.each,p=u.isIE,m=u.isOpera;u.create("tinymce.WindowManager",{WindowManager:function(e){var t=this;t.editor=e,t.onOpen=new n(t),t.onClose=new n(t),t.params={},t.features={}},open:function(e,t){var n,o,r,i,a=this,s="",c="modal"==a.editor.settings.dialog_type,l=u.DOM.getViewPort();e=e||{},t=t||{},o=m?l.w:screen.width,r=m?l.h:screen.height,e.name=e.name||"mc_"+(new Date).getTime(),e.width=parseInt(e.width||320),e.height=parseInt(e.height||240),e.resizable=!0,e.left=e.left||parseInt(o/2)-e.width/2,e.top=e.top||parseInt(r/2)-e.height/2,t.inline=!1,t.mce_width=e.width,t.mce_height=e.height,t.mce_auto_focus=e.auto_focus,c&&p&&(e.center=!0,e.help=!1,e.dialogWidth=e.width+"px",e.dialogHeight=e.height+"px",e.scroll=e.scrollbars||!1),f(e,function(e,t){u.is(e,"boolean")&&(e=e?"yes":"no"),/^(name|url)$/.test(t)||(s+=p&&c?(s?";":"")+t+":"+e:(s?",":"")+t+"="+e)}),a.features=e,a.params=t,a.onOpen.dispatch(a,e,t),i=e.url||e.file,i=u._addVer(i);try{p&&c?(n=1,window.showModalDialog(i,window,s)):n=window.open(i,e.name,s)}catch(d){}n||alert(a.editor.getLang("popup_blocked"))},close:function(e){e.close(),this.onClose.dispatch(this)},createInstance:function(e,t,n,o,r,i){return new(u.resolve(e))(t,n,o,r,i)},confirm:function(e,t,n,o){o=o||window,t.call(n||this,o.confirm(this._decode(this.editor.getLang(e,e))))},alert:function(e,t,n,o){var r=this;(o=o||window).alert(r._decode(r.editor.getLang(e,e))),t&&t.call(n||r)},resizeBy:function(e,t,n){n.resizeBy(e,t)},_decode:function(e){return u.DOM.decode(e).replace(/\\n/g,"\n")}})}(tinymce),function(X){X.Formatter=function(x){function _(e){return!!x.schema.getTextBlocks()[e.toLowerCase()]}function g(e,t){return O.getParents(e,t,O.getRoot())}function S(e){return 1===e.nodeType&&"_mce_caret"===e.id}function e(){n({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(n,e,t){P(t,function(e,t){O.setAttrib(n,t,e)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),P("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(e){n(e,{block:e,remove:"all"})}),n(x.settings.formats)}function t(){x.addShortcut("ctrl+b","bold_desc","Bold"),x.addShortcut("ctrl+i","italic_desc","Italic"),x.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;e<=6;e++)x.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);x.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),x.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),x.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function E(e){return e?u[e]:u}function n(e,t){e&&("string"!=typeof e?P(e,function(e,t){n(t,e)}):(t=t.length?t:[t],P(t,function(e){e.deep===b&&(e.deep=!e.selector),e.split===b&&(e.split=!e.selector||e.inline),e.remove===b&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),u[e]=t))}function p(m,h,a){function g(n,e){e=e||b,n&&(e.onformat&&e.onformat(n,e,h,a),P(e.styles,function(e,t){O.setStyle(n,t,d(e,h))}),P(e.attributes,function(e,t){O.setAttrib(n,t,d(e,h))}),P(e.classes,
function(e){e=d(e,h),O.hasClass(n,e)||O.addClass(n,e)}))}function e(){function e(e,t){var n=new F(t);for(a=n.current();a;a=n.prev())if(1<a.childNodes.length||a==e||"BR"==a.tagName)return a}var t=x.selection.getRng(),n=t.startContainer,o=t.endContainer;if(n!=o&&0===t.endOffset){var r=e(n,o),i=3==r.nodeType?r.length:r.childNodes.length;t.setEnd(r,i)}return t}function v(e,n,t,o,r){var i,a,s=[],c=-1,l=-1,d=-1;return P(e.childNodes,function(e,t){if("UL"===e.nodeName||"OL"===e.nodeName)return c=t,i=e,!1}),P(e.childNodes,function(e,t){"SPAN"===e.nodeName&&"bookmark"==O.getAttrib(e,"data-mce-type")&&(e.id==n.id+"_start"?l=t:e.id==n.id+"_end"&&(d=t))}),c<=0||l<c&&c<d?(P(X.grep(e.childNodes),r),0):(a=O.clone(t,$),P(X.grep(e.childNodes),function(e,t){(l<c&&t<c||c<l&&c<t)&&(s.push(e),e.parentNode.removeChild(e))}),l<c?e.insertBefore(a,i):c<l&&e.insertBefore(a,i.nextSibling),o.push(a),P(s,function(e){a.appendChild(e)}),a)}function t(e,c,l){var d,u,f=[],p=!0;d=b.inline||b.block,g(u=O.create(d)),U.walk(e,function(e){function a(t){var e,n,o,r,i;return i=p,e=t.nodeName.toLowerCase(),n=t.parentNode.nodeName.toLowerCase(),1===t.nodeType&&W(t)&&(i=p,p="true"===W(t),r=!0),N(e,"br")?(s=0,void(b.block&&O.remove(t))):b.wrapper&&k(t,m,h)?void(s=0):p&&!r&&b.block&&!b.wrapper&&_(e)?(g(t=O.rename(t,d)),f.push(t),void(s=0)):void(b.selector&&(P(y,function(e){"collapsed"in e&&e.collapsed!==C||O.is(t,e.selector)&&!S(t)&&(g(t,e),o=!0)}),!b.inline||o)?s=0:p&&!r&&V(d,e)&&V(n,d)&&(l||3!==t.nodeType||1!==t.nodeValue.length||65279!==t.nodeValue.charCodeAt(0))&&!S(t)?(s||(s=O.clone(u,$),t.parentNode.insertBefore(s,t),f.push(s)),s.appendChild(t)):"li"==e&&c?s=v(t,c,u,f,a):(s=0,P(X.grep(t.childNodes),a),r&&(p=i),s=0))}var s;P(e,a)}),!1===b.wrap_links&&P(f,function(e){function r(e){var t,n,o;if("A"===e.nodeName){for(n=O.clone(u,$),f.push(n),o=X.grep(e.childNodes),t=0;t<o.length;t++)n.appendChild(o[t]);e.appendChild(n)}P(X.grep(e.childNodes),r)}r(e)}),P(f,function(t){function e(e){var t=0;return P(e.childNodes,function(e){T(e)||R(e)||t++}),t}function n(e){var t,n;return P(e.childNodes,function(e){if(1==e.nodeType&&!R(e)&&!S(e))return t=e,$}),t&&w(t,b)&&(g(n=O.clone(t,$)),O.replace(n,e,j),O.remove(t,1)),n||e}var o;if(o=e(t),!(1<f.length)&&z(t)||0!==o){if(b.inline||b.wrapper){if(b.exact||1!==o||(t=n(t)),P(y,function(n){P(O.select(n.inline,t),function(e){var t;if(!1===n.wrap_links){t=e.parentNode;do{if("A"===t.nodeName)return}while(t=t.parentNode)}B(n,h,e,n.exact?e:null)})}),k(t.parentNode,m,h))return O.remove(t,1),t=0,j;b.merge_with_parents&&O.getParent(t.parentNode,function(e){if(k(e,m,h))return O.remove(t,1),t=0,j}),t&&!1!==b.merge_siblings&&(t=L(t=L(M(t),t),M(t,j)))}}else O.remove(t,1)})}var n,o,y=E(m),b=y[0],C=H.isCollapsed();if(b)if(a)a.nodeType?((o=O.createRng()).setStartBefore(a),o.setEndAfter(a),t(A(o,y),null,!0)):t(a,null,!0);else if(C&&b.inline&&!O.select("td.mceSelected,th.mceSelected").length)D("apply",m,h);else{var r=x.selection.getNode();f||!y[0].defaultBlock||O.getParent(r,O.isBlock)||p(y[0].defaultBlock),x.selection.setRng(e()),n=H.getBookmark(),t(A(H.getRng(j),y),n),b.styles&&(b.styles.color||b.styles.textDecoration)&&(X.walk(r,Y,"childNodes"),Y(r)),H.moveToBookmark(n),I(H.getRng(j)),x.nodeChanged()}}function m(o,d,e){function a(e){var t,n,o,r,i;if(3!==e.nodeType){if(1===e.nodeType&&W(e)&&(r=p,p="true"===W(e),i=!0),t=X.grep(e.childNodes),p&&!i)for(n=0,o=u.length;n<o&&!B(u[n],d,e,e);n++);if(f.deep&&t.length){for(n=0,o=t.length;n<o;n++)a(t[n]);i&&(p=r)}}}function t(e){var n;return P(g(e.parentNode).reverse(),function(e){var t;n||"_start"==e.id||"_end"==e.id||(t=k(e,o,d))&&!1!==t.split&&(n=e)}),n}function n(e,t,n,o){var r,i,a,s,c,l;if(e){for(l=e.parentNode,r=t.parentNode;r&&r!=l;r=r.parentNode){for(i=O.clone(r,$),c=0;c<u.length;c++)if(B(u[c],d,i,i)){i=0;break}i&&(a&&i.appendChild(a),s||(s=i),a=i)}!o||f.mixed&&z(e)||(t=O.split(e,t)),a&&(n.parentNode.insertBefore(a,n),s.appendChild(n))}return t}function r(e){return n(t(e),e,e,!0)}function i(e){var t=O.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return R(n)&&(n=n[e?"firstChild":"lastChild"]),O.remove(t,!0),n}function s(e){var t,n;e=A(e,u,j),f.split&&((t=y(e,j))!=(n=y(e))?(/^(TR|TD)$/.test(t.nodeName)&&t.firstChild&&(t=("TD"==t.nodeName?t.firstChild:t.firstChild.firstChild)||t),t=v(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=v(n,"span",{id:"_end","data-mce-type":"bookmark"}),r(t),r(n),t=i(j),n=i()):t=n=r(t),e.startContainer=t.parentNode,e.startOffset=C(t),e.endContainer=n.parentNode,e.endOffset=C(n)+1),U.walk(e,function(e){P(e,function(e){a(e),1===e.nodeType&&"underline"===x.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===G(e.parentNode)&&B({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var c,l,u=E(o),f=u[0],p=!0;e?e.nodeType?((l=O.createRng()).setStartBefore(e),l.setEndAfter(e),s(l)):s(e):H.isCollapsed()&&f.inline&&!O.select("td.mceSelected,th.mceSelected").length?D("remove",o,d):(c=H.getBookmark(),s(H.getRng(j)),H.moveToBookmark(c),f.inline&&h(o,d,H.getStart())&&I(H.getRng(!0)),x.nodeChanged())}function o(e,t,n){var o=E(e);!h(e,t,n)||"toggle"in o[0]&&!o[0].toggle?p(e,t,n):m(e,t,n)}function k(e,t,s,c){function n(e,t,n){var o,r,i,a=t[n];if(t.onmatch)return t.onmatch(e,t,n);if(a)if(a.length===b){for(o in a)if(a.hasOwnProperty(o)){if(r="attributes"===n?O.getAttrib(e,o):l(e,o),c&&!r&&!t.exact)return;if((!c||t.exact)&&!N(r,d(a[o],s)))return}}else for(i=0;i<a.length;i++)if("attributes"===n?O.getAttrib(e,a[i]):l(e,a[i]))return t;return t}var o,r,i,a=E(t);if(a&&e)for(r=0;r<a.length;r++)if(w(e,o=a[r])&&n(e,o,"attributes")&&n(e,o,"styles")){if(i=o.classes)for(r=0;r<i.length;r++)if(!O.hasClass(e,i[r]))return;return o}}function h(t,n,e){function o(e){return k(e=O.getParent(e,function(e){return!!k(e,t,n,!0)}),t,n)}var r;return e?o(e):o(e=H.getNode())?j:(r=H.getStart())!=e&&o(r)?j:$}function r(o,r){var e,i=[],a={};return e=H.getStart(),O.getParent(e,function(e){var t,n;for(t=0;t<o.length;t++)n=o[t],!a[n]&&k(e,n,r)&&(a[n]=!0,i.push(n))},O.getRoot()),i}function i(e){var t,n,o,r,i=E(e);if(i)for(t=g(H.getStart()),o=i.length-1;0<=o;o--){if(!(r=i[o].selector))return j;for(n=t.length-1;0<=n;n--)if(O.is(t[n],r))return j}return $}function a(e,t,n){var i;return c||(c={},i={},x.onNodeChange.addToTop(function(e,t,n){var o=g(n),r={};P(c,function(e,n){P(o,function(t){if(k(t,n,{},e.similar))return i[n]||(P(e,function(e){e(!0,{node:t,format:n,parents:o})}),i[n]=e),r[n]=e,!1})}),P(i,function(e,t){r[t]||(delete i[t],P(e,function(e){e(!1,{node:n,format:t,parents:o})}))})})),P(e.split(","),function(e){c[e]||(c[e]=[],c[e].similar=n),c[e].push(t)}),this}function w(e,t){return N(e,t.inline)?j:N(e,t.block)?j:t.selector?O.is(e,t.selector):void 0}function N(e,t){return t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function l(e,t){var n=O.getStyle(e,t);return"color"!=t&&"backgroundColor"!=t||(n=O.toHex(n)),"fontWeight"==t&&700==n&&(n="bold"),""+n}function d(e,n){return"string"!=typeof e?e=e(n):n&&(e=e.replace(/%(\w+)/g,function(e,t){return n[t]||e})),e}function T(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function v(e,t,n){var o=O.create(t,n);return e.parentNode.insertBefore(o,e),o.appendChild(e),o}function A(a,s,c){function e(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var n,o,r,i,a;if(n=o=e?f:m,i=e?"previousSibling":"nextSibling",a=O.getRoot(),3==n.nodeType&&!T(n)&&(e?0<p:h<n.nodeValue.length))return n;for(;;){if(!s[0].block_expand&&z(o))return o;for(r=o[i];r;r=r[i])if(!R(r)&&!T(r)&&!t(r))return o;if(o.parentNode==a){n=o;break}o=o.parentNode}return n}function t(e,t){for(t===b&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function n(e){for(var t=e;t;){if(1===t.nodeType&&W(t))return"false"===W(t)?t:e;t=t.parentNode}return e}function o(e,t,i){function n(e,t){var n,o,r=e.nodeValue;return void 0===t&&(t=i?r.length:0),i?(n=r.lastIndexOf(" ",t),-1===(n=(o=r.lastIndexOf("\xa0",t))<n?n:o)||c||n++):(n=r.indexOf(" ",t),o=r.indexOf("\xa0",t),n=-1!==n&&(-1===o||n<o)?n:o),n}var o,r,a,s;if(3===e.nodeType){if(-1!==(a=n(e,t)))return{container:e,offset:a};s=e}for(o=new F(e,O.getParent(e,z)||x.getBody());r=o[i?"prev":"next"]();)if(3===r.nodeType){if(-1!==(a=n(s=r)))return{container:r,offset:a}}else if(z(r))break;if(s)return{container:s,offset:t=i?0:s.length}}function r(e,t){var n,o,r,i;for(3==e.nodeType&&0===e.nodeValue.length&&e[t]&&(e=e[t]),n=g(e),o=0;o<n.length;o++)for(r=0;r<s.length;r++)if(!("collapsed"in(i=s[r])&&i.collapsed!==a.collapsed)&&O.is(n[o],i.selector))return n[o];return e}function i(e,t){var n;if(s[0].wrapper||(n=O.getParent(e,s[0].block)),n||(n=O.getParent(3==e.nodeType?e.parentNode:e,_)),n&&s[0].wrapper&&(n=g(n,"ul,ol").reverse()[0]||n),!n)for(n=e;n[t]&&!z(n[t])&&!N(n=n[t],"br"););return n||e}var l,d,u,f=a.startContainer,p=a.startOffset,m=a.endContainer,h=a.endOffset;if(1==f.nodeType&&f.hasChildNodes()&&(l=f.childNodes.length-1,3==(f=f.childNodes[l<p?l:p]).nodeType&&(p=0)),1==m.nodeType&&m.hasChildNodes()&&(l=m.childNodes.length-1,3==(m=m.childNodes[l<h?l:h-1]).nodeType&&(h=m.nodeValue.length)),f=n(f),m=n(m),(R(f.parentNode)||R(f))&&3==(f=(f=R(f)?f:f.parentNode).nextSibling||f).nodeType&&(p=0),(R(m.parentNode)||R(m))&&3==(m=(m=R(m)?m:m.parentNode).previousSibling||m).nodeType&&(h=m.length),s[0].inline&&(a.collapsed&&((u=o(f,p,!0))&&(f=u.container,p=u.offset),(u=o(m,h))&&(m=u.container,h=u.offset)),(d=t(m,h)).node)){for(;d.node&&0===d.offset&&d.node.previousSibling;)d=t(d.node.previousSibling);d.node&&0<d.offset&&3===d.node.nodeType&&" "===d.node.nodeValue.charAt(d.offset-1)&&1<d.offset&&(m=d.node).splitText(d.offset-1)}return(s[0].inline||s[0].block_expand)&&(s[0].inline&&3==f.nodeType&&0!==p||(f=e(!0)),s[0].inline&&3==m.nodeType&&h!==m.nodeValue.length||(m=e())),s[0].selector&&s[0].expand!==$&&!s[0].inline&&(f=r(f,"previousSibling"),m=r(m,"nextSibling")),(s[0].block||s[0].selector)&&(f=i(f,"previousSibling"),m=i(m,"nextSibling"),s[0].block&&(z(f)||(f=e(!0)),z(m)||(m=e()))),1==f.nodeType&&(p=C(f),f=f.parentNode),1==m.nodeType&&(h=C(m)+1,m=m.parentNode),{startContainer:f,startOffset:p,endContainer:m,endOffset:h}}function B(e,o,r,i){var t,n,a;if(!w(r,e))return $;if("all"!=e.remove)for(P(e.styles,function(e,t){e=d(e,o),"number"==typeof t&&(t=e,i=0),i&&!N(l(i,t),e)||O.setStyle(r,t,""),a=1}),a&&""==O.getAttrib(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-mce-style")),P(e.attributes,function(e,t){var n;if(e=d(e,o),"number"==typeof t&&(t=e,i=0),!i||N(O.getAttrib(i,t),e)){if("class"==t&&(e=O.getAttrib(r,t))&&(n="",P(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(n+=(n?" ":"")+e)}),n))return void O.setAttrib(r,t,n);"class"==t&&r.removeAttribute("className"),K.test(t)&&r.removeAttribute("data-mce-"+t),r.removeAttribute(t)}}),P(e.classes,function(e){e=d(e,o),i&&!O.hasClass(i,e)||O.removeClass(r,e)}),n=O.getAttribs(r),t=0;t<n.length;t++)if(0!==n[t].nodeName.indexOf("_"))return $;return"none"!=e.remove?(s(r,e),j):void 0}function s(e,t){function n(e,t,n){return!(e=M(e,t,n))||"BR"==e.nodeName||z(e)}var o,r=e.parentNode;t.block&&(f?r==O.getRoot()&&(t.list_block&&N(e,t.list_block)||P(X.grep(e.childNodes),function(e){V(f,e.nodeName.toLowerCase())?o?o.appendChild(e):o=v(e,f):o=0})):z(e)&&!z(r)&&(n(e,$)||n(e.firstChild,j,1)||e.insertBefore(O.create("br"),e.firstChild),n(e,j)||n(e.lastChild,$,1)||e.appendChild(O.create("br")))),t.selector&&t.inline&&!N(t.inline,e)||O.remove(e,1)}function M(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!T(e))return e}function R(e){return e&&1==e.nodeType&&"bookmark"==e.getAttribute("data-mce-type")}function L(t,e){function n(e,t){function n(n){var o={};return P(O.getAttribs(n),function(e){var t=e.nodeName.toLowerCase();0!==t.indexOf("_")&&"style"!==t&&(o[t]=O.getAttrib(n,t))}),o}function o(e,t){var n,o;for(o in e)if(e.hasOwnProperty(o)){if((n=t[o])===b)return $;if(e[o]!=n)return $;delete t[o]}for(o in t)if(t.hasOwnProperty(o))return $;return j}return e.nodeName!=t.nodeName?$:o(n(e),n(t))&&o(O.parseStyle(O.getAttrib(e,"style")),O.parseStyle(O.getAttrib(t,"style")))?j:$}function o(e,t){for(r=e;r;r=r[t]){if(3==r.nodeType&&0!==r.nodeValue.length)return e;if(1==r.nodeType&&!R(r))return r}return e}var r,i;if(t&&e&&(t=o(t,"previousSibling"),e=o(e,"nextSibling"),n(t,e))){for(r=t.nextSibling;r&&r!=e;)r=(i=r).nextSibling,t.appendChild(i);return O.remove(e),P(X.grep(e.childNodes),function(e){t.appendChild(e)}),t}return e}function _(e){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(e)}function y(e,t){var n,o,r;return n=e[t?"startContainer":"endContainer"],o=e[t?"startOffset":"endOffset"],1==n.nodeType&&(r=n.childNodes.length-1,!t&&o&&o--,n=n.childNodes[r<o?r:o]),3===n.nodeType&&t&&o>=n.nodeValue.length&&(n=new F(n,x.getBody()).next()||n),3!==n.nodeType||t||0!==o||(n=new F(n,x.getBody()).prev()||n),n}function D(e,d,u){function f(e){var t=O.create("span",{id:c,"data-mce-bogus":!0,style:l?"color:red":""});return e&&t.appendChild(x.getDoc().createTextNode(q)),t}function r(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==q||1<e.childNodes.length)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function a(e){for(;e;){if(e.id===c)return e;e=e.parentNode}}function s(e){var t;if(e)for(e=(t=new F(e,e)).current();e;e=t.next())if(3===e.nodeType)return e}function i(e,t){var n,o;if(e)o=H.getRng(!0),r(e)?(!1!==t&&(o.setStartBefore(e),o.setEndBefore(e)),O.remove(e)):((n=s(e)).nodeValue.charAt(0)===q&&(n=n.deleteData(0,1)),O.remove(e,1)),H.setRng(o);else if(!(e=a(H.getStart())))for(;e=O.get(c);)i(e,!1)}function t(){var e,t,n,o,r,i;o=(e=H.getRng(!0)).startOffset,i=e.startContainer.nodeValue,(t=a(H.getStart()))&&(n=s(t)),i&&0<o&&o<i.length&&/\w/.test(i.charAt(o))&&/\w/.test(i.charAt(o-1))?(r=H.getBookmark(),e.collapse(!0),e=A(e,E(d)),e=U.split(e),p(d,u,e),H.moveToBookmark(r)):(t&&n.nodeValue===q||(n=(t=f(!0)).firstChild,e.insertNode(t),o=1),p(d,u,t),H.setCursorLocation(n,o))}function n(){var e,t,n,o,r,i,a,s,c=H.getRng(!0),l=[];for(e=c.startContainer,t=c.startOffset,3==(r=e).nodeType&&(t==e.nodeValue.length&&e.nodeValue!==q||(o=!0),r=r.parentNode);r;){if(k(r,d,u)){i=r;break}r.nextSibling&&(o=!0),l.push(r),r=r.parentNode}if(i)if(o)n=H.getBookmark(),c.collapse(!0),c=A(c,E(d),!0),c=U.split(c),m(d,u,c),H.moveToBookmark(n);else{for(r=s=f(),a=l.length-1;0<=a;a--)r.appendChild(O.clone(l[a],!1)),r=r.firstChild;r.appendChild(O.doc.createTextNode(q)),r=r.firstChild,O.insertAfter(s,i),H.setCursorLocation(r,1)}}function o(){var e;(e=a(H.getStart()))&&!O.isEmpty(e)&&X.walk(e,function(e){1!=e.nodeType||e.id===c||O.isEmpty(e)||O.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var c="_mce_caret",l=x.settings.caret_debug;self._hasCaretEvents||(x.onBeforeGetContent.addToTop(function(){var e,t=[];if(r(a(H.getStart()),t))for(e=t.length;e--;)O.setAttrib(t[e],"data-mce-bogus","1")}),X.each("onMouseUp onKeyUp".split(" "),function(e){x[e].addToTop(function(){i(),o()})}),x.onKeyDown.addToTop(function(e,t){var n=t.keyCode;8!=n&&37!=n&&39!=n||i(a(H.getStart())),o()}),H.onSetContent.add(o),self._hasCaretEvents=!0),"apply"==e?t():n()}function I(e){var t,n,o,r,i,a=e.startContainer,s=e.startOffset;if(3==a.nodeType&&s>=a.nodeValue.length&&(s=C(a),a=a.parentNode,t=!0),1==a.nodeType)for(a=(r=a.childNodes)[Math.min(s,r.length-1)],n=new F(a,O.getParent(a,O.isBlock)),(s>r.length-1||t)&&n.next(),o=n.current();o;o=n.next())if(3==o.nodeType&&!T(o))return i=O.create("a",null,q),o.parentNode.insertBefore(i,o),e.setStart(o,0),H.setRng(e),void O.remove(i)}var c,b,u={},P=X.each,O=x.dom,H=x.selection,F=X.dom.TreeWalker,U=new X.dom.RangeUtils(O),V=x.schema.isValidChild,z=(X.isArray,O.isBlock),f=x.settings.forced_root_block,C=O.nodeIndex,q="\ufeff",K=/^(src|href|style)$/,$=!1,j=!0,W=O.getContentEditable,G=function(e){var t;return x.dom.getParent(e,function(e){return(t=x.dom.getStyle(e,"text-decoration"))&&"none"!==t}),t},Y=function(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=G(e.parentNode),x.dom.getStyle(e,"color")&&t?x.dom.setStyle(e,"text-decoration",t):x.dom.getStyle(e,"textdecoration")===t&&x.dom.setStyle(e,"text-decoration",null))};X.extend(this,{get:E,register:n,apply:p,remove:m,toggle:o,match:h,matchAll:r,matchNode:k,canApply:i,formatChanged:a}),e(),t()}}(tinymce),tinymce.onAddEditor.add(function(o,n){function r(n,e){o.each(e,function(e,t){e&&s.setStyle(n,t,e)}),s.rename(n,"span")}function e(e,t){s=e.dom,c.convert_fonts_to_spans&&o.each(s.select("font,u,strike",t.node),function(e){i[e.nodeName.toLowerCase()](n.dom,e)})}var i,a,s,c=n.settings;c.inline_styles&&(a=o.explode(c.font_size_legacy_values),i={font:function(e,t){r(t,{backgroundColor:t.style.backgroundColor,color:t.color,fontFamily:t.face,fontSize:a[parseInt(t.size,10)-1]})},u:function(e,t){r(t,{textDecoration:"underline"})},strike:function(e,t){r(t,{textDecoration:"line-through"})}},n.onPreProcess.add(e),n.onSetContent.add(e),n.onInit.add(function(){n.selection.onSetContent.add(e)}))}),function(I){var P=I.dom.TreeWalker;I.EnterKey=function(A){function n(e){function c(e){return e&&B.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==B.getContentEditable(e)}function t(e){var t;I.isIE&&B.isBlock(e)&&(t=M.getRng(),e.appendChild(B.create("span",null,"\xa0")),M.select(e),e.lastChild.outerHTML="",M.setRng(t))}function n(e){for(var t,n=e,o=[];n=n.firstChild;){if(B.isBlock(n))return;1!=n.nodeType||D[n.nodeName.toLowerCase()]||o.push(n)}for(t=o.length;t--;)!(n=o[t]).hasChildNodes()||n.firstChild==n.lastChild&&""===n.firstChild.nodeValue?B.remove(n):"A"==n.nodeName&&" "===(n.innerText||n.textContent)&&B.remove(n)}function o(e){var t,n,o,r,i,a,s=e;if(o=B.createRng(),e.hasChildNodes()){for(t=new P(e,e);n=t.current();){if(3==n.nodeType){o.setStart(n,0),o.setEnd(n,0);break}if(D[n.nodeName.toLowerCase()]){o.setStartBefore(n),o.setEndBefore(n);break}s=n,n=t.next()}n||(o.setStart(s,0),o.setEnd(s,0))}else"BR"==e.nodeName?e.nextSibling&&B.isBlock(e.nextSibling)?((!b||b<9)&&(a=B.create("br"),e.parentNode.insertBefore(a,e)),o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)):(o.setStart(e,0),o.setEnd(e,0));M.setRng(o),B.remove(a),i=B.getViewPort(A.getWin()),((r=B.getPos(e).y)<i.y||r+25>i.y+i.h)&&A.getWin().scrollTo(0,r<i.y?r:r-i.h+25)}function r(e){var t,n,o,r=g;if(o=t=e||"TABLE"==E?B.create(e||w):y.cloneNode(!1),!1!==R.keep_styles)do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(r.nodeName)){if("_mce_caret"==r.id)continue;n=r.cloneNode(!1),B.setAttrib(n,"id",""),t.hasChildNodes()?n.appendChild(t.firstChild):o=n,t.appendChild(n)}}while(r=r.parentNode);return I.isIE||(o.innerHTML='<br data-mce-bogus="1">'),t}function i(e){var t,n,o;if(3==g.nodeType&&(e?0<v:v<g.nodeValue.length))return!1;if(g.parentNode==y&&N&&!e)return!0;if(e&&1==g.nodeType&&g==y.firstChild)return!0;if("TABLE"===g.nodeName||g.previousSibling&&"TABLE"==g.previousSibling.nodeName)return N&&!e||!N&&e;for(t=new P(g,y),3==g.nodeType&&(e&&0==v?t.prev():e||v!=g.nodeValue.length||t.next());n=t.current();){if(1===n.nodeType){if(!n.getAttribute("data-mce-bogus")&&(o=n.nodeName.toLowerCase(),D[o]&&"br"!==o))return!1}else if(3===n.nodeType&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0}function a(e,t){var n,o,r,i,a,s=w||"P";if(!(o=B.getParent(e,B.isBlock))||!c(o)){if(!(o=o||h).hasChildNodes())return n=B.create(s),o.appendChild(n),T.setStart(n,0),T.setEnd(n,0),n;for(i=e;i.parentNode!=o;)i=i.parentNode;for(;i&&!B.isBlock(i);)i=(r=i).previousSibling;if(r){for(n=B.create(s),r.parentNode.insertBefore(n,r),i=r;i&&!B.isBlock(i);)a=i.nextSibling,n.appendChild(i),i=a;T.setStart(e,t),T.setEnd(e,t)}}return e}function s(){function e(e){for(var t=S[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===y}x=w?r(w):B.create("BR"),e(!0)&&e()?B.replace(x,S):e(!0)?S.parentNode.insertBefore(x,S):e()?(B.insertAfter(x,S),t(x)):((m=T.cloneRange()).setStartAfter(y),m.setEndAfter(S),_=m.extractContents(),B.insertAfter(_,S),B.insertAfter(x,S)),B.remove(y),o(x),L.add()}function l(){for(var e,t=new P(g,y);e=t.current();){if("BR"==e.nodeName)return!0;e=t.next()}}function d(){var e,t,n;g&&3==g.nodeType&&v>=g.nodeValue.length&&(I.isIE||l()||(e=B.create("br"),T.insertNode(e),T.setStartAfter(e),T.setEndAfter(e),t=!0)),e=B.create("br"),T.insertNode(e),I.isIE&&"PRE"==E&&(!b||b<8)&&e.parentNode.insertBefore(B.doc.createTextNode("\r"),e),n=B.create("span",{},"&nbsp;"),e.parentNode.insertBefore(n,e),M.scrollIntoView(n),B.remove(n),t?(T.setStartBefore(e),T.setEndBefore(e)):(T.setStartAfter(e),T.setEndAfter(e)),M.setRng(T),L.add()}function u(e){for(;3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;);}function f(e){var t,n,o=B.getRoot();for(t=e;t!==o&&"false"!==B.getContentEditable(t);)"true"===B.getContentEditable(t)&&(n=t),t=t.parentNode;return t!==o?n:o}function p(e){var t;I.isIE||(e.normalize(),(t=e.lastChild)&&!/^(left|right)$/gi.test(B.getStyle(t,"float",!0))||B.add(e,"br"))}var m,h,g,v,y,b,C,x,_,S,E,k,w,N,T=M.getRng(!0);if(T.collapsed){if(!e.isDefaultPrevented()&&(g=T.startContainer,v=T.startOffset,w=(w=(R.force_p_newlines?"p":"")||R.forced_root_block)?w.toUpperCase():"",b=B.doc.documentMode,C=e.shiftKey,1==g.nodeType&&g.hasChildNodes()&&(N=v>g.childNodes.length-1,g=g.childNodes[Math.min(v,g.childNodes.length-1)]||g,v=N&&3==g.nodeType?g.nodeValue.length:0),h=f(g)))if(L.beforeChange(),B.isBlock(h)||h==B.getRoot()){if((w&&!C||!w&&C)&&(g=a(g,v)),y=B.getParent(g,B.isBlock),S=y?B.getParent(y.parentNode,B.isBlock):null,E=y?y.nodeName.toUpperCase():"","LI"!=(k=S?S.nodeName.toUpperCase():"")||e.ctrlKey||(y=S,E=k),"LI"==E){if(!w&&C)return void d();if(B.isEmpty(y))return!/^(UL|OL|LI)$/.test(S.parentNode.nodeName)&&void s()}if("PRE"==E&&!1!==R.br_in_pre){if(!C)return void d()}else if(!w&&!C&&"LI"!=E||w&&C)return void d();w=w||"P",i()?(x=/^(H[1-6]|PRE)$/.test(E)&&"HGROUP"!=k?r(w):r(),R.end_container_on_empty_block&&c(S)&&B.isEmpty(y)?x=B.split(S,y):B.insertAfter(x,y),o(x)):i(!0)?t(x=y.parentNode.insertBefore(r(),y)):((m=T.cloneRange()).setEndAfter(y),u(_=m.extractContents()),x=_.firstChild,B.insertAfter(_,y),n(x),p(y),o(x)),B.setAttrib(x,"id",""),L.add()}else w&&!C||d()}else A.execCommand("Delete")}var B=A.dom,M=A.selection,R=A.settings,L=A.undoManager,D=A.schema.getNonEmptyElements();A.onKeyDown.add(function(e,t){13==t.keyCode&&!1!==n(t)&&t.preventDefault()})}}(tinymce);